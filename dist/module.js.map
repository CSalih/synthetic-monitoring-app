{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"react\"","webpack:///external \"@grafana/ui\"","webpack:///../node_modules/tslib/tslib.es6.js","webpack:///external \"@grafana/runtime\"","webpack:///external \"@grafana/data\"","webpack:///./components/TenantView.tsx","webpack:///./datasource/ConfigEditor.tsx","webpack:///external \"emotion\"","webpack:///./types.ts","webpack:///./legacy/config.ts","webpack:///./utils.ts","webpack:///./components/InstanceList.tsx","webpack:///./dashboards/loader.ts","webpack:///./components/DashboardList.tsx","webpack:///./components/TenantSetup.tsx","webpack:///./validation.ts","webpack:///./components/utils.tsx","webpack:///./components/PingSettings.tsx","webpack:///./components/HttpSettings.tsx","webpack:///./components/DnsSettings.tsx","webpack:///./components/TcpSettings.tsx","webpack:///./components/CheckEditor.tsx","webpack:///./components/UptimeGauge.tsx","webpack:///./page/ChecksPage.tsx","webpack:///./components/ProbeEditor.tsx","webpack:///./page/ProbesPage.tsx","webpack:///./RootPage.tsx","webpack:///./module.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","__WEBPACK_EXTERNAL_MODULE__0__","__WEBPACK_EXTERNAL_MODULE__1__","extendStatics","b","setPrototypeOf","__proto__","Array","__extends","__","this","constructor","__assign","assign","arguments","length","apply","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","iterator","v","op","TypeError","pop","push","__values","__read","ar","error","__spread","concat","__WEBPACK_EXTERNAL_MODULE__3__","__WEBPACK_EXTERNAL_MODULE__4__","render","settings","margin","LinkedDatasourceView","info","metrics","logs","state","onClick","ds","type","update","partial","path","id","componentDidMount","setState","datasources","grafanaName","className","src","meta","logos","small","onAccessTokenChange","event","onOptionsChange","options","secureJsonData","accessToken","target","onResetAccessToken","secureJsonFields","isConfigured","isValid","jsonData","SecretFormField","placeholder","labelWidth","inputWidth","onReset","onChange","apiHost","hostedId","__WEBPACK_EXTERNAL_MODULE__7__","IpVersion","HttpMethod","HttpVersion","DnsRecordType","DnsProtocol","CheckType","OrgRole","$scope","$injector","appEditCtrl","setPostUpdateHook","postUpdate","appModel","console","log","enabled","templateUrl","findHostedInstance","known","basicAuthUser","instanceUrl","url","getHostedLokiAndPrometheusInfo","values","indexOf","createNewWorldpingInstance","post","access","isDefault","createHostedInstance","data","basicAuth","basicAuthPassword","datasource","hasRole","requiredRole","user","bootData","ADMIN","orgRole","EDITOR","VIEWER","types","keys","HTTP","defaultSettings","http","method","GET","ipVersion","V4","noFollowRedirects","PING","ping","dontFragment","DNS","dns","recordType","A","server","protocol","UDP","port","TCP","tcp","tls","dashboardUID","checkType","dashboards","instanceSettings","undefined","item","title","toLocaleLowerCase","selected","props","instances","map","instance","isSelected","logo","hostedType","onSelected","variant","href","orgSlug","rel","icon","dashboardPaths","findWorldpingFolder","backendSrv","folders","folder","importDashboard","json","dashboard","overwrite","inputs","pluginId","folderId","uid","version","latestVersion","listAppDashboards","dInfo","removeDashboard","onImport","updated","findIndex","onRemove","splice","checkUpdates","latestDashboards","withImports","style","textAlign","buttonText","defaultApiHost","showResetModal","resetConfig","showAdvanced","onInit","adminApiToken","registerInit","alert","logsInstance","tenantInfo","logInstance","metricsInstance","metricInstance","onApiHostChange","onApiTokenChange","onSelectLogs","onSelectMetrics","createDataSource","hosted","getViewerToken","token","onSave","hostedMetrics","find","hostedLogs","registerSave","window","location","reload","onToggleAdvanced","isOpen","show","renderSetup","filter","wrap","width","collapsible","onToggle","TenantView","confirmText","onConfirm","onDismiss","CheckValidation","job","validateJob","validateTarget","frequency","validateFrequency","timeout","validateTimeout","labels","validateLabels","checkT","probes","validateProbes","validateCheck","check","freq","validateLabelName","validateLabelValue","reservedLabels","labelRegex","test","help","content","numLabels","addLabel","onUpdate","onDelete","index","isEditor","justify","items","renderItem","disabled","size","onNameChange","onValueChange","componentDidUpdate","oldProps","invalid","IpOptions","Any","V6","onIpVersionChange","onDontFragmentChange","onToggleOptions","padding","headers","failIfSSL","failIfNotSSL","validStatusCodes","validHTTPVersions","failIfBodyMatchesRegexp","failIfBodyNotMatchesRegexp","failIfHeaderMatchesRegexp","failIfHeaderNotMatchesRegexp","cacheBustingQueryParamName","showValidation","showAuthentication","showTLS","onMethodChange","onBodyChange","onBearerTokenChange","bearerToken","onBasicAuthChange","onNoFollowRedirectsChange","onFailIfNotSSLChange","onFailIfSSLChange","onCacheBustingQueryParamNameChange","onToggleValidation","onToggleAuthentication","onToggleTLS","onTLSChange","tlsConfig","onValidHttpVersionsChange","onValidStatusCodeChange","onHeadersUpdate","onFailIfBodyMatchesRegexpChange","forEach","onFailIfBodyMatchesRegexpDelete","addFailIfBodyMatchesRegexp","onFailIfBodyNotMatchesRegexpChange","onFailIfBodyNotMatchesRegexpDelete","addFailIfBodyNotMatchesRegexp","onFailIfHeaderMatchesUpdate","headerMatches","matches","onFailIfHeaderNotMatchesUpdate","headersToLabels","parts","split","generateValidStatusCodes","validCodes","httpVersionOptions","HTTP1_0","HTTP1_1","HTTP2_0","methodOptions","HEAD","PUT","POST","DELETE","OPTIONS","rows","username","password","auth","onUsernameChange","onPasswordChange","insecureSkipVerify","caCert","clientCert","clientKey","serverName","cfg","onInsecureSkipVerifyChange","onServerNameChange","onCACertChange","onClientCertChange","onClientKeyChange","onHeaderChange","header","regexp","allowMissing","onRegexpChange","onAllowMissingChange","onHeaderMatchesDelete","onHeaderMatchesAdd","validRCodes","validateAnswerRRS","validateAuthorityRRS","validateAdditionalRRS","onProtocolChange","onPortChange","valueAsNumber","onServerChange","onRecordTypeChange","onShowAdvanced","onShowValidation","onValidRCodesChange","onValidateAnswerChange","validations","failIfMatchesRegexp","failIfNotMatchesRegexp","onValidateAuthorityChange","onValidateAdditionalChange","recordTypes","AAAA","CNAME","MX","NS","SOA","TXT","PTR","SRV","protocols","onFailIfMatchesRegexpChange","onFailIfNotMatchesRegexpChange","onFailIfMatchesRegexpDelete","onFailIfNotMatchesRegexpDelete","onFailIfMatchesRegexpAdd","onFailIfNotMatchesRegexpAdd","queryResponse","showQueryResponse","onTLSCOnfigChange","onShowQueryResponse","onQueryResponsesUpdate","config","queryResponses","expect","atob","send","startTLS","btoa","onSendChange","onExpectChange","onStartTLSChange","onQueryResponseDelete","onQueryResponseAdd","showDeleteModal","targetHelp","example","showDeleteCheckModal","onRemoveCheck","deleteCheck","onReturn","onLabelsUpdate","onProbesUpdate","onSettingsUpdate","onSetType","typeOfCheck","targetHelpText","onJobUpdate","onTargetUpdate","onFrequencyUpdate","onTimeoutUpdate","updateCheck","addCheck","onEnableChange","onBack","listProbes","text","resp","legend","checkTypes","required","suffix","max","min","availableProbes","toLocaleUpperCase","onJsonChange","JSON","parse","onSettingsChange","probeStr","join","str","online","selectedProbes","existing","lastUpdate","numeric","points","labelNames","labelValues","filters","k","queryUptime","sparkline","Math","floor","Date","now","datasourceRequest","params","query","time","ok","uptime","parseFloat","color","toFixed","queryHistory","start","end","height","sparklineData","yMin","yMax","theme","colorMode","Value","graphMode","Area","iconName","checks","filteredChecks","addNew","typeFilter","searchFilter","totalPages","currentPage","checksPerPage","onSelectCheck","showDashboard","stopPropagation","worldping","q","onTypeFilterChanged","filterChecks","onSearchFilterChange","changePage","toPage","onAddNew","onRefresh","listChecks","onGoBack","refresh","sortedChecks","sort","a","localeCompare","ceil","num","parseInt","slice","formatLabels","filtered","term","match","renderCheckList","autoFocus","prefix","currentTarget","checkId","getMetricsDS","numberOfPages","onNavigate","template","showTokenModal","probeToken","showDeleteProbeModal","onRemoveProbe","probe","deleteProbe","onLatUpdate","latitude","onLongUpdate","longitude","onNameUpdate","updateProbe","addProbe","onResetToken","resetProbeToken","renderStatus","onlineTxt","onlineIcon","align","onSelectProbe","labelsToString","public","onlineChange","renderProbeList","probeId","loadInstances","global","loadDataSourceIfExists","valid","updateNav","prevProps","page","onNavChanged","tabs","found","tab","active","node","img","large","subTitle","children","main","renderMultipleConfigs","dashboardRedirect","setRootPage"],"mappings":"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","file":"module.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 9);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__3__;","module.exports = __WEBPACK_EXTERNAL_MODULE__4__;","import React, { PureComponent } from 'react';\nimport { WorldpingOptions, LinkedDatsourceInfo } from 'datasource/types';\nimport { config, getLocationSrv } from '@grafana/runtime';\nimport { DataSourceInstanceSettings } from '@grafana/data';\nimport { Button, Container } from '@grafana/ui';\n\ninterface Props {\n  settings: WorldpingOptions;\n}\n\nexport class TenantView extends PureComponent<Props> {\n  render() {\n    const { settings } = this.props;\n    if (!settings) {\n      return <div>Loading...</div>;\n    }\n\n    return (\n      <div>\n        <h2>Linked Data Sources</h2>\n        <Container margin=\"sm\">\n          <LinkedDatasourceView info={settings.metrics} />\n          <LinkedDatasourceView info={settings.logs} />\n        </Container>\n      </div>\n    );\n  }\n}\n\ninterface Props2 {\n  info: LinkedDatsourceInfo;\n}\ninterface State2 {\n  ds?: DataSourceInstanceSettings;\n}\n\nclass LinkedDatasourceView extends PureComponent<Props2, State2> {\n  state: State2 = {};\n\n  componentDidMount() {\n    const { info } = this.props;\n    this.setState({\n      ds: config.datasources[info.grafanaName],\n    });\n  }\n\n  onClick = () => {\n    const { ds } = this.state;\n    if (ds?.type === 'worldping-datasource') {\n      getLocationSrv().update({\n        partial: false,\n        path: `a/grafana-worldping-app/`,\n      });\n    } else {\n      getLocationSrv().update({\n        partial: false,\n        path: `datasources/edit/${ds?.id}/`,\n      });\n    }\n  };\n\n  render() {\n    const { ds } = this.state;\n    if (!ds) {\n      return <div>Loading...</div>;\n    }\n\n    return (\n      <div className=\"add-data-source-item\" onClick={this.onClick}>\n        <img className=\"add-data-source-item-logo\" src={ds.meta.info.logos.small} />\n        <div className=\"add-data-source-item-text-wrapper\">\n          <span className=\"add-data-source-item-text\">{ds.name}</span>\n          <span className=\"add-data-source-item-desc\">{ds.type}</span>\n        </div>\n        <div className=\"add-data-source-item-actions\">\n          <Button>Edit</Button>\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { PureComponent, ChangeEvent } from 'react';\nimport { DataSourcePluginOptionsEditorProps } from '@grafana/data';\nimport { WorldpingOptions, SecureJsonData } from './types';\nimport { LegacyForms } from '@grafana/ui';\nimport { TenantView } from 'components/TenantView';\n\ninterface Props extends DataSourcePluginOptionsEditorProps<WorldpingOptions, SecureJsonData> {}\n\nexport class ConfigEditor extends PureComponent<Props> {\n  onAccessTokenChange = (event: ChangeEvent<HTMLInputElement>) => {\n    const { onOptionsChange, options } = this.props;\n    onOptionsChange({\n      ...options,\n      secureJsonData: {\n        accessToken: event.target.value,\n      },\n    });\n  };\n\n  onResetAccessToken = () => {\n    const { onOptionsChange, options } = this.props;\n    onOptionsChange({\n      ...options,\n      secureJsonFields: {\n        ...options.secureJsonFields,\n        accessToken: false,\n      },\n      secureJsonData: {\n        ...options.secureJsonData,\n        accessToken: '',\n      },\n    });\n  };\n\n  render() {\n    const { options } = this.props;\n    const { secureJsonFields } = options;\n    const secureJsonData = (options.secureJsonData || {}) as SecureJsonData;\n    function isConfigured(): boolean {\n      return (secureJsonFields && secureJsonFields.accessToken) as boolean;\n    }\n    return (\n      <div>\n        {isValid(options.jsonData) && isConfigured() && <TenantView settings={options.jsonData} />}\n        <br />\n        <div className=\"gf-form-group\">\n          <div className=\"gf-form-inline\">\n            <div className=\"gf-form\">\n              <LegacyForms.SecretFormField\n                isConfigured={isConfigured()}\n                value={secureJsonData.accessToken || ''}\n                label=\"Access Token\"\n                placeholder=\"access token saved on the server\"\n                labelWidth={10}\n                inputWidth={20}\n                onReset={this.onResetAccessToken}\n                onChange={this.onAccessTokenChange}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport function isValid(settings: WorldpingOptions): boolean {\n  if (!settings) {\n    return false;\n  }\n\n  const { apiHost, metrics, logs } = settings;\n  if (!apiHost || !metrics || !metrics.grafanaName || !metrics.hostedId) {\n    return false;\n  }\n\n  if (!logs || !logs.grafanaName || !logs.hostedId) {\n    return false;\n  }\n\n  return true;\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__7__;","import { DataSourceApi } from '@grafana/data';\nimport { WorldPingDataSource } from 'datasource/DataSource';\n\n// App Settings\nexport interface GlobalSettings {\n  // anything?\n}\n\nexport enum IpVersion {\n  Any = 'Any',\n  V4 = 'V4',\n  V6 = 'V6',\n}\n\nexport interface PingSettings {\n  ipVersion: IpVersion;\n  dontFragment: boolean;\n}\n\nexport enum HttpMethod {\n  GET = 'GET',\n  HEAD = 'HEAD',\n  POST = 'POST',\n  PUT = 'PUT',\n  OPTIONS = 'OPTIONS',\n  DELETE = 'DELETE',\n}\n\nexport enum HttpVersion {\n  HTTP1_0 = 'HTTP/1.0',\n  HTTP1_1 = 'HTTP/1.1',\n  HTTP2_0 = 'HTTP/2',\n}\n\nexport enum DnsRecordType {\n  A = 'A',\n  AAAA = 'AAAA',\n  CNAME = 'CNAME',\n  MX = 'MX',\n  NS = 'NS',\n  PTR = 'PTR',\n  SOA = 'SOA',\n  SRV = 'SRV',\n  TXT = 'TXT',\n}\n\nexport enum DnsProtocol {\n  TCP = 'TCP',\n  UDP = 'UDP',\n}\n\nexport interface HeaderMatch {\n  header: string;\n  regexp: string;\n  allowMissing: boolean;\n}\n\n// HttpSettings provides the settings for a HTTP check.\nexport interface HttpSettings {\n  method: HttpMethod;\n  headers?: string[];\n  body?: string;\n  ipVersion: IpVersion;\n  noFollowRedirects: boolean;\n  tlsConfig?: TLSConfig;\n\n  // Authentication\n  bearerToken?: string;\n  basicAuth?: BasicAuth;\n\n  // validations\n  failIfSSL?: boolean;\n  failIfNotSSL?: boolean;\n  validStatusCodes?: number[];\n  validHTTPVersions?: HttpVersion[];\n  failIfBodyMatchesRegexp?: string[];\n  failIfBodyNotMatchesRegexp?: string[];\n  failIfHeaderMatchesRegexp?: HeaderMatch[];\n  failIfHeaderNotMatchesRegexp?: HeaderMatch[];\n\n  cacheBustingQueryParamName?: string;\n}\n\nexport interface TLSConfig {\n  insecureSkipVerify: boolean;\n  caCert: string;\n  clientCert: string;\n  clientKey: string;\n  serverName: string;\n}\n\nexport interface BasicAuth {\n  username: string;\n  password: string;\n}\n\nexport interface DNSRRValidator {\n  failIfMatchesRegexp: string[];\n  failIfNotMatchesRegexp: string[];\n}\n\n// DnsSettings provides the settings for a DNS check.\nexport interface DnsSettings {\n  recordType: DnsRecordType;\n  server: string;\n  ipVersion: IpVersion;\n  protocol: DnsProtocol;\n  port: number;\n\n  // validation\n  validRCodes?: string[];\n  validateAnswerRRS?: DNSRRValidator;\n  validateAuthorityRRS?: DNSRRValidator;\n  validateAdditionalRRS?: DNSRRValidator;\n}\n\nexport interface TcpSettings {\n  ipVersion: IpVersion;\n  tls: boolean;\n  tlsConfig?: TLSConfig;\n  queryResponse?: TCPQueryResponse[];\n}\n\nexport interface TCPQueryResponse {\n  send: string;\n  expect: string;\n  startTLS: boolean;\n}\n\nexport interface BaseObject {\n  id?: number;\n  tenantId?: number;\n  created?: number; // seconds\n  updated?: number; // seconds\n}\n\nexport interface Label {\n  name: string;\n  value: string;\n}\n\nexport interface Probe extends BaseObject {\n  name: string;\n  public: boolean;\n  latitude: number;\n  longitude: number;\n  online: boolean;\n  onlineChange: number;\n  labels: Label[];\n}\n\nexport interface Check extends BaseObject {\n  job: string;\n  target: string;\n  frequency: number;\n  offset?: number;\n  timeout: number;\n  enabled: boolean;\n\n  labels: Label[]; // Currently list of [name:value]... can it be Labels?\n  settings: Settings; //\n\n  // Link to probes\n  probes: number[];\n}\n\nexport interface Settings {\n  http?: HttpSettings;\n  ping?: PingSettings;\n  dns?: DnsSettings;\n  tcp?: TcpSettings;\n}\n\nexport enum CheckType {\n  HTTP = 'http',\n  PING = 'ping',\n  DNS = 'dns',\n  TCP = 'tcp',\n}\n\nexport interface HostedInstance {\n  id: number;\n  orgSlug: string;\n  orgName: string;\n  clusterSlug: string;\n  clusterName: string;\n  type: string; // \"prometheus\" \"logs\",\n  name: string;\n  url: string;\n  description: string;\n  status: string;\n  currentActiveSeries: number;\n  currentDpm: number;\n  currentUsage: number;\n}\n\nexport interface RegistrationInfo {\n  accessToken: string;\n  tenantInfo: {\n    id: number;\n    metricInstance: HostedInstance;\n    logInstance: HostedInstance;\n  };\n  instances: HostedInstance[];\n}\n\nexport interface GrafanaInstances {\n  worldping: WorldPingDataSource;\n  metrics?: DataSourceApi;\n  logs?: DataSourceApi;\n}\n\nexport interface User {\n  email: string;\n  id: number;\n  isGrafanaAdmin: boolean;\n  isSignedIn: boolean;\n  orgId: number;\n  orgName: string;\n  orgRole: OrgRole;\n}\n\nexport enum OrgRole {\n  ADMIN = 'Admin',\n  EDITOR = 'Editor',\n  VIEWER = 'Viewer',\n}\n","import { PluginMeta } from '@grafana/data';\nimport { getLocationSrv } from '@grafana/runtime';\n\nexport class ExampleConfigCtrl {\n  static templateUrl = 'legacy/config.html';\n\n  appEditCtrl: any;\n  appModel?: PluginMeta;\n\n  /** @ngInject */\n  constructor($scope: any, $injector: any) {\n    this.appEditCtrl.setPostUpdateHook(this.postUpdate.bind(this));\n\n    // Make sure it has a JSON Data spot\n    if (!this.appModel) {\n      this.appModel = {} as PluginMeta;\n    }\n\n    // Required until we get the types sorted on appModel :(\n    const appModel = this.appModel as any;\n    if (!appModel.jsonData) {\n      appModel.jsonData = {};\n    }\n\n    console.log('ExampleConfigCtrl', this);\n  }\n\n  postUpdate() {\n    if (!this.appModel?.enabled) {\n      console.log('Not enabled...');\n      return;\n    }\n\n    getLocationSrv().update({\n      path: 'a/grafana-worldping-app',\n      partial: false,\n    });\n  }\n}\n","import { DataSourceInstanceSettings, DataSourceSettings } from '@grafana/data';\n\nimport { WorldpingOptions, DashboardInfo } from './datasource/types';\n\nimport { config, getBackendSrv } from '@grafana/runtime';\nimport {\n  HostedInstance,\n  User,\n  OrgRole,\n  CheckType,\n  Settings,\n  IpVersion,\n  HttpMethod,\n  DnsRecordType,\n  DnsProtocol,\n} from 'types';\nimport { WorldPingDataSource } from 'datasource/DataSource';\n\n/**\n * Find all worldping datasources\n */\nexport function findWorldPingDataSources(): Array<DataSourceInstanceSettings<WorldpingOptions>> {\n  return Object.values(config.datasources).filter(ds => {\n    return ds.type === 'worldping-datasource';\n  }) as Array<DataSourceInstanceSettings<WorldpingOptions>>;\n}\n\n/** Given hosted info, link to an existing instance */\nexport function findHostedInstance(\n  known: DataSourceInstanceSettings[],\n  info?: HostedInstance\n): DataSourceInstanceSettings | undefined {\n  if (info) {\n    const basicAuthUser = `${info.id}`;\n    const instanceUrl = info.url + (info.type === 'logs' ? '' : '/api/prom');\n    for (const ds of known) {\n      if (ds.url === instanceUrl) {\n        console.log('MAYBE:', basicAuthUser, (ds as any).basicAuthUser, ds);\n        if (basicAuthUser === (ds as any).basicAuthUser) {\n          return ds;\n        }\n      }\n    }\n  }\n  return undefined;\n}\n\n/** Given hosted info, link to an existing instance */\nexport async function getHostedLokiAndPrometheusInfo(): Promise<DataSourceInstanceSettings[]> {\n  const settings: DataSourceInstanceSettings[] = [];\n  for (const ds of Object.values(config.datasources)) {\n    if (ds.type === 'prometheus' || ds.type === 'loki') {\n      const s = await getBackendSrv().get(`api/datasources/${ds.id}`);\n      if (s.url && s.url.indexOf('grafana.net') > 0) {\n        settings.push(s as DataSourceInstanceSettings);\n      }\n    }\n  }\n  return settings;\n}\n\nexport async function createNewWorldpingInstance(): Promise<DataSourceSettings> {\n  return getBackendSrv().post('api/datasources', {\n    name: 'Worldping',\n    type: 'worldping-datasource',\n    access: 'proxy',\n    isDefault: false,\n  });\n}\n\nexport async function createHostedInstance(\n  name: string,\n  info: HostedInstance,\n  key: string\n): Promise<DataSourceInstanceSettings> {\n  const data = {\n    name,\n    url: info.url + (info.type === 'logs' ? '' : '/api/prom'),\n    access: 'proxy',\n    basicAuth: true,\n    basicAuthUser: `${info.id}`,\n    secureJsonData: {\n      basicAuthPassword: key,\n    },\n    type: info.type === 'logs' ? 'loki' : 'prometheus',\n  };\n  return getBackendSrv()\n    .post('api/datasources', data)\n    .then(d => {\n      return d.datasource;\n    });\n}\n\nexport function hasRole(requiredRole: OrgRole): boolean {\n  const user: User = config.bootData.user;\n  switch (requiredRole) {\n    case OrgRole.ADMIN: {\n      return user.orgRole === OrgRole.ADMIN;\n    }\n    case OrgRole.EDITOR: {\n      return user.orgRole === OrgRole.ADMIN || user.orgRole === OrgRole.EDITOR;\n    }\n    case OrgRole.VIEWER: {\n      return user.orgRole === OrgRole.ADMIN || user.orgRole === OrgRole.EDITOR || user.orgRole === OrgRole.VIEWER;\n    }\n    default: {\n      return false;\n    }\n  }\n}\n\nexport function checkType(settings: Settings): CheckType {\n  let types = Object.keys(settings);\n  if (types.length < 1) {\n    return CheckType.HTTP;\n  }\n  return types[0] as CheckType;\n}\n\nexport function defaultSettings(t: CheckType): Settings | undefined {\n  switch (t) {\n    case CheckType.HTTP: {\n      return {\n        http: {\n          method: HttpMethod.GET,\n          ipVersion: IpVersion.V4,\n          noFollowRedirects: false,\n        },\n      };\n    }\n    case CheckType.PING: {\n      return {\n        ping: {\n          ipVersion: IpVersion.V4,\n          dontFragment: false,\n        },\n      };\n    }\n    case CheckType.DNS: {\n      return {\n        dns: {\n          recordType: DnsRecordType.A,\n          server: '8.8.8.8',\n          ipVersion: IpVersion.V4,\n          protocol: DnsProtocol.UDP,\n          port: 53,\n        },\n      };\n    }\n    case CheckType.TCP: {\n      return {\n        tcp: {\n          ipVersion: IpVersion.V4,\n          tls: false,\n        },\n      };\n    }\n  }\n}\n\n/** Given hosted info, link to an existing instance */\nexport function dashboardUID(checkType: string, ds: WorldPingDataSource): DashboardInfo | undefined {\n  const dashboards = ds.instanceSettings.jsonData.dashboards;\n  let target: DashboardInfo | undefined = undefined;\n  for (const item of dashboards) {\n    if (item.title.toLocaleLowerCase() === 'worldping ' + checkType) {\n      target = item;\n    }\n  }\n  return target;\n}\n","import React, { PureComponent } from 'react';\nimport { Button, LinkButton } from '@grafana/ui';\nimport { HostedInstance } from 'types';\nimport { css } from 'emotion';\n\ninterface Props {\n  selected: number;\n  instances: HostedInstance[];\n  onSelected: (id: number) => void;\n}\n\nexport class InstanceList extends PureComponent<Props> {\n  render() {\n    const { selected } = this.props;\n    return (\n      <div>\n        {this.props.instances.map(instance => {\n          const isSelected = selected === instance.id;\n          let logo = 'public/app/plugins/datasource/prometheus/img/prometheus_logo.svg';\n          let hostedType = 'metrics';\n          if (instance.type === 'logs') {\n            logo = 'public/app/plugins/datasource/loki/img/loki_icon.svg';\n            hostedType = 'logs';\n          }\n\n          let className = 'add-data-source-item';\n          if (isSelected) {\n            // 1px solid $blue-light;\n            className += ' ' + css(`border:1px solid #5794f2`);\n          }\n\n          return (\n            <div key={instance.id} className={className} onClick={() => this.props.onSelected(instance.id)}>\n              <img className=\"add-data-source-item-logo\" src={logo} />\n              <div className=\"add-data-source-item-text-wrapper\">\n                <span className=\"add-data-source-item-text\">{instance.name}</span>\n                <span className=\"add-data-source-item-desc\">{instance.url}</span>\n              </div>\n              <div className=\"add-data-source-item-actions\">\n                <LinkButton\n                  variant=\"secondary\"\n                  href={`https://grafana.com/orgs/${instance.orgSlug}/hosted-${hostedType}/${instance.id}?utm_source=worldping_app`}\n                  target=\"_blank\"\n                  rel=\"noopener\"\n                  icon=\"external-link-alt\"\n                >\n                  grafana.com\n                </LinkButton>\n                {!isSelected && <Button>Select</Button>}\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    );\n  }\n}\n","import { getBackendSrv } from '@grafana/runtime';\nimport { DashboardInfo, FolderInfo, WorldpingOptions } from 'datasource/types';\n\nexport const dashboardPaths = [\n  'worldping-http.json', // The path\n  'worldping-ping.json',\n  'worldping-dns.json',\n  'worldping-tcp.json',\n  'worldping-summary.json',\n];\n\nasync function findWorldpingFolder(): Promise<FolderInfo> {\n  const backendSrv = getBackendSrv();\n  const folders = (await backendSrv.get(`api/folders`)) as FolderInfo[];\n  for (const folder of folders) {\n    if (folder.title === 'worldPing') {\n      return folder;\n    }\n  }\n\n  return await backendSrv.post('api/folders', {\n    title: 'worldPing',\n  });\n}\n\nexport async function importDashboard(path: string, options: WorldpingOptions): Promise<DashboardInfo> {\n  const backendSrv = getBackendSrv();\n\n  const json = await backendSrv.get(`public/plugins/grafana-worldping-app/dashboards/${path}`);\n\n  const folder = await findWorldpingFolder();\n\n  const info = await backendSrv.post('api/dashboards/import', {\n    dashboard: json,\n    overwrite: true, // UID?\n    inputs: [\n      { name: 'DS_WORLDPING_METRICS', type: 'datasource', pluginId: 'prometheus', value: options.metrics.grafanaName },\n      { name: 'DS_WORLDPING_LOGS', type: 'datasource', pluginId: 'loki', value: options.logs.grafanaName },\n    ],\n    folderId: folder.id,\n  });\n\n  return {\n    title: info.title,\n    uid: json.uid,\n    json: path,\n    version: json.version,\n    latestVersion: json.version,\n  };\n}\n\nexport async function listAppDashboards(): Promise<DashboardInfo[]> {\n  const backendSrv = getBackendSrv();\n  let dashboards: DashboardInfo[] = [];\n  for (const p of dashboardPaths) {\n    const json = await backendSrv.get(`public/plugins/grafana-worldping-app/dashboards/${p}`);\n\n    const dInfo = {\n      title: json.title,\n      uid: json.uid,\n      json: p,\n      version: 0,\n      latestVersion: json.version,\n    };\n    dashboards.push(dInfo);\n  }\n  return dashboards;\n}\n\nexport async function removeDashboard(dashboard: DashboardInfo): Promise<any> {\n  const backendSrv = getBackendSrv();\n  return backendSrv.delete(`/api/dashboards/uid/${dashboard.uid}`);\n}\n","import React, { PureComponent } from 'react';\nimport { Icon } from '@grafana/ui';\nimport { DashboardInfo, WorldpingOptions } from 'datasource/types';\nimport { listAppDashboards, importDashboard, removeDashboard } from 'dashboards/loader';\n\ninterface Props {\n  checkUpdates: boolean;\n  options: WorldpingOptions;\n  onChange?: (options: WorldpingOptions) => void;\n}\n\ninterface State {\n  dashboards: DashboardInfo[];\n}\n\nexport class DashboardList extends PureComponent<Props, State> {\n  state: State = {\n    dashboards: this.props.options.dashboards,\n  };\n\n  async componentDidMount() {\n    const { checkUpdates, onChange } = this.props;\n    if (!checkUpdates || !onChange) {\n      return;\n    }\n\n    // merge dashboards known to grafana with latest in the app.\n    let dashboards = [...this.state.dashboards];\n    const latestDashboards = await listAppDashboards();\n    for (const dashboard of latestDashboards) {\n      let i = dashboards.findIndex(item => {\n        return item.uid === dashboard.uid;\n      });\n      if (i < 0) {\n        dashboards.push(dashboard);\n      } else {\n        dashboards[i].latestVersion = dashboard.latestVersion;\n        if (!dashboards[i].version) {\n          dashboards[i].version = -1;\n        }\n      }\n    }\n    console.log(dashboards);\n    this.setState({ dashboards });\n  }\n\n  onImport = (dashboard: DashboardInfo) => async () => {\n    const { onChange } = this.props;\n    if (!onChange) {\n      return;\n    }\n    let options = { ...this.props.options };\n    const updated = await importDashboard(dashboard.json, options);\n    console.log('dashboard updated');\n    let i = options.dashboards.findIndex(item => {\n      return item.uid === updated.uid;\n    });\n    if (i < 0) {\n      options.dashboards.push(updated);\n    } else {\n      options.dashboards[i] = updated;\n    }\n\n    let dashboards = [...this.state.dashboards];\n    i = dashboards.findIndex(item => {\n      return item.uid === updated.uid;\n    });\n    if (i < 0) {\n      dashboards.push(updated);\n    } else {\n      dashboards[i] = updated;\n    }\n\n    this.setState({ dashboards });\n    return onChange(options);\n  };\n\n  onRemove = (dashboard: DashboardInfo) => async () => {\n    const { onChange } = this.props;\n    if (!onChange) {\n      return;\n    }\n    let options = { ...this.props.options };\n    await removeDashboard(dashboard);\n\n    let i = options.dashboards.findIndex(item => {\n      return item.uid === dashboard.uid;\n    });\n\n    if (i >= 0) {\n      options.dashboards.splice(i, 1);\n    }\n\n    let dashboards = [...this.state.dashboards];\n    i = dashboards.findIndex(item => {\n      return item.uid === dashboard.uid;\n    });\n    if (i >= 0) {\n      dashboards[i].version = 0;\n    }\n\n    this.setState({ dashboards });\n    return onChange(options);\n  };\n\n  withImports(dashboard: DashboardInfo) {\n    const { checkUpdates } = this.props;\n    if (!checkUpdates) {\n      return;\n    }\n    function buttonText(dashboard: DashboardInfo) {\n      return (dashboard.latestVersion || 0) > (dashboard.version || 0) ? 'Update' : 'Re-import';\n    }\n    return (\n      <td style={{ textAlign: 'right' }}>\n        {dashboard.version === 0 ? (\n          <button className=\"btn btn-secondary btn-small\" onClick={this.onImport(dashboard)}>\n            Import\n          </button>\n        ) : (\n          <button className=\"btn btn-secondary btn-small\" onClick={this.onImport(dashboard)}>\n            {buttonText(dashboard)}\n          </button>\n        )}\n        {dashboard.version !== 0 && (\n          <button className=\"btn btn-danger btn-small\" onClick={this.onRemove(dashboard)}>\n            <Icon name=\"trash-alt\" />\n          </button>\n        )}\n      </td>\n    );\n  }\n\n  render() {\n    const { dashboards } = this.state;\n\n    return (\n      <div>\n        <h3>Dashboards:</h3>\n        <table className=\"filter-table\">\n          <tbody>\n            {dashboards.map(d => {\n              return (\n                <tr key={d.uid}>\n                  <td className=\"width-1\">\n                    <Icon name=\"apps\" />\n                  </td>\n                  <td>\n                    <a href={`d/${d.uid}/`}>{d.title}</a>\n                  </td>\n                  {this.withImports(d)}\n                </tr>\n              );\n            })}\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n}\n","import React, { PureComponent, ChangeEvent } from 'react';\nimport { Label, Button, Input, ConfirmModal, HorizontalGroup, Collapse } from '@grafana/ui';\nimport { RegistrationInfo, HostedInstance } from 'types';\nimport { WorldPingDataSource } from 'datasource/DataSource';\nimport { isValid } from 'datasource/ConfigEditor';\nimport { InstanceList } from './InstanceList';\nimport { createHostedInstance, findHostedInstance, getHostedLokiAndPrometheusInfo } from 'utils';\nimport { WorldpingOptions } from 'datasource/types';\nimport { TenantView } from './TenantView';\nimport { dashboardPaths, importDashboard } from 'dashboards/loader';\nimport { DashboardList } from './DashboardList';\n\ninterface Props {\n  instance: WorldPingDataSource;\n}\n\ninterface State {\n  showAdvanced: boolean;\n  apiHost?: string;\n  adminApiToken?: string;\n  info?: RegistrationInfo;\n  logsInstance?: number;\n  metricsInstance?: number;\n  showResetModal: boolean;\n  resetConfig: boolean;\n}\n\nexport class TenantSetup extends PureComponent<Props, State> {\n  defaultApiHost = 'https://worldping-api-dev.grafana.net';\n\n  state: State = {\n    showResetModal: false,\n    resetConfig: false,\n    apiHost: this.defaultApiHost,\n    showAdvanced: false,\n  };\n\n  onInit = async () => {\n    const { instance } = this.props;\n    const { adminApiToken, apiHost } = this.state;\n    if (!adminApiToken) {\n      alert('Missing admin key');\n      return;\n    }\n    if (!apiHost) {\n      alert('Missing apiHost');\n      return;\n    }\n\n    const info = await instance.registerInit(apiHost, adminApiToken);\n    this.setState({\n      info,\n      logsInstance: info.tenantInfo?.logInstance?.id,\n      metricsInstance: info.tenantInfo?.metricInstance?.id,\n    });\n  };\n\n  onApiHostChange = (event: ChangeEvent<any>) => {\n    this.setState({ apiHost: event.target.value });\n  };\n\n  onApiTokenChange = (event: ChangeEvent<any>) => {\n    this.setState({ adminApiToken: event.target.value });\n  };\n\n  onSelectLogs = (id: number) => {\n    this.setState({ logsInstance: id });\n  };\n  onSelectMetrics = (id: number) => {\n    this.setState({ metricsInstance: id });\n  };\n\n  createDataSource = async (name: string, hosted: HostedInstance) => {\n    const { instance } = this.props;\n    const { adminApiToken } = this.state;\n    try {\n      const token = await instance.getViewerToken(adminApiToken!, hosted!);\n      if (token) {\n        return await createHostedInstance(name, hosted!, token);\n      }\n      console.error('error getting token');\n      return undefined;\n    } catch (ex) {\n      console.log('Error creating', name, hosted, ex);\n    }\n    return undefined;\n  };\n\n  onSave = async () => {\n    const { instance } = this.props;\n    const { info, adminApiToken, apiHost } = this.state;\n    const name = instance?.instanceSettings.name;\n\n    const hostedMetrics = info?.instances.find(i => i.id === this.state.metricsInstance);\n    const hostedLogs = info?.instances.find(i => i.id === this.state.logsInstance);\n\n    if (!hostedMetrics) {\n      alert('Missing metrics instance');\n      return;\n    }\n\n    if (!hostedLogs) {\n      alert('Missing logs instance');\n      return;\n    }\n\n    if (!apiHost) {\n      alert('Missing apiHost');\n      return;\n    }\n\n    const known = await getHostedLokiAndPrometheusInfo();\n\n    let metrics = findHostedInstance(known, hostedMetrics);\n    if (!metrics) {\n      metrics = await this.createDataSource(`${name} Metrics`, hostedMetrics!);\n    }\n\n    let logs = findHostedInstance(known, hostedLogs);\n    if (!logs) {\n      logs = await this.createDataSource(`${name} Logs`, hostedLogs!);\n    }\n\n    const options: WorldpingOptions = {\n      apiHost: apiHost,\n      logs: {\n        grafanaName: logs!.name,\n        hostedId: hostedLogs.id,\n      },\n      metrics: {\n        grafanaName: metrics!.name,\n        hostedId: hostedMetrics.id,\n      },\n      dashboards: [],\n    };\n\n    // Save the dashboard names\n    for (const json of dashboardPaths) {\n      const d = await importDashboard(json, options);\n      options.dashboards.push(d);\n    }\n    await instance!.registerSave(adminApiToken!, options, info?.accessToken!);\n\n    // force reload so that GrafanaBootConfig is updated.\n    window.location.reload();\n  };\n\n  onToggleAdvanced = (isOpen: boolean) => {\n    this.setState({ showAdvanced: !this.state.showAdvanced });\n  };\n\n  renderSetup() {\n    const { info, adminApiToken, apiHost, logsInstance, metricsInstance, showAdvanced } = this.state;\n\n    if (!info) {\n      return (\n        <div>\n          <HorizontalGroup wrap={true}>\n            <Label>Admin API Key</Label>\n\n            <Input\n              type=\"text\"\n              width={100}\n              placeholder=\"Grafana.com Admin Api Key\"\n              value={adminApiToken || ''}\n              onChange={this.onApiTokenChange}\n            />\n          </HorizontalGroup>\n          <br />\n          <Collapse label=\"Advanced\" collapsible={true} onToggle={this.onToggleAdvanced} isOpen={showAdvanced}>\n            <HorizontalGroup>\n              <Label>Backend Address</Label>\n\n              <Input\n                type=\"text\"\n                width={40}\n                placeholder=\"worldPing backend Address\"\n                value={apiHost || this.defaultApiHost}\n                onChange={this.onApiHostChange}\n              />\n            </HorizontalGroup>\n          </Collapse>\n          <Button variant=\"primary\" onClick={this.onInit}>\n            Initalize\n          </Button>\n        </div>\n      );\n    }\n    return (\n      <div>\n        <div>Select the hosted instances where worldping will send it data</div>\n\n        <h4>Metrics</h4>\n        <InstanceList\n          instances={info.instances.filter(f => f.type === 'prometheus')}\n          onSelected={this.onSelectMetrics}\n          selected={metricsInstance!}\n        />\n\n        <h4>Logs</h4>\n        <InstanceList\n          instances={info.instances.filter(f => f.type === 'logs')}\n          onSelected={this.onSelectLogs}\n          selected={logsInstance!}\n        />\n        <br />\n        <br />\n        <Button variant=\"primary\" onClick={this.onSave}>\n          Setup\n        </Button>\n      </div>\n    );\n  }\n\n  showResetModal = (show: boolean) => () => {\n    this.setState({ showResetModal: show });\n  };\n\n  onReset = () => {\n    this.setState({ resetConfig: true });\n  };\n\n  onOptionsChange = (options: WorldpingOptions) => {\n    const { instance } = this.props;\n    return instance.onOptionsChange(options);\n  };\n\n  render() {\n    const { instance } = this.props;\n    if (!instance) {\n      return <div>Loading...</div>;\n    }\n    const { showResetModal, resetConfig } = this.state;\n\n    if (!isValid(instance.instanceSettings?.jsonData) || resetConfig) {\n      return this.renderSetup();\n    }\n\n    return (\n      <div>\n        <DashboardList\n          options={instance.instanceSettings.jsonData}\n          checkUpdates={true}\n          onChange={this.onOptionsChange}\n        />\n        <br />\n        <TenantView settings={instance.instanceSettings.jsonData} />\n        <Button variant=\"destructive\" onClick={this.showResetModal(true)}>\n          Reset\n        </Button>\n        <ConfirmModal\n          isOpen={showResetModal}\n          title=\"Reset Configuration\"\n          body=\"Are you sure you want to reset worldPing's configuration?\"\n          confirmText=\"Reset Configuration\"\n          onConfirm={this.onReset}\n          onDismiss={this.showResetModal(false)}\n        />\n      </div>\n    );\n  }\n}\n","import { Check, CheckType, Settings, HttpSettings, PingSettings, DnsSettings, TcpSettings, Label } from 'types';\nimport { checkType } from 'utils';\n\nexport const CheckValidation = {\n  job: validateJob,\n  target: validateTarget,\n  frequency: validateFrequency,\n  timeout: validateTimeout,\n  labels: validateLabels,\n  settings: validateSettings,\n  probes: validateProbes,\n};\n\nexport function validateCheck(check: Check): boolean {\n  return (\n    CheckValidation.job(check.job) &&\n    CheckValidation.target(check.target) &&\n    CheckValidation.frequency(check.frequency) &&\n    CheckValidation.timeout(check.timeout) &&\n    CheckValidation.labels(check.labels) &&\n    CheckValidation.settings(check.settings) &&\n    CheckValidation.probes(check.probes)\n  );\n}\n\nexport function validateJob(job: string): boolean {\n  return job.length > 0 && job.length < 32;\n}\n\nexport function validateTarget(target: string): boolean {\n  return target.length > 0 && target.length < 64;\n}\n\nexport function validateFrequency(freq: number): boolean {\n  return freq >= 10000 && freq <= 120000;\n}\n\nexport function validateTimeout(t: number): boolean {\n  return t >= 1000 && t <= 10000;\n}\n\nexport function validateLabels(labels: Label[]): boolean {\n  if (labels.length > 64) {\n    return false;\n  }\n  // validate each label\n  for (const l of labels) {\n    if (!validateLabel(l)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nconst reservedLabels: string[] = ['instance', 'job', 'probe', 'config_version', 'check_name'];\n\nconst labelRegex = /^[a-zA-Z_][a-zA-Z0-9_]*$/;\n\nexport function validateLabel(label: Label): boolean {\n  return validateLabelName(label.name) && validateLabelValue(label.value);\n}\n\nexport function validateLabelName(name: string): boolean {\n  if (name.length < 1 || name.length > 32) {\n    return false;\n  }\n\n  if (reservedLabels.indexOf(name) > -1) {\n    return false;\n  }\n  return labelRegex.test(name);\n}\n\nexport function validateLabelValue(value: string): boolean {\n  return value.length > 0 && value.length <= 32;\n}\n\nexport function validateSettings(settings: Settings): boolean {\n  let checkT = checkType(settings);\n  if (!settings[checkT]) {\n    return false;\n  }\n\n  switch (checkT) {\n    case CheckType.HTTP: {\n      return validateSettingsHTTP(settings.http!);\n    }\n    case CheckType.PING: {\n      return validateSettingsPING(settings.ping!);\n    }\n    case CheckType.DNS: {\n      return validateSettingsDNS(settings.dns!);\n    }\n    case CheckType.TCP: {\n      return validateSettingsTCP(settings.tcp!);\n    }\n  }\n}\n\nexport function validateProbes(probes: number[]): boolean {\n  return probes.length > 0 && probes.length <= 64;\n}\n\nexport function validateSettingsHTTP(settings: HttpSettings): boolean {\n  return true;\n}\n\nexport function validateSettingsPING(settings: PingSettings): boolean {\n  return true;\n}\n\nexport function validateSettingsDNS(settings: DnsSettings): boolean {\n  return true;\n}\n\nexport function validateSettingsTCP(settings: TcpSettings): boolean {\n  return true;\n}\n","import React, { PureComponent } from 'react';\nimport { Tooltip, Icon, Container, IconButton, HorizontalGroup, List, Input, VerticalGroup, Button } from '@grafana/ui';\nimport { Label as WorldpingLabel, IpVersion } from 'types';\nimport * as Validation from 'validation';\n\ninterface FormLabelProps {\n  name: string;\n  help?: string;\n}\n\ninterface FormLabelState {}\n\nexport class FormLabel extends PureComponent<FormLabelProps, FormLabelState> {\n  render() {\n    const { help } = this.props;\n    return (\n      <Container margin=\"sm\">\n        {this.props.name}\n        {help && (\n          <Tooltip content={help}>\n            <span>\n              &nbsp;\n              <Icon name=\"question-circle\" />\n            </span>\n          </Tooltip>\n        )}\n      </Container>\n    );\n  }\n}\n\ninterface LabelsProps {\n  labels: WorldpingLabel[];\n  isEditor: boolean;\n  type: string;\n  onUpdate: (labels: WorldpingLabel[]) => void;\n}\n\ninterface LabelsState {\n  labels: WorldpingLabel[];\n  numLabels: number;\n}\n\nexport class WorldpingLabelsForm extends PureComponent<LabelsProps, LabelsState> {\n  state = {\n    labels: this.props.labels || [],\n    numLabels: this.props.labels.length,\n  };\n\n  addLabel = () => {\n    let labels = this.state.labels;\n    console.log('adding new label', labels);\n    const n = labels.push({ name: '', value: '' });\n\n    this.setState({ labels: labels, numLabels: n }, this.onUpdate);\n  };\n\n  onDelete = (index: number) => {\n    let labels = this.state.labels;\n    labels.splice(index, 1);\n    this.setState({ labels: labels, numLabels: labels.length }, this.onUpdate);\n  };\n\n  onUpdate = () => {\n    this.props.onUpdate(this.state.labels);\n  };\n\n  onChange = (index: number, label: WorldpingLabel) => {\n    let labels = this.state.labels;\n    labels[index] = label;\n    this.setState({ labels: labels }, this.onUpdate);\n  };\n\n  render() {\n    const { labels } = this.state;\n    const { isEditor } = this.props;\n    return (\n      <VerticalGroup justify=\"space-between\">\n        <List\n          items={labels}\n          renderItem={(item, index) => (\n            <WorldpingLabelForm\n              onDelete={this.onDelete}\n              onChange={this.onChange}\n              label={item}\n              index={index}\n              isEditor={isEditor}\n            />\n          )}\n        />\n        <Button onClick={this.addLabel} disabled={!isEditor} variant=\"secondary\" size=\"sm\">\n          <Icon name=\"plus\" />\n          &nbsp; Add {this.props.type}\n        </Button>\n      </VerticalGroup>\n    );\n  }\n}\n\ninterface LabelProps {\n  label: WorldpingLabel;\n  index: number;\n  isEditor: boolean;\n  onDelete: (index: number) => void;\n  onChange: (index: number, label: WorldpingLabel) => void;\n}\n\ninterface LabelState {\n  name: string;\n  value: string;\n}\n\nexport class WorldpingLabelForm extends PureComponent<LabelProps, LabelState> {\n  state = {\n    name: this.props.label.name,\n    value: this.props.label.value,\n  };\n\n  componentDidUpdate(oldProps: LabelProps) {\n    const { label, index } = this.props;\n    if (label !== oldProps.label || index !== oldProps.index) {\n      this.setState({ name: this.props.label.name, value: this.props.label.value });\n    }\n  }\n\n  onNameChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ name: event.target.value }, this.onChange);\n  };\n\n  onValueChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ value: event.target.value }, this.onChange);\n  };\n\n  onDelete = () => {\n    this.props.onDelete(this.props.index);\n  };\n\n  onChange = () => {\n    this.props.onChange(this.props.index, { name: this.state.name, value: this.state.value });\n  };\n\n  render() {\n    const { name, value } = this.state;\n    const { isEditor } = this.props;\n    console.log('rendering label with name:', name);\n    return (\n      <HorizontalGroup justify=\"space-between\">\n        <Input\n          type=\"text\"\n          placeholder=\"name\"\n          value={name}\n          onChange={this.onNameChange}\n          disabled={!isEditor}\n          invalid={!Validation.validateLabelName(name)}\n        />\n        <Input\n          type=\"text\"\n          placeholder=\"value\"\n          value={value}\n          onChange={this.onValueChange}\n          disabled={!isEditor}\n          invalid={!Validation.validateLabelValue(value)}\n        />\n        <IconButton name=\"minus-circle\" onClick={this.onDelete} disabled={!isEditor} />\n      </HorizontalGroup>\n    );\n  }\n}\n\nexport const IpOptions = [\n  {\n    label: 'Any',\n    value: IpVersion.Any,\n  },\n  {\n    label: 'V4',\n    value: IpVersion.V4,\n  },\n  {\n    label: 'V6',\n    value: IpVersion.V6,\n  },\n];\n","import React, { PureComponent } from 'react';\nimport { Collapse, Container, HorizontalGroup, Field, Select, Switch } from '@grafana/ui';\nimport { SelectableValue } from '@grafana/data';\nimport { IpVersion, Settings, PingSettings } from 'types';\nimport { FormLabel, IpOptions } from './utils';\n\ninterface Props {\n  settings: Settings;\n  isEditor: boolean;\n  onUpdate: (settings: Settings) => void;\n}\n\ninterface State extends PingSettings {\n  showAdvanced: boolean;\n}\n\nexport class PingSettingsForm extends PureComponent<Props, State> {\n  state: State = {\n    ipVersion: this.props.settings!.ping?.ipVersion || IpVersion.V4,\n    dontFragment: this.props.settings!.ping?.dontFragment || false,\n    showAdvanced: false,\n  };\n\n  onUpdate = () => {\n    const settings = this.state as PingSettings;\n    this.props.onUpdate({\n      ping: settings,\n    });\n  };\n\n  onIpVersionChange = (value: SelectableValue<IpVersion>) => {\n    this.setState({ ipVersion: value.value || IpVersion.Any }, this.onUpdate);\n  };\n\n  onDontFragmentChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ dontFragment: !this.state.dontFragment }, this.onUpdate);\n  };\n\n  onToggleOptions = (isOpen: boolean) => {\n    this.setState({ showAdvanced: !this.state.showAdvanced });\n  };\n\n  render() {\n    const { ipVersion, dontFragment, showAdvanced } = this.state;\n    const { isEditor } = this.props;\n\n    return (\n      <Container>\n        <Collapse label=\"Advanced Options\" collapsible={true} onToggle={this.onToggleOptions} isOpen={showAdvanced}>\n          <HorizontalGroup>\n            <div>\n              <Field\n                label={<FormLabel name=\"IP Version\" help=\"The IP protocol of the ICMP request\" />}\n                disabled={!isEditor}\n              >\n                <Select value={ipVersion} options={IpOptions} onChange={this.onIpVersionChange} />\n              </Field>\n            </div>\n            <div>\n              <Field\n                label={<FormLabel name=\"Don't Fragment\" help=\"Set the DF-bit in the IP-header. Only works with ipV4\" />}\n                disabled={!isEditor}\n              >\n                <Container padding=\"sm\">\n                  <Switch value={dontFragment} onChange={this.onDontFragmentChange} disabled={!isEditor} />\n                </Container>\n              </Field>\n            </div>\n          </HorizontalGroup>\n        </Collapse>\n      </Container>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport {\n  Collapse,\n  Container,\n  HorizontalGroup,\n  Field,\n  Select,\n  Switch,\n  MultiSelect,\n  TextArea,\n  List,\n  IconButton,\n  Input,\n  Button,\n  Icon,\n  VerticalGroup,\n} from '@grafana/ui';\nimport { SelectableValue } from '@grafana/data';\nimport { IpVersion, Settings, HttpSettings, HttpMethod, HttpVersion, BasicAuth, TLSConfig, HeaderMatch } from 'types';\nimport { FormLabel, WorldpingLabelsForm, IpOptions } from './utils';\nimport { Label as WorldpingLabel } from 'types';\n\ninterface Props {\n  settings: Settings;\n  isEditor: boolean;\n  onUpdate: (settings: Settings) => void;\n}\n\ninterface State extends HttpSettings {\n  showAdvanced: boolean;\n  showValidation: boolean;\n  showAuthentication: boolean;\n  showTLS: boolean;\n}\n\nexport class HttpSettingsForm extends PureComponent<Props, State> {\n  state: State = {\n    method: this.props.settings.http?.method || HttpMethod.GET,\n    body: this.props.settings.http?.body,\n    headers: this.props.settings.http?.headers,\n    ipVersion: this.props.settings.http?.ipVersion || IpVersion.V4,\n    noFollowRedirects: this.props.settings.http?.noFollowRedirects || false,\n\n    // validations\n    failIfSSL: this.props.settings.http?.failIfSSL || false,\n    failIfNotSSL: this.props.settings.http?.failIfNotSSL || false,\n    validStatusCodes: this.props.settings.http?.validStatusCodes || [],\n    validHTTPVersions: this.props.settings.http?.validHTTPVersions || [],\n    failIfBodyMatchesRegexp: this.props.settings.http?.failIfBodyMatchesRegexp || [],\n    failIfBodyNotMatchesRegexp: this.props.settings.http?.failIfBodyNotMatchesRegexp || [],\n    failIfHeaderMatchesRegexp: this.props.settings.http?.failIfHeaderMatchesRegexp || [],\n    failIfHeaderNotMatchesRegexp: this.props.settings.http?.failIfHeaderNotMatchesRegexp || [],\n    cacheBustingQueryParamName: this.props.settings.http?.cacheBustingQueryParamName,\n\n    showAdvanced: false,\n    showValidation: false,\n    showAuthentication: false,\n    showTLS: false,\n  };\n\n  onUpdate = () => {\n    const settings = this.state as HttpSettings;\n    this.props.onUpdate({\n      http: settings,\n    });\n  };\n\n  onMethodChange = (value: SelectableValue<HttpMethod>) => {\n    this.setState({ method: value.value || HttpMethod.GET }, this.onUpdate);\n  };\n\n  onBodyChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    this.setState({ body: event.target.value }, this.onUpdate);\n  };\n\n  onBearerTokenChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ bearerToken: event.target.value }, this.onUpdate);\n  };\n\n  onBasicAuthChange = (basicAuth: BasicAuth | undefined) => {\n    this.setState({ basicAuth: basicAuth }, this.onUpdate);\n  };\n\n  onIpVersionChange = (value: SelectableValue<IpVersion>) => {\n    this.setState({ ipVersion: value.value || IpVersion.Any }, this.onUpdate);\n  };\n\n  onNoFollowRedirectsChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ noFollowRedirects: !this.state.noFollowRedirects }, this.onUpdate);\n  };\n\n  onFailIfNotSSLChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ failIfNotSSL: !this.state.failIfNotSSL }, this.onUpdate);\n  };\n\n  onFailIfSSLChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ failIfSSL: !this.state.failIfSSL }, this.onUpdate);\n  };\n\n  onCacheBustingQueryParamNameChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ cacheBustingQueryParamName: event.target.value }, this.onUpdate);\n  };\n\n  onToggleAdvanced = (isOpen: boolean) => {\n    this.setState({ showAdvanced: !this.state.showAdvanced });\n  };\n\n  onToggleValidation = (isOpen: boolean) => {\n    this.setState({ showValidation: !this.state.showValidation });\n  };\n\n  onToggleAuthentication = (isOpen: boolean) => {\n    this.setState({ showAuthentication: !this.state.showAuthentication });\n  };\n\n  onToggleTLS = (isOpen: boolean) => {\n    this.setState({ showTLS: !this.state.showTLS });\n  };\n\n  onTLSChange = (tlsConfig: TLSConfig) => {\n    this.setState({ tlsConfig: tlsConfig }, this.onUpdate);\n  };\n\n  onValidHttpVersionsChange = (item: Array<SelectableValue<HttpVersion>>) => {\n    let validHTTPVersions: HttpVersion[] = [];\n    for (const p of item.values()) {\n      if (p.value) {\n        validHTTPVersions.push(p.value);\n      }\n    }\n    this.setState({ validHTTPVersions }, this.onUpdate);\n  };\n\n  onValidStatusCodeChange = (item: Array<SelectableValue<number>>) => {\n    let validStatusCodes: number[] = [];\n    for (const p of item.values()) {\n      if (p.value) {\n        validStatusCodes.push(p.value);\n      }\n    }\n    this.setState({ validStatusCodes }, this.onUpdate);\n  };\n\n  headersToLabels(): WorldpingLabel[] {\n    let labels: WorldpingLabel[] = [];\n    for (const h of this.state.headers || []) {\n      const parts = h.split(':', 2);\n      labels.push({\n        name: parts[0],\n        value: parts[1],\n      });\n    }\n    return labels;\n  }\n\n  onHeadersUpdate = (labels: WorldpingLabel[]) => {\n    let headers: string[] = [];\n    for (const l of labels) {\n      headers.push(`${l.name}: ${l.value}`);\n    }\n    this.setState({ headers }, this.onUpdate);\n  };\n\n  onFailIfBodyMatchesRegexpChange = (index: number) => (event: React.ChangeEvent<HTMLInputElement>) => {\n    let failIfBodyMatchesRegexp: string[] = [];\n    this.state.failIfBodyMatchesRegexp?.forEach((v, i) => {\n      if (i === index) {\n        failIfBodyMatchesRegexp.push(event.target.value);\n      } else {\n        failIfBodyMatchesRegexp.push(v);\n      }\n    });\n    this.setState({ failIfBodyMatchesRegexp }, this.onUpdate);\n  };\n\n  onFailIfBodyMatchesRegexpDelete = (index: number) => () => {\n    let failIfBodyMatchesRegexp: string[] = [];\n    this.state.failIfBodyMatchesRegexp?.forEach((v, i) => {\n      if (i !== index) {\n        failIfBodyMatchesRegexp.push(v);\n      }\n    });\n    this.setState({ failIfBodyMatchesRegexp }, this.onUpdate);\n  };\n\n  addFailIfBodyMatchesRegexp = () => {\n    let failIfBodyMatchesRegexp: string[] = [];\n    for (const v of this.state.failIfBodyMatchesRegexp || []) {\n      failIfBodyMatchesRegexp.push(v);\n    }\n    failIfBodyMatchesRegexp.push('');\n    this.setState({ failIfBodyMatchesRegexp }, this.onUpdate);\n  };\n\n  onFailIfBodyNotMatchesRegexpChange = (index: number) => (event: React.ChangeEvent<HTMLInputElement>) => {\n    let failIfBodyNotMatchesRegexp: string[] = [];\n    this.state.failIfBodyNotMatchesRegexp?.forEach((v, i) => {\n      if (i === index) {\n        failIfBodyNotMatchesRegexp.push(event.target.value);\n      } else {\n        failIfBodyNotMatchesRegexp.push(v);\n      }\n    });\n    this.setState({ failIfBodyNotMatchesRegexp }, this.onUpdate);\n  };\n\n  onFailIfBodyNotMatchesRegexpDelete = (index: number) => () => {\n    let failIfBodyNotMatchesRegexp: string[] = [];\n    this.state.failIfBodyNotMatchesRegexp?.forEach((v, i) => {\n      if (i !== index) {\n        failIfBodyNotMatchesRegexp.push(v);\n      }\n    });\n    this.setState({ failIfBodyNotMatchesRegexp }, this.onUpdate);\n  };\n\n  addFailIfBodyNotMatchesRegexp = () => {\n    let failIfBodyNotMatchesRegexp: string[] = [];\n    for (const v of this.state.failIfBodyNotMatchesRegexp || []) {\n      failIfBodyNotMatchesRegexp.push(v);\n    }\n    failIfBodyNotMatchesRegexp.push('');\n    this.setState({ failIfBodyNotMatchesRegexp }, this.onUpdate);\n  };\n\n  onFailIfHeaderMatchesUpdate = (headerMatches: HeaderMatch[]) => {\n    let matches: HeaderMatch[] = [];\n    if (!this.state.failIfHeaderMatchesRegexp) {\n      matches = headerMatches;\n    } else {\n      headerMatches.forEach(v => {\n        matches.push(v);\n      });\n    }\n    console.log('setting failIfHeaderMatchesRegexp', matches);\n    this.setState({ failIfHeaderMatchesRegexp: matches }, this.onUpdate);\n  };\n\n  onFailIfHeaderNotMatchesUpdate = (headerMatches: HeaderMatch[]) => {\n    let matches: HeaderMatch[] = [];\n    if (!this.state.failIfHeaderNotMatchesRegexp) {\n      matches = headerMatches;\n    } else {\n      headerMatches.forEach(v => {\n        matches.push(v);\n      });\n    }\n    this.setState({ failIfHeaderNotMatchesRegexp: matches }, this.onUpdate);\n  };\n\n  generateValidStatusCodes() {\n    let validCodes = [];\n    for (let i = 100; i <= 102; i++) {\n      validCodes.push({\n        label: `${i}`,\n        value: i,\n      });\n    }\n    for (let i = 200; i <= 208; i++) {\n      validCodes.push({\n        label: `${i}`,\n        value: i,\n      });\n    }\n    for (let i = 300; i <= 308; i++) {\n      validCodes.push({\n        label: `${i}`,\n        value: i,\n      });\n    }\n    for (let i = 400; i <= 418; i++) {\n      validCodes.push({\n        label: `${i}`,\n        value: i,\n      });\n    }\n    validCodes.push({\n      label: '422',\n      value: 422,\n    });\n    validCodes.push({\n      label: '426',\n      value: 426,\n    });\n    validCodes.push({\n      label: '428',\n      value: 428,\n    });\n    validCodes.push({\n      label: '429',\n      value: 429,\n    });\n    validCodes.push({\n      label: '431',\n      value: 431,\n    });\n    for (let i = 500; i <= 511; i++) {\n      validCodes.push({\n        label: `${i}`,\n        value: i,\n      });\n    }\n    validCodes.push({\n      label: '598',\n      value: 598,\n    });\n    validCodes.push({\n      label: '599',\n      value: 599,\n    });\n    return validCodes;\n  }\n\n  render() {\n    const { state } = this;\n    const { isEditor } = this.props;\n\n    const httpVersionOptions = [\n      {\n        label: 'HTTP/1.0',\n        value: HttpVersion.HTTP1_0,\n      },\n      {\n        label: 'HTTP/1.1',\n        value: HttpVersion.HTTP1_1,\n      },\n      {\n        label: 'HTTP/2',\n        value: HttpVersion.HTTP2_0,\n      },\n    ];\n    const methodOptions = [\n      {\n        label: 'GET',\n        value: HttpMethod.GET,\n      },\n      {\n        label: 'HEAD',\n        value: HttpMethod.HEAD,\n      },\n      {\n        label: 'PUT',\n        value: HttpMethod.PUT,\n      },\n      {\n        label: 'POST',\n        value: HttpMethod.POST,\n      },\n      {\n        label: 'DELETE',\n        value: HttpMethod.DELETE,\n      },\n      {\n        label: 'OPTIONS',\n        value: HttpMethod.OPTIONS,\n      },\n    ];\n    const validStatusCodes = this.generateValidStatusCodes();\n\n    return (\n      <Container>\n        <HorizontalGroup>\n          <Field\n            label={<FormLabel name=\"Request Method\" help=\"The HTTP method the probe will use\" />}\n            disabled={!isEditor}\n          >\n            <Select value={state.method} options={methodOptions} onChange={this.onMethodChange} />\n          </Field>\n        </HorizontalGroup>\n        <Container>\n          <Field\n            label={<FormLabel name=\"Request Body\" help=\"The body of the HTTP request used in probe.\" />}\n            disabled={!isEditor}\n          >\n            <div>\n              <TextArea value={state.body} onChange={this.onBodyChange} rows={2} disabled={!isEditor} />\n            </div>\n          </Field>\n        </Container>\n        <Container>\n          <Field\n            label={<FormLabel name=\"Request Headers\" help=\"The HTTP headers set for the probe..\" />}\n            disabled={!isEditor}\n          >\n            <div>\n              <WorldpingLabelsForm\n                labels={this.headersToLabels()}\n                isEditor={isEditor}\n                onUpdate={this.onHeadersUpdate}\n                type=\"Header\"\n              />\n            </div>\n          </Field>\n        </Container>\n        <br />\n        <Collapse label=\"TLS Config\" collapsible={true} onToggle={this.onToggleTLS} isOpen={state.showTLS}>\n          <TLSForm onChange={this.onTLSChange} isEditor={isEditor} tlsConfig={state.tlsConfig} />\n        </Collapse>\n        <Collapse\n          label=\"Authentication\"\n          collapsible={true}\n          onToggle={this.onToggleAuthentication}\n          isOpen={state.showAuthentication}\n        >\n          <HorizontalGroup>\n            <Field\n              label={<FormLabel name=\"Bearer Token\" help=\"The bearer token for the target\" />}\n              disabled={!isEditor}\n            >\n              <Input\n                type=\"password\"\n                placeholder=\"Bearer Token\"\n                value={state.bearerToken}\n                onChange={this.onBearerTokenChange}\n                disabled={!isEditor}\n              />\n            </Field>\n          </HorizontalGroup>\n          <BasicAuthForm onChange={this.onBasicAuthChange} basicAuth={state.basicAuth} isEditor={isEditor} />\n        </Collapse>\n        <Collapse\n          label=\"Validation\"\n          collapsible={true}\n          onToggle={this.onToggleValidation}\n          isOpen={state.showValidation}\n        >\n          <HorizontalGroup>\n            <Field\n              label={\n                <FormLabel name=\"Valid Status Codes\" help=\"Accepted status codes for this probe. Defaults to 2xx.\" />\n              }\n              disabled={!isEditor}\n            >\n              <MultiSelect\n                options={validStatusCodes}\n                value={state.validStatusCodes}\n                onChange={this.onValidStatusCodeChange}\n                disabled={!isEditor}\n              />\n            </Field>\n            <Field\n              label={<FormLabel name=\"Valid HTTP Versions\" help=\"Accepted HTTP versions for this probe\" />}\n              disabled={!isEditor}\n            >\n              <MultiSelect\n                options={httpVersionOptions}\n                value={state.validHTTPVersions}\n                onChange={this.onValidHttpVersionsChange}\n                disabled={!isEditor}\n              />\n            </Field>\n\n            <Field label={<FormLabel name=\"Fail if SSL\" help=\"Probe fails if SSL is present\" />} disabled={!isEditor}>\n              <Container padding=\"sm\">\n                <Switch value={state.failIfSSL} onChange={this.onFailIfSSLChange} disabled={!isEditor} />\n              </Container>\n            </Field>\n            <Field\n              label={<FormLabel name=\"Fail if not SSL\" help=\"Probe fails if SSL is not present\" />}\n              disabled={!isEditor}\n            >\n              <Container padding=\"sm\">\n                <Switch value={state.failIfNotSSL} onChange={this.onFailIfNotSSLChange} disabled={!isEditor} />\n              </Container>\n            </Field>\n          </HorizontalGroup>\n\n          <Field\n            label={<FormLabel name=\"Fail if body matches regexp\" help=\"Probe fails if response body matches regex\" />}\n            disabled={!isEditor}\n          >\n            <VerticalGroup justify=\"space-between\">\n              <List\n                items={state.failIfBodyMatchesRegexp || []}\n                renderItem={(item, index) => (\n                  <HorizontalGroup>\n                    <Input\n                      type=\"text\"\n                      placeholder=\"regexp\"\n                      value={item}\n                      onChange={this.onFailIfBodyMatchesRegexpChange(index)}\n                      disabled={!isEditor}\n                    />\n                    <IconButton\n                      name=\"minus-circle\"\n                      onClick={this.onFailIfBodyMatchesRegexpDelete(index)}\n                      disabled={!isEditor}\n                    />\n                  </HorizontalGroup>\n                )}\n              />\n              <Button onClick={this.addFailIfBodyMatchesRegexp} disabled={!isEditor} variant=\"secondary\" size=\"sm\">\n                <Icon name=\"plus\" />\n                &nbsp; Add Body Regexp\n              </Button>\n            </VerticalGroup>\n          </Field>\n          <Field\n            label={\n              <FormLabel\n                name=\"Fail if body doesn't match regexp\"\n                help=\"Probe fails if response body does not match regex\"\n              />\n            }\n            disabled={!isEditor}\n          >\n            <VerticalGroup justify=\"space-between\">\n              <List\n                items={state.failIfBodyNotMatchesRegexp || []}\n                renderItem={(item, index) => (\n                  <HorizontalGroup>\n                    <Input\n                      type=\"text\"\n                      placeholder=\"regexp\"\n                      value={item}\n                      onChange={this.onFailIfBodyNotMatchesRegexpChange(index)}\n                      disabled={!isEditor}\n                    />\n                    <IconButton\n                      name=\"minus-circle\"\n                      onClick={this.onFailIfBodyNotMatchesRegexpDelete(index)}\n                      disabled={!isEditor}\n                    />\n                  </HorizontalGroup>\n                )}\n              />\n              <Button onClick={this.addFailIfBodyNotMatchesRegexp} disabled={!isEditor} variant=\"secondary\" size=\"sm\">\n                <Icon name=\"plus\" />\n                &nbsp; Add Body Regexp\n              </Button>\n            </VerticalGroup>\n          </Field>\n          <HeaderMatchForm\n            headerMatches={state.failIfHeaderMatchesRegexp || []}\n            name=\"Fail if header matches regexp\"\n            help=\"Probe fails if response header matches regex. For headers with multiple values, fails if *at least one* matches\"\n            onChange={this.onFailIfHeaderMatchesUpdate}\n            isEditor={isEditor}\n          />\n          <HeaderMatchForm\n            headerMatches={state.failIfHeaderNotMatchesRegexp || []}\n            name=\"Fail if header doesn't match regexp\"\n            help=\"Probe fails if response header does not match regex. For headers with multiple values, fails if *none* match.\"\n            onChange={this.onFailIfHeaderNotMatchesUpdate}\n            isEditor={isEditor}\n          />\n        </Collapse>\n        <Collapse\n          label=\"Advanced Options\"\n          collapsible={true}\n          onToggle={this.onToggleAdvanced}\n          isOpen={state.showAdvanced}\n        >\n          <HorizontalGroup>\n            <div>\n              <Field\n                label={<FormLabel name=\"IP Version\" help=\"The IP protocol of the HTTP request\" />}\n                disabled={!isEditor}\n              >\n                <Select value={state.ipVersion} options={IpOptions} onChange={this.onIpVersionChange} />\n              </Field>\n            </div>\n            <div>\n              <Field\n                label={<FormLabel name=\"Follow Redirects\" help=\"Whether or not the probe will follow any redirects.\" />}\n                disabled={!isEditor}\n              >\n                <Container padding=\"sm\">\n                  <Switch\n                    value={!state.noFollowRedirects}\n                    onChange={this.onNoFollowRedirectsChange}\n                    disabled={!isEditor}\n                  />\n                </Container>\n              </Field>\n            </div>\n          </HorizontalGroup>\n          <HorizontalGroup>\n            <div>\n              <Field\n                label={\n                  <FormLabel\n                    name=\"Cache busting query parameter name\"\n                    help=\"The name of the query parameter used to prevent the server from using a cached response. Each probe will assign a random value to this parameter each time a request is made.\"\n                  />\n                }\n              >\n                <Input\n                  type=\"string\"\n                  placeholder=\"cache-bust\"\n                  value={state.cacheBustingQueryParamName}\n                  onChange={this.onCacheBustingQueryParamNameChange}\n                  disabled={!isEditor}\n                />\n              </Field>\n            </div>\n          </HorizontalGroup>\n        </Collapse>\n      </Container>\n    );\n  }\n}\n\ninterface BasicAuthProps {\n  basicAuth?: BasicAuth;\n  isEditor: boolean;\n  onChange: (basicAuth: BasicAuth | undefined) => void;\n}\n\ninterface BasicAuthState {\n  username: string;\n  password: string;\n}\n\nexport class BasicAuthForm extends PureComponent<BasicAuthProps, BasicAuthState> {\n  state = {\n    username: this.props.basicAuth?.username || '',\n    password: this.props.basicAuth?.password || '',\n  };\n\n  onUpdate = () => {\n    if (!this.state.username && !this.state.password) {\n      this.props.onChange(undefined);\n      return;\n    }\n    const auth = {\n      username: this.state.username,\n      password: this.state.password,\n    };\n    this.props.onChange(auth);\n  };\n\n  onUsernameChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ username: event.target.value }, this.onUpdate);\n  };\n\n  onPasswordChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ password: event.target.value }, this.onUpdate);\n  };\n\n  render() {\n    const { username, password } = this.state;\n    const { isEditor } = this.props;\n\n    return (\n      <HorizontalGroup>\n        <Field label={<FormLabel name=\"Username\" help=\"Basic Authentication username\" />} disabled={!isEditor}>\n          <Input\n            type=\"text\"\n            placeholder=\"username\"\n            value={username}\n            onChange={this.onUsernameChange}\n            disabled={!isEditor}\n          />\n        </Field>\n        <Field label={<FormLabel name=\"Password\" help=\"Basic Authentication password\" />} disabled={!isEditor}>\n          <Input\n            type=\"password\"\n            placeholder=\"password\"\n            value={password}\n            onChange={this.onPasswordChange}\n            disabled={!isEditor}\n          />\n        </Field>\n      </HorizontalGroup>\n    );\n  }\n}\n\ninterface TLSProps {\n  tlsConfig?: TLSConfig;\n  isEditor: boolean;\n  onChange: (tlsConfig: TLSConfig) => void;\n}\n\ninterface TLSState {\n  insecureSkipVerify: boolean;\n  caCert: string;\n  clientCert: string;\n  clientKey: string;\n  serverName: string;\n}\n\nexport class TLSForm extends PureComponent<TLSProps, TLSState> {\n  state = {\n    insecureSkipVerify: this.props.tlsConfig?.insecureSkipVerify || false,\n    caCert: this.props.tlsConfig?.caCert || '',\n    clientCert: this.props.tlsConfig?.clientCert || '',\n    clientKey: this.props.tlsConfig?.clientKey || '',\n    serverName: this.props.tlsConfig?.serverName || '',\n  };\n\n  onUpdate = () => {\n    const cfg = {\n      insecureSkipVerify: this.state.insecureSkipVerify,\n      caCert: this.state.caCert,\n      clientCert: this.state.clientCert,\n      clientKey: this.state.clientKey,\n      serverName: this.state.serverName,\n    };\n    this.props.onChange(cfg);\n  };\n\n  onInsecureSkipVerifyChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ insecureSkipVerify: !this.state.insecureSkipVerify }, this.onUpdate);\n  };\n\n  onServerNameChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ serverName: event.target.value }, this.onUpdate);\n  };\n\n  onCACertChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    this.setState({ caCert: event.target.value }, this.onUpdate);\n  };\n  onClientCertChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    this.setState({ clientCert: event.target.value }, this.onUpdate);\n  };\n  onClientKeyChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    this.setState({ clientKey: event.target.value }, this.onUpdate);\n  };\n\n  render() {\n    const { insecureSkipVerify, caCert, clientCert, clientKey, serverName } = this.state;\n    const { isEditor } = this.props;\n\n    return (\n      <div>\n        <HorizontalGroup>\n          <Field\n            label={<FormLabel name=\"Skip Validation\" help=\"Disable target certificate validation\" />}\n            disabled={!isEditor}\n          >\n            <Container padding=\"sm\">\n              <Switch value={insecureSkipVerify} onChange={this.onInsecureSkipVerifyChange} disabled={!isEditor} />\n            </Container>\n          </Field>\n          <Field\n            label={<FormLabel name=\"Server Name\" help=\"Used to verify the hostname for the targets\" />}\n            disabled={!isEditor}\n          >\n            <Input\n              type=\"text\"\n              placeholder=\"ServerName\"\n              value={serverName}\n              onChange={this.onServerNameChange}\n              disabled={!isEditor}\n            />\n          </Field>\n        </HorizontalGroup>\n        <Container>\n          <Field\n            label={<FormLabel name=\"CA Certificate\" help=\"The CA cert to use for the targets\" />}\n            disabled={!isEditor}\n          >\n            <div>\n              <TextArea\n                value={caCert}\n                onChange={this.onCACertChange}\n                rows={2}\n                disabled={!isEditor}\n                placeholder=\"CA Certificate\"\n              />\n            </div>\n          </Field>\n        </Container>\n        <Container>\n          <Field\n            label={<FormLabel name=\"Client Certificate\" help=\"The client cert file for the targets\" />}\n            disabled={!isEditor}\n          >\n            <div>\n              <TextArea\n                value={clientCert}\n                onChange={this.onClientCertChange}\n                rows={2}\n                disabled={!isEditor}\n                placeholder=\"Client Certificate\"\n              />\n            </div>\n          </Field>\n        </Container>\n        <Container>\n          <Field\n            label={<FormLabel name=\"Client Key\" help=\"The client key file for the targets\" />}\n            disabled={!isEditor}\n          >\n            <div>\n              <TextArea\n                type=\"password\"\n                value={clientKey}\n                onChange={this.onClientKeyChange}\n                rows={2}\n                disabled={!isEditor}\n                placeholder=\"Client Key\"\n              />\n            </div>\n          </Field>\n        </Container>\n      </div>\n    );\n  }\n}\n\ninterface HeaderMatchProps {\n  headerMatches: HeaderMatch[];\n  name: string;\n  help: string;\n  isEditor: boolean;\n  onChange: (headerMatches: HeaderMatch[]) => void;\n}\n\ninterface HeaderMatchState {\n  headerMatches: HeaderMatch[];\n}\n\nexport class HeaderMatchForm extends PureComponent<HeaderMatchProps, HeaderMatchState> {\n  state = {\n    headerMatches: this.props.headerMatches,\n  };\n\n  onUpdate = () => {\n    this.props.onChange(this.state.headerMatches);\n  };\n\n  onHeaderChange = (index: number) => (event: React.ChangeEvent<HTMLInputElement>) => {\n    let matches: HeaderMatch[] = [];\n    this.state.headerMatches.forEach((v, i) => {\n      if (i === index) {\n        matches.push({\n          header: event.target.value,\n          regexp: v.regexp,\n          allowMissing: v.allowMissing,\n        });\n      } else {\n        matches.push(v);\n      }\n    });\n    this.setState({ headerMatches: matches }, this.onUpdate);\n  };\n\n  onRegexpChange = (index: number) => (event: React.ChangeEvent<HTMLInputElement>) => {\n    let matches: HeaderMatch[] = [];\n    this.state.headerMatches.forEach((v, i) => {\n      if (i === index) {\n        matches.push({\n          header: v.header,\n          regexp: event.target.value,\n          allowMissing: v.allowMissing,\n        });\n      } else {\n        matches.push(v);\n      }\n    });\n    this.setState({ headerMatches: matches }, this.onUpdate);\n  };\n\n  onAllowMissingChange = (index: number) => (event: React.ChangeEvent<HTMLInputElement>) => {\n    let matches: HeaderMatch[] = [];\n    this.state.headerMatches.forEach((v, i) => {\n      if (i === index) {\n        matches.push({\n          header: v.header,\n          regexp: v.regexp,\n          allowMissing: !v.allowMissing,\n        });\n      } else {\n        matches.push(v);\n      }\n    });\n    this.setState({ headerMatches: matches }, this.onUpdate);\n  };\n\n  onHeaderMatchesDelete = (index: number) => () => {\n    let matches: HeaderMatch[] = [];\n    this.state.headerMatches?.forEach((v, i) => {\n      if (i !== index) {\n        matches.push(v);\n      }\n    });\n    this.setState({ headerMatches: matches }, this.onUpdate);\n  };\n\n  onHeaderMatchesAdd = () => {\n    let matches: HeaderMatch[] = [];\n    this.state.headerMatches.forEach(v => {\n      matches.push(v);\n    });\n    matches.push({\n      header: '',\n      regexp: '',\n      allowMissing: false,\n    });\n    this.setState({ headerMatches: matches }, this.onUpdate);\n  };\n\n  render() {\n    const { headerMatches } = this.state;\n    const { isEditor, name, help } = this.props;\n\n    return (\n      <Field label={<FormLabel name={name} help={help} />} disabled={!isEditor}>\n        <VerticalGroup justify=\"space-between\">\n          <List\n            items={headerMatches}\n            renderItem={(item, index) => (\n              <HorizontalGroup>\n                <Input\n                  type=\"text\"\n                  placeholder=\"header\"\n                  value={item.header}\n                  onChange={this.onHeaderChange(index)}\n                  disabled={!isEditor}\n                />\n                <Input\n                  type=\"text\"\n                  placeholder=\"regexp\"\n                  value={item.regexp}\n                  onChange={this.onRegexpChange(index)}\n                  disabled={!isEditor}\n                />\n                <HorizontalGroup>\n                  <span>Allow Missing</span>\n                  <Container padding=\"sm\">\n                    <Switch\n                      title=\"Allow Missing\"\n                      value={item.allowMissing}\n                      onChange={this.onAllowMissingChange(index)}\n                      disabled={!isEditor}\n                    />\n                  </Container>\n                </HorizontalGroup>\n                <IconButton name=\"minus-circle\" onClick={this.onHeaderMatchesDelete(index)} disabled={!isEditor} />\n              </HorizontalGroup>\n            )}\n          />\n          <Button onClick={this.onHeaderMatchesAdd} disabled={!isEditor} variant=\"secondary\" size=\"sm\">\n            <Icon name=\"plus\" />\n            &nbsp; Add Header Regexp\n          </Button>\n        </VerticalGroup>\n      </Field>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport { Collapse, Container, HorizontalGroup, Field, Select, MultiSelect, Input, List, IconButton } from '@grafana/ui';\nimport { SelectableValue } from '@grafana/data';\nimport { IpVersion, Settings, DnsSettings, DnsProtocol, DnsRecordType, DNSRRValidator } from 'types';\nimport { FormLabel, IpOptions } from './utils';\n\ninterface Props {\n  settings: Settings;\n  isEditor: boolean;\n  onUpdate: (settings: Settings) => void;\n}\n\ninterface State extends DnsSettings {\n  showAdvanced: boolean;\n  showValidation: boolean;\n}\n\nexport class DnsSettingsForm extends PureComponent<Props, State> {\n  state: State = {\n    showValidation: false,\n    showAdvanced: false,\n    recordType: this.props.settings!.dns?.recordType || DnsRecordType.A,\n    server: this.props.settings!.dns?.server || '8.8.8.8',\n    ipVersion: this.props.settings!.dns?.ipVersion || IpVersion.V4,\n    protocol: this.props.settings!.dns?.protocol || DnsProtocol.UDP,\n    port: this.props.settings!.dns?.port || 53,\n\n    // validation\n    validRCodes: this.props.settings!.dns?.validRCodes || [],\n    validateAnswerRRS: this.props.settings!.dns?.validateAnswerRRS,\n    validateAuthorityRRS: this.props.settings!.dns?.validateAuthorityRRS,\n    validateAdditionalRRS: this.props.settings!.dns?.validateAdditionalRRS,\n  };\n\n  onUpdate = () => {\n    const settings = this.state as DnsSettings;\n    this.props.onUpdate({\n      dns: settings,\n    });\n  };\n\n  onIpVersionChange = (value: SelectableValue<IpVersion>) => {\n    this.setState({ ipVersion: value.value || IpVersion.Any }, this.onUpdate);\n  };\n\n  onProtocolChange = (value: SelectableValue<DnsProtocol>) => {\n    this.setState({ protocol: value.value || DnsProtocol.UDP }, this.onUpdate);\n  };\n\n  onPortChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ port: event.target.valueAsNumber || 53 }, this.onUpdate);\n  };\n\n  onServerChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ server: event.target.value }, this.onUpdate);\n  };\n\n  onRecordTypeChange = (value: SelectableValue<DnsRecordType>) => {\n    this.setState({ recordType: value.value || DnsRecordType.A }, this.onUpdate);\n  };\n\n  onShowAdvanced = (isOpen: boolean) => {\n    this.setState({ showAdvanced: !this.state.showAdvanced });\n  };\n\n  onShowValidation = (isOpen: boolean) => {\n    this.setState({ showValidation: !this.state.showValidation });\n  };\n\n  onValidRCodesChange = (item: Array<SelectableValue<string>>) => {\n    let validRCodes: string[] = [];\n    for (const p of item.values()) {\n      if (p.value) {\n        validRCodes.push(p.value);\n      }\n    }\n    this.setState({ validRCodes }, this.onUpdate);\n  };\n\n  onValidateAnswerChange = (validations: DNSRRValidator | undefined) => {\n    console.log('validateAnswer update.', validations);\n    if (!validations) {\n      this.setState({ validateAnswerRRS: undefined }, this.onUpdate);\n      return;\n    }\n    const validateAnswerRRS = {\n      failIfMatchesRegexp: validations.failIfMatchesRegexp,\n      failIfNotMatchesRegexp: validations.failIfNotMatchesRegexp,\n    };\n    this.setState({ validateAnswerRRS }, this.onUpdate);\n  };\n\n  onValidateAuthorityChange = (validations: DNSRRValidator | undefined) => {\n    if (!validations) {\n      this.setState({ validateAuthorityRRS: undefined }, this.onUpdate);\n      return;\n    }\n    const validateAuthorityRRS = {\n      failIfMatchesRegexp: validations.failIfMatchesRegexp,\n      failIfNotMatchesRegexp: validations.failIfNotMatchesRegexp,\n    };\n    this.setState({ validateAuthorityRRS }, this.onUpdate);\n  };\n\n  onValidateAdditionalChange = (validations: DNSRRValidator | undefined) => {\n    if (!validations) {\n      this.setState({ validateAdditionalRRS: undefined }, this.onUpdate);\n      return;\n    }\n    const validateAdditionalRRS = {\n      failIfMatchesRegexp: validations.failIfMatchesRegexp,\n      failIfNotMatchesRegexp: validations.failIfNotMatchesRegexp,\n    };\n    this.setState({ validateAdditionalRRS }, this.onUpdate);\n  };\n\n  render() {\n    const {\n      ipVersion,\n      recordType,\n      server,\n      port,\n      protocol,\n      showAdvanced,\n      showValidation,\n      validRCodes,\n      validateAnswerRRS,\n      validateAuthorityRRS,\n      validateAdditionalRRS,\n    } = this.state;\n    const { isEditor } = this.props;\n\n    const recordTypes = [\n      {\n        label: DnsRecordType.A,\n        value: DnsRecordType.A,\n      },\n      {\n        label: DnsRecordType.AAAA,\n        value: DnsRecordType.AAAA,\n      },\n      {\n        label: DnsRecordType.CNAME,\n        value: DnsRecordType.CNAME,\n      },\n      {\n        label: DnsRecordType.MX,\n        value: DnsRecordType.MX,\n      },\n      {\n        label: DnsRecordType.NS,\n        value: DnsRecordType.NS,\n      },\n      {\n        label: DnsRecordType.SOA,\n        value: DnsRecordType.SOA,\n      },\n      {\n        label: DnsRecordType.TXT,\n        value: DnsRecordType.TXT,\n      },\n      {\n        label: DnsRecordType.PTR,\n        value: DnsRecordType.PTR,\n      },\n      {\n        label: DnsRecordType.SRV,\n        value: DnsRecordType.SRV,\n      },\n    ];\n    const protocols = [\n      {\n        label: DnsProtocol.UDP,\n        value: DnsProtocol.UDP,\n      },\n      {\n        label: DnsProtocol.TCP,\n        value: DnsProtocol.TCP,\n      },\n    ];\n    const rCodes = [\n      {\n        label: 'NOERROR',\n        value: 'NOERROR',\n      },\n    ];\n    return (\n      <Container>\n        <HorizontalGroup>\n          <Field label={<FormLabel name=\"Record Type\" help=\"DNS record type to query for\" />} disabled={!isEditor}>\n            <Select value={recordType} options={recordTypes} onChange={this.onRecordTypeChange} />\n          </Field>\n          <Field label={<FormLabel name=\"Server\" help=\"Address of server to query\" />} disabled={!isEditor}>\n            <Input value={server} type=\"text\" placeholder=\"server\" onChange={this.onServerChange} />\n          </Field>\n          <Field label={<FormLabel name=\"Protocol\" help=\"Transport protocol to use\" />} disabled={!isEditor}>\n            <Select value={protocol} options={protocols} onChange={this.onProtocolChange} />\n          </Field>\n          <Field label={<FormLabel name=\"Port\" help=\"port on server to query\" />} disabled={!isEditor}>\n            <Input value={port} type=\"number\" placeholder=\"port\" onChange={this.onPortChange} />\n          </Field>\n        </HorizontalGroup>\n        <Collapse label=\"Validation\" collapsible={true} onToggle={this.onShowValidation} isOpen={showValidation}>\n          <HorizontalGroup>\n            <Field\n              label={<FormLabel name=\"Valid Response Codes\" help=\"List of valid response codes\" />}\n              disabled={!isEditor}\n            >\n              <MultiSelect value={validRCodes} options={rCodes} onChange={this.onValidRCodesChange} />\n            </Field>\n          </HorizontalGroup>\n          <DnsValidatorForm\n            name=\"Validate Answer\"\n            help=\"Validate entries in the Answer section of the DNS response\"\n            validations={validateAnswerRRS}\n            onChange={this.onValidateAnswerChange}\n            isEditor={isEditor}\n          />\n          <DnsValidatorForm\n            name=\"Validate Authority\"\n            help=\"Validate entries in the Authority section of the DNS response\"\n            validations={validateAuthorityRRS}\n            onChange={this.onValidateAuthorityChange}\n            isEditor={isEditor}\n          />\n          <DnsValidatorForm\n            name=\"Validate Additional\"\n            help=\"Validate entries in the Additional section of the DNS response\"\n            validations={validateAdditionalRRS}\n            onChange={this.onValidateAdditionalChange}\n            isEditor={isEditor}\n          />\n        </Collapse>\n        <Collapse label=\"Advanced Options\" collapsible={true} onToggle={this.onShowAdvanced} isOpen={showAdvanced}>\n          <HorizontalGroup>\n            <div>\n              <Field\n                label={<FormLabel name=\"IP Version\" help=\"The IP protocol of the ICMP request\" />}\n                disabled={!isEditor}\n              >\n                <Select value={ipVersion} options={IpOptions} onChange={this.onIpVersionChange} />\n              </Field>\n            </div>\n          </HorizontalGroup>\n        </Collapse>\n      </Container>\n    );\n  }\n}\n\ninterface DnsValidatorProps {\n  validations: DNSRRValidator | undefined;\n  name: string;\n  help: string;\n  isEditor: boolean;\n  onChange: (validations: DNSRRValidator | undefined) => void;\n}\n\ninterface DnsValidatorState extends DNSRRValidator {}\n\nexport class DnsValidatorForm extends PureComponent<DnsValidatorProps, DnsValidatorState> {\n  state = {\n    failIfMatchesRegexp: this.props.validations?.failIfMatchesRegexp || [],\n    failIfNotMatchesRegexp: this.props.validations?.failIfNotMatchesRegexp || [],\n  };\n\n  onUpdate = () => {\n    const validations: DNSRRValidator = {\n      failIfMatchesRegexp: this.state.failIfMatchesRegexp,\n      failIfNotMatchesRegexp: this.state.failIfNotMatchesRegexp,\n    };\n    this.props.onChange(validations);\n  };\n\n  onFailIfMatchesRegexpChange = (index: number) => (event: React.ChangeEvent<HTMLInputElement>) => {\n    let failIfMatchesRegexp: string[] = [];\n    this.state.failIfMatchesRegexp.forEach((v, i) => {\n      if (i === index) {\n        failIfMatchesRegexp.push(event.target.value);\n      } else {\n        failIfMatchesRegexp.push(v);\n      }\n    });\n    this.setState({ failIfMatchesRegexp }, this.onUpdate);\n  };\n\n  onFailIfNotMatchesRegexpChange = (index: number) => (event: React.ChangeEvent<HTMLInputElement>) => {\n    let failIfNotMatchesRegexp: string[] = [];\n    this.state.failIfNotMatchesRegexp.forEach((v, i) => {\n      if (i === index) {\n        failIfNotMatchesRegexp.push(event.target.value);\n      } else {\n        failIfNotMatchesRegexp.push(v);\n      }\n    });\n    this.setState({ failIfNotMatchesRegexp }, this.onUpdate);\n  };\n\n  onFailIfMatchesRegexpDelete = (index: number) => () => {\n    let failIfMatchesRegexp: string[] = [];\n    this.state.failIfMatchesRegexp?.forEach((v, i) => {\n      if (i !== index) {\n        failIfMatchesRegexp.push(v);\n      }\n    });\n    this.setState({ failIfMatchesRegexp }, this.onUpdate);\n  };\n\n  onFailIfNotMatchesRegexpDelete = (index: number) => () => {\n    let failIfNotMatchesRegexp: string[] = [];\n    this.state.failIfNotMatchesRegexp?.forEach((v, i) => {\n      if (i !== index) {\n        failIfNotMatchesRegexp.push(v);\n      }\n    });\n    this.setState({ failIfNotMatchesRegexp }, this.onUpdate);\n  };\n\n  onFailIfMatchesRegexpAdd = () => {\n    let failIfMatchesRegexp: string[] = [];\n    this.state.failIfMatchesRegexp.forEach(v => {\n      failIfMatchesRegexp.push(v);\n    });\n    failIfMatchesRegexp.push('');\n    this.setState({ failIfMatchesRegexp }, this.onUpdate);\n  };\n\n  onFailIfNotMatchesRegexpAdd = () => {\n    let failIfNotMatchesRegexp: string[] = [];\n    this.state.failIfNotMatchesRegexp.forEach(v => {\n      failIfNotMatchesRegexp.push(v);\n    });\n    failIfNotMatchesRegexp.push('');\n    this.setState({ failIfNotMatchesRegexp }, this.onUpdate);\n  };\n\n  render() {\n    const { failIfMatchesRegexp, failIfNotMatchesRegexp } = this.state;\n    const { isEditor, name, help } = this.props;\n\n    return (\n      <Container>\n        <HorizontalGroup>\n          <Field label={<FormLabel name={name + ' matches'} help={help + ' match'} />} disabled={!isEditor}>\n            <Container>\n              <List\n                items={failIfMatchesRegexp}\n                renderItem={(item, index) => (\n                  <HorizontalGroup>\n                    <Input\n                      type=\"text\"\n                      placeholder=\"regexp\"\n                      value={item}\n                      onChange={this.onFailIfMatchesRegexpChange(index)}\n                      disabled={!isEditor}\n                    />\n                    <IconButton\n                      name=\"minus-circle\"\n                      onClick={this.onFailIfMatchesRegexpDelete(index)}\n                      disabled={!isEditor}\n                    />\n                  </HorizontalGroup>\n                )}\n              />\n              <IconButton name=\"plus-circle\" onClick={this.onFailIfMatchesRegexpAdd} disabled={!isEditor} />\n            </Container>\n          </Field>\n          <Field label={<FormLabel name={name + \" doesn't match\"} help={help + \" don't match\"} />} disabled={!isEditor}>\n            <Container>\n              <List\n                items={failIfNotMatchesRegexp}\n                renderItem={(item, index) => (\n                  <HorizontalGroup>\n                    <Input\n                      type=\"text\"\n                      placeholder=\"regexp\"\n                      value={item}\n                      onChange={this.onFailIfNotMatchesRegexpChange(index)}\n                      disabled={!isEditor}\n                    />\n                    <IconButton\n                      name=\"minus-circle\"\n                      onClick={this.onFailIfNotMatchesRegexpDelete(index)}\n                      disabled={!isEditor}\n                    />\n                  </HorizontalGroup>\n                )}\n              />\n              <IconButton name=\"plus-circle\" onClick={this.onFailIfNotMatchesRegexpAdd} disabled={!isEditor} />\n            </Container>\n          </Field>\n        </HorizontalGroup>\n      </Container>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport {\n  Collapse,\n  Container,\n  HorizontalGroup,\n  Field,\n  Select,\n  IconButton,\n  List,\n  Input,\n  Switch,\n  TextArea,\n} from '@grafana/ui';\nimport { SelectableValue } from '@grafana/data';\nimport { IpVersion, Settings, TcpSettings, TLSConfig, TCPQueryResponse } from 'types';\nimport { FormLabel, IpOptions } from './utils';\nimport { TLSForm } from './HttpSettings';\n\ninterface Props {\n  settings: Settings;\n  isEditor: boolean;\n  onUpdate: (settings: Settings) => void;\n}\n\ninterface State extends TcpSettings {\n  showQueryResponse: boolean;\n  showAdvanced: boolean;\n  showTLS: boolean;\n}\n/*\nipVersion: IpVersion;\ntls: boolean;\ntlsConfig?: TLSConfig;\nqueryResponse?: TCPQueryResponse[];\n*/\nexport class TcpSettingsForm extends PureComponent<Props, State> {\n  state: State = {\n    ipVersion: this.props.settings!.tcp?.ipVersion || IpVersion.V4,\n    tls: this.props.settings!.tcp?.tls || false,\n    tlsConfig: this.props.settings!.tcp?.tlsConfig,\n    queryResponse: this.props.settings!.tcp?.queryResponse,\n    showQueryResponse: false,\n    showAdvanced: false,\n    showTLS: false,\n  };\n\n  onUpdate = () => {\n    const settings = this.state as TcpSettings;\n    this.props.onUpdate({\n      tcp: settings,\n    });\n  };\n\n  onIpVersionChange = (value: SelectableValue<IpVersion>) => {\n    this.setState({ ipVersion: value.value || IpVersion.Any }, this.onUpdate);\n  };\n\n  onToggleTLS = (isOpen: boolean) => {\n    this.setState({ showTLS: !this.state.showTLS }, this.onUpdate);\n  };\n\n  onTLSChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ tls: !this.state.tls }, this.onUpdate);\n  };\n\n  onTLSCOnfigChange = (tlsConfig: TLSConfig) => {\n    this.setState({ tlsConfig: tlsConfig }, this.onUpdate);\n  };\n\n  onShowAdvanced = (isOpen: boolean) => {\n    this.setState({ showAdvanced: !this.state.showAdvanced });\n  };\n\n  onShowQueryResponse = (isOpen: boolean) => {\n    this.setState({ showQueryResponse: !this.state.showQueryResponse });\n  };\n\n  onQueryResponsesUpdate = (queryResponse: TCPQueryResponse[]) => {\n    let config: TCPQueryResponse[] = [];\n    if (!this.state.queryResponse) {\n      config = queryResponse;\n    } else {\n      queryResponse.forEach(v => {\n        config.push(v);\n      });\n    }\n\n    this.setState({ queryResponse: config }, this.onUpdate);\n  };\n\n  render() {\n    const { ipVersion, tls, showTLS, showQueryResponse, showAdvanced, tlsConfig, queryResponse } = this.state;\n    const { isEditor } = this.props;\n\n    return (\n      <Container>\n        <Field\n          label={<FormLabel name=\"Use TLS\" help=\"Whether or not TLS is used when the connection is initiated.\" />}\n          disabled={!isEditor}\n        >\n          <Container padding=\"sm\">\n            <Switch title=\"Use TLS\" value={tls} onChange={this.onTLSChange} disabled={!isEditor} />\n          </Container>\n        </Field>\n        <Collapse\n          label=\"Query/Response\"\n          collapsible={true}\n          onToggle={this.onShowQueryResponse}\n          isOpen={showQueryResponse}\n        >\n          <Container>\n            <QueryResponseForm\n              queryResponses={queryResponse}\n              isEditor={isEditor}\n              onChange={this.onQueryResponsesUpdate}\n            />\n          </Container>\n        </Collapse>\n        <Collapse label=\"TLS Config\" collapsible={true} onToggle={this.onToggleTLS} isOpen={showTLS}>\n          <TLSForm onChange={this.onTLSCOnfigChange} isEditor={isEditor} tlsConfig={tlsConfig} />\n        </Collapse>\n        <Collapse label=\"Advanced Options\" collapsible={true} onToggle={this.onShowAdvanced} isOpen={showAdvanced}>\n          <HorizontalGroup>\n            <div>\n              <Field\n                label={<FormLabel name=\"IP Version\" help=\"The IP protocol of the ICMP request\" />}\n                disabled={!isEditor}\n              >\n                <Select value={ipVersion} options={IpOptions} onChange={this.onIpVersionChange} />\n              </Field>\n            </div>\n          </HorizontalGroup>\n        </Collapse>\n      </Container>\n    );\n  }\n}\n\ninterface RawQueryResponse {\n  send: string;\n  expect: string;\n  startTLS: boolean;\n}\n\ninterface QueryResponseProps {\n  queryResponses?: TCPQueryResponse[];\n  isEditor: boolean;\n  onChange: (queryResponses: TCPQueryResponse[]) => void;\n}\n\ninterface QueryResponseState {\n  queryResponses: RawQueryResponse[];\n}\n\nexport class QueryResponseForm extends PureComponent<QueryResponseProps, QueryResponseState> {\n  state = {\n    queryResponses: (this.props.queryResponses || []).map(v => {\n      return {\n        expect: atob(v.expect),\n        send: atob(v.send),\n        startTLS: v.startTLS,\n      };\n    }),\n  };\n\n  onUpdate = () => {\n    let queryResponses: TCPQueryResponse[] = [];\n    this.state.queryResponses.forEach(v => {\n      queryResponses.push({\n        expect: btoa(v.expect),\n        send: btoa(v.send),\n        startTLS: v.startTLS,\n      });\n    });\n    this.props.onChange(queryResponses);\n  };\n\n  onSendChange = (index: number) => (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    let queryResponses: TCPQueryResponse[] = [];\n    this.state.queryResponses.forEach((v, i) => {\n      if (i === index) {\n        queryResponses.push({\n          send: event.target.value,\n          expect: v.expect,\n          startTLS: v.startTLS,\n        });\n      } else {\n        queryResponses.push(v);\n      }\n    });\n    this.setState({ queryResponses }, this.onUpdate);\n  };\n\n  onExpectChange = (index: number) => (event: React.ChangeEvent<HTMLInputElement>) => {\n    let queryResponses: TCPQueryResponse[] = [];\n    this.state.queryResponses.forEach((v, i) => {\n      if (i === index) {\n        queryResponses.push({\n          send: v.send,\n          expect: event.target.value,\n          startTLS: v.startTLS,\n        });\n      } else {\n        queryResponses.push(v);\n      }\n    });\n    this.setState({ queryResponses }, this.onUpdate);\n  };\n\n  onStartTLSChange = (index: number) => (event: React.ChangeEvent<HTMLInputElement>) => {\n    let queryResponses: TCPQueryResponse[] = [];\n    this.state.queryResponses.forEach((v, i) => {\n      if (i === index) {\n        queryResponses.push({\n          send: v.send,\n          expect: v.expect,\n          startTLS: !v.startTLS,\n        });\n      } else {\n        queryResponses.push(v);\n      }\n    });\n    this.setState({ queryResponses }, this.onUpdate);\n  };\n\n  onQueryResponseDelete = (index: number) => () => {\n    let queryResponses: TCPQueryResponse[] = [];\n    this.state.queryResponses.forEach((v, i) => {\n      if (i !== index) {\n        queryResponses.push(v);\n      }\n    });\n    this.setState({ queryResponses }, this.onUpdate);\n  };\n\n  onQueryResponseAdd = () => {\n    let queryResponses: TCPQueryResponse[] = [];\n    this.state.queryResponses.forEach(v => {\n      queryResponses.push(v);\n    });\n    queryResponses.push({\n      send: '',\n      expect: '',\n      startTLS: false,\n    });\n    this.setState({ queryResponses }, this.onUpdate);\n  };\n\n  render() {\n    const { queryResponses } = this.state;\n    const { isEditor } = this.props;\n\n    return (\n      <Field\n        label={\n          <FormLabel\n            name=\"Query/Response\"\n            help=\"The query sent in the TCP probe and the expected associated response. StartTLS upgrades TCP connection to TLS.\"\n          />\n        }\n        disabled={!isEditor}\n      >\n        <Container>\n          <List\n            items={queryResponses}\n            renderItem={(item, index) => (\n              <HorizontalGroup>\n                <Input\n                  type=\"text\"\n                  placeholder=\"response to expect\"\n                  value={item.expect}\n                  onChange={this.onExpectChange(index)}\n                  disabled={!isEditor}\n                />\n                <TextArea\n                  type=\"text\"\n                  placeholder=\"data to send\"\n                  rows={1}\n                  value={item.send}\n                  onChange={this.onSendChange(index)}\n                  disabled={!isEditor}\n                />\n                <HorizontalGroup>\n                  <span>StartTLS</span>\n                  <Container padding=\"sm\">\n                    <Switch\n                      title=\"StartTLS\"\n                      value={item.startTLS}\n                      onChange={this.onStartTLSChange(index)}\n                      disabled={!isEditor}\n                    />\n                  </Container>\n                </HorizontalGroup>\n                <IconButton name=\"minus-circle\" onClick={this.onQueryResponseDelete(index)} disabled={!isEditor} />\n              </HorizontalGroup>\n            )}\n          />\n          <IconButton name=\"plus-circle\" onClick={this.onQueryResponseAdd} disabled={!isEditor} />\n        </Container>\n      </Field>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport {\n  Button,\n  Container,\n  ConfirmModal,\n  Field,\n  Input,\n  HorizontalGroup,\n  Switch,\n  MultiSelect,\n  Select,\n  Legend,\n  VerticalGroup,\n} from '@grafana/ui';\nimport { SelectableValue } from '@grafana/data';\nimport { Check, Label as WorldpingLabel, Settings, CheckType, Probe, OrgRole } from 'types';\nimport { WorldPingDataSource } from 'datasource/DataSource';\nimport { hasRole, checkType, defaultSettings } from 'utils';\nimport { PingSettingsForm } from './PingSettings';\nimport { HttpSettingsForm } from './HttpSettings';\nimport { DnsSettingsForm } from './DnsSettings';\nimport { TcpSettingsForm } from './TcpSettings';\nimport { FormLabel, WorldpingLabelsForm } from './utils';\nimport * as Validation from 'validation';\n\ninterface TargetHelpInfo {\n  text?: string;\n  example: string;\n}\n\ninterface Props {\n  check: Check;\n  instance: WorldPingDataSource;\n  onReturn: (reload: boolean) => void;\n}\n\ninterface State {\n  check?: Check;\n  typeOfCheck?: CheckType;\n  probes: Probe[];\n  showDeleteModal: boolean;\n  targetHelp: TargetHelpInfo;\n}\n\nexport class CheckEditor extends PureComponent<Props, State> {\n  state: State = {\n    showDeleteModal: false,\n    probes: [],\n    targetHelp: {\n      example: '',\n    },\n  };\n\n  async componentDidMount() {\n    const { instance } = this.props;\n    const check = { ...this.props.check } as Check;\n    const probes = await instance.listProbes();\n    const typeOfCheck = checkType(check.settings);\n    const targetHelp = this.targetHelpText(typeOfCheck);\n    this.setState({\n      check,\n      typeOfCheck,\n      probes,\n      targetHelp,\n    });\n  }\n\n  showDeleteCheckModal = (show: boolean) => () => {\n    this.setState({ showDeleteModal: show });\n  };\n\n  onRemoveCheck = async () => {\n    const id = this.props.check.id || 0;\n    if (!this.props.check.id) {\n      return;\n    }\n    const info = this.props.instance.deleteCheck(id);\n    console.log('Remove Check', id, info);\n    this.props.onReturn(true);\n  };\n\n  onLabelsUpdate = (labels: WorldpingLabel[]) => {\n    let check = { ...this.state.check } as Check;\n    check.labels = labels;\n    this.setState({ check });\n  };\n\n  onProbesUpdate = (probes: number[]) => {\n    let check = this.state.check;\n    if (!check) {\n      return;\n    }\n    check.probes = probes;\n    this.setState({ check });\n  };\n\n  onSettingsUpdate = (settings: Settings) => {\n    let check = this.state.check;\n    if (!check) {\n      return;\n    }\n    check.settings = settings;\n    this.setState({ check });\n  };\n\n  onSetType = (type: SelectableValue<CheckType>) => {\n    let check = { ...this.state.check } as Check;\n    if (!type.value) {\n      return;\n    }\n    const typeOfCheck = type.value;\n    const settings = defaultSettings(typeOfCheck);\n    if (!settings) {\n      return;\n    }\n    check.settings = settings;\n\n    const targetHelp = this.targetHelpText(typeOfCheck);\n    this.setState({ check, targetHelp, typeOfCheck });\n  };\n\n  onJobUpdate = (event: React.ChangeEvent<HTMLInputElement>) => {\n    let check = { ...this.state.check } as Check;\n    check.job = event.target.value;\n    this.setState({ check });\n  };\n\n  onTargetUpdate = (event: React.ChangeEvent<HTMLInputElement>) => {\n    let check = { ...this.state.check } as Check;\n    check.target = event.target.value;\n    this.setState({ check });\n  };\n\n  onFrequencyUpdate = (event: React.ChangeEvent<HTMLInputElement>) => {\n    let check = { ...this.state.check } as Check;\n    check.frequency = event.target.valueAsNumber * 1000;\n    this.setState({ check });\n  };\n\n  onTimeoutUpdate = (event: React.ChangeEvent<HTMLInputElement>) => {\n    let check = { ...this.state.check } as Check;\n    check.timeout = event.target.valueAsNumber * 1000;\n    this.setState({ check });\n  };\n\n  onSave = async () => {\n    const { instance } = this.props;\n    const { check } = this.state;\n    if (!check) {\n      return;\n    }\n    if (check.id) {\n      console.log('UPDATE', check, instance);\n      const info = await instance.updateCheck(check);\n      console.log('got', info);\n    } else {\n      console.log('ADD', check);\n      const info = await instance.addCheck(check);\n      console.log('got', info);\n    }\n    this.props.onReturn(true);\n  };\n\n  onEnableChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    let check = { ...this.state.check } as Check;\n    check.enabled = !check.enabled;\n    this.setState({ check });\n  };\n\n  onBack = () => {\n    this.props.onReturn(false);\n  };\n\n  targetHelpText(typeOfCheck: CheckType | undefined): TargetHelpInfo {\n    if (!typeOfCheck) {\n      return { text: '', example: '' };\n    }\n    let resp: TargetHelpInfo;\n    switch (typeOfCheck) {\n      case CheckType.HTTP: {\n        resp = {\n          text: 'full url of endpoint to probe',\n          example: 'https://grafana.com/',\n        };\n        break;\n      }\n      case CheckType.PING: {\n        resp = {\n          text: 'hostname of endpoint to ping',\n          example: 'grafana.com',\n        };\n        break;\n      }\n      case CheckType.DNS: {\n        resp = {\n          text: 'name of record to query',\n          example: 'grafana.com',\n        };\n        break;\n      }\n      case CheckType.TCP: {\n        resp = {\n          text: 'host:port to connect to',\n          example: 'grafana.com:80',\n        };\n        break;\n      }\n    }\n    return resp;\n  }\n\n  render() {\n    const { check, showDeleteModal, probes, targetHelp, typeOfCheck } = this.state;\n    if (!check || probes.length === 0) {\n      return <div>Loading...</div>;\n    }\n\n    let legend = 'Edit Check';\n    if (!check.id) {\n      legend = 'Add Check';\n    }\n\n    let isEditor = hasRole(OrgRole.EDITOR);\n\n    const checkTypes = [\n      {\n        label: 'HTTP',\n        value: CheckType.HTTP,\n      },\n      {\n        label: 'PING',\n        value: CheckType.PING,\n      },\n      {\n        label: 'DNS',\n        value: CheckType.DNS,\n      },\n      {\n        label: 'TCP',\n        value: CheckType.TCP,\n      },\n    ];\n\n    return (\n      <Container>\n        <Legend>{legend}</Legend>\n        <VerticalGroup>\n          <HorizontalGroup>\n            <Field label={<FormLabel name=\"Check Type\" />} disabled={check.id ? true : false} required={true}>\n              <Select value={typeOfCheck} options={checkTypes} onChange={this.onSetType} />\n            </Field>\n            <Field\n              label={\n                <FormLabel\n                  name=\"Job Name\"\n                  help=\"job name to assign to this check. 'Job name + target' must be unique.\"\n                />\n              }\n              disabled={!isEditor}\n              invalid={!Validation.validateJob(check.job)}\n            >\n              <Input type=\"string\" placeholder=\"job\" value={check.job} onChange={this.onJobUpdate} required={true} />\n            </Field>\n            <Field\n              label={<FormLabel name=\"Target\" help={targetHelp.text} />}\n              disabled={!isEditor}\n              invalid={!Validation.validateTarget(check.target)}\n            >\n              <Input\n                type=\"string\"\n                placeholder={targetHelp.example}\n                value={check.target}\n                onChange={this.onTargetUpdate}\n                width={60}\n                required={true}\n              />\n            </Field>\n            <Field label={<FormLabel name=\"Enabled\" help=\"whether this check should run.\" />} disabled={!isEditor}>\n              <Container padding=\"sm\">\n                <Switch value={check.enabled} onChange={this.onEnableChange} disabled={!isEditor} />\n              </Container>\n            </Field>\n          </HorizontalGroup>\n          <HorizontalGroup>\n            <Field\n              label={<FormLabel name=\"Frequency\" help=\"How frequently the check will run.\" />}\n              disabled={!isEditor}\n              invalid={!Validation.validateFrequency(check.frequency)}\n            >\n              <Input\n                label=\"Frequency\"\n                type=\"number\"\n                step={10}\n                placeholder=\"60\"\n                value={check!.frequency / 1000 || 60}\n                onChange={this.onFrequencyUpdate}\n                suffix=\"seconds\"\n                max={120}\n                min={10}\n              />\n            </Field>\n            <Field\n              label={<FormLabel name=\"Timeout\" help=\"maximum execution time for a check\" />}\n              disabled={!isEditor}\n              invalid={!Validation.validateTimeout(check.timeout)}\n            >\n              <Input\n                label=\"Timeout\"\n                type=\"number\"\n                step={0.1}\n                placeholder=\"5\"\n                value={check!.timeout / 1000 || 5}\n                onChange={this.onTimeoutUpdate}\n                suffix=\"seconds\"\n                max={10}\n                min={1}\n              />\n            </Field>\n          </HorizontalGroup>\n\n          <Field\n            label={\n              <FormLabel\n                name=\"Probe Locations\"\n                help=\"select the locations where this target should be monitored from.\"\n              />\n            }\n            disabled={!isEditor}\n            invalid={!Validation.validateProbes(check.probes)}\n          >\n            <CheckProbes\n              probes={check.probes}\n              availableProbes={probes}\n              onUpdate={this.onProbesUpdate}\n              isEditor={isEditor}\n            />\n          </Field>\n\n          <Field\n            label={<FormLabel name=\"Labels\" help=\"add custom labels to be included with collected metrics and logs.\" />}\n            disabled={!isEditor}\n            invalid={!Validation.validateLabels(check.labels)}\n          >\n            <WorldpingLabelsForm\n              labels={check.labels}\n              onUpdate={this.onLabelsUpdate}\n              isEditor={isEditor}\n              type=\"Label\"\n            />\n          </Field>\n        </VerticalGroup>\n        <Container>\n          <br />\n          <h3 className=\"page-heading\">{typeOfCheck!.toLocaleUpperCase()} Settings</h3>\n          <CheckSettings\n            settings={check.settings}\n            typeOfCheck={typeOfCheck || CheckType.HTTP}\n            onUpdate={this.onSettingsUpdate}\n            isEditor={isEditor}\n          />\n\n          <HorizontalGroup>\n            <Button onClick={this.onSave} disabled={!isEditor || !Validation.validateCheck(check)}>\n              Save\n            </Button>\n            {check.id && (\n              <Button variant=\"destructive\" onClick={this.showDeleteCheckModal(true)} disabled={!isEditor}>\n                Delete Check\n              </Button>\n            )}\n            <ConfirmModal\n              isOpen={showDeleteModal}\n              title=\"Delete check\"\n              body=\"Are you sure you want to delete this check?\"\n              confirmText=\"Delete check\"\n              onConfirm={this.onRemoveCheck}\n              onDismiss={this.showDeleteCheckModal(false)}\n            />\n            <a onClick={this.onBack}>Back</a>\n          </HorizontalGroup>\n        </Container>\n      </Container>\n    );\n  }\n}\n\ninterface CheckSettingsProps {\n  isEditor: boolean;\n  settings: Settings;\n  typeOfCheck: CheckType;\n  onUpdate: (settings: Settings) => void;\n}\n\ninterface CheckSettingsState {\n  settings?: Settings;\n}\n\nexport class CheckSettings extends PureComponent<CheckSettingsProps, CheckSettingsState> {\n  state: CheckSettingsState = {};\n\n  componentDidMount() {\n    const { settings } = this.props;\n    this.setState({ settings });\n  }\n\n  componentDidUpdate(oldProps: CheckSettingsProps) {\n    const { settings, typeOfCheck } = this.props;\n    if (typeOfCheck !== oldProps.typeOfCheck) {\n      this.setState({ settings });\n    }\n  }\n\n  onUpdate = () => {\n    this.props.onUpdate(this.state.settings!);\n  };\n\n  onJsonChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    let settings: Settings = {};\n    settings[this.props.typeOfCheck] = JSON.parse(event.target.value);\n    this.setState({ settings: settings }, this.onUpdate);\n  };\n\n  onSettingsChange = (settings: Settings) => {\n    this.setState({ settings: settings }, this.onUpdate);\n  };\n\n  render() {\n    const { settings } = this.state;\n    if (!settings) {\n      return <div>Loading....</div>;\n    }\n    const { isEditor } = this.props;\n\n    switch (this.props.typeOfCheck) {\n      case CheckType.PING: {\n        return <PingSettingsForm settings={settings} onUpdate={this.onSettingsChange} isEditor={isEditor} />;\n      }\n      case CheckType.HTTP: {\n        return <HttpSettingsForm settings={settings} onUpdate={this.onSettingsChange} isEditor={isEditor} />;\n      }\n      case CheckType.DNS: {\n        return <DnsSettingsForm settings={settings} onUpdate={this.onSettingsChange} isEditor={isEditor} />;\n      }\n      case CheckType.TCP: {\n        return <TcpSettingsForm settings={settings} onUpdate={this.onSettingsChange} isEditor={isEditor} />;\n      }\n    }\n  }\n}\n\ninterface CheckProbesProps {\n  probes: number[];\n  availableProbes: Probe[];\n  isEditor: boolean;\n  onUpdate: (probes: number[]) => void;\n}\n\ninterface CheckProbesState {\n  probes: number[];\n  probeStr: string;\n}\n\nexport class CheckProbes extends PureComponent<CheckProbesProps, CheckProbesState> {\n  state = {\n    probes: this.props.probes || [],\n    probeStr: this.props.probes.join(','),\n  };\n\n  onChange = (item: Array<SelectableValue<number>>) => {\n    let probes: number[] = [];\n    for (const p of item.values()) {\n      if (p.value) {\n        probes.push(p.value);\n      }\n    }\n    console.log('probes updated to:', probes);\n\n    const str = probes.join(',');\n    this.setState({ probes: probes, probeStr: str }, this.onUpdate);\n  };\n\n  onUpdate = () => {\n    this.props.onUpdate(this.state.probes);\n  };\n\n  render() {\n    const { probes } = this.state;\n    const { availableProbes, isEditor } = this.props;\n    let options = [];\n    for (const p of availableProbes) {\n      options.push({\n        label: p.name,\n        value: p.id,\n        labels: p.labels,\n        online: p.online,\n      });\n    }\n    let selectedProbes = [];\n    for (const p of probes) {\n      let existing = options.find(item => item.value === p);\n      if (existing) {\n        selectedProbes.push(existing);\n      }\n    }\n\n    return (\n      <div>\n        <MultiSelect\n          options={options}\n          value={selectedProbes}\n          onChange={this.onChange}\n          disabled={!isEditor}\n          invalid={!Validation.validateProbes(probes)}\n        />\n      </div>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport { BigValueColorMode, BigValueGraphMode, BigValue, Container, IconName, Icon } from '@grafana/ui';\nimport { DataSourceInstanceSettings, GraphSeriesValue, DisplayValue } from '@grafana/data';\nimport { config, getBackendSrv } from '@grafana/runtime';\nimport { Check } from 'types';\n\ninterface Props {\n  ds: DataSourceInstanceSettings;\n  labelNames: string[];\n  labelValues: string[];\n  height: number;\n  width: number;\n  sparkline: boolean;\n  onClick?: (event: React.MouseEvent<HTMLElement, MouseEvent>) => void;\n}\n\ninterface State {\n  filter?: string;\n  value: DisplayValue;\n  points: GraphSeriesValue[][];\n  lastUpdate: number;\n}\n\nexport class UptimeGauge extends PureComponent<Props, State> {\n  state: State = {\n    lastUpdate: 0,\n    value: {\n      numeric: 0,\n      title: 'Uptime',\n      text: 'loading...',\n    },\n    points: [],\n  };\n\n  async componentDidMount() {\n    const { labelNames, labelValues } = this.props;\n    let filters: string[] = [];\n    for (let i in labelNames) {\n      const k = labelNames[i];\n      const v = labelValues[i];\n      filters.push(`${k}=\"${v}\"`);\n    }\n    const filter = filters.join(',');\n    this.setState({ filter }, this.queryUptime);\n  }\n\n  async queryUptime() {\n    const { ds, sparkline } = this.props;\n    const { filter } = this.state;\n    if (!filter) {\n      return;\n    }\n    const backendSrv = getBackendSrv();\n    const lastUpdate = Math.floor(Date.now() / 1000);\n    const resp = await backendSrv.datasourceRequest({\n      method: 'GET',\n      url: `${ds.url}/api/v1/query`,\n      params: {\n        query: `sum(rate(probe_success_sum{${filter}}[3h])) / sum(rate(probe_success_count{${filter}}[3h]))`,\n        time: lastUpdate,\n      },\n    });\n    if (!resp.ok) {\n      console.log(resp);\n      return;\n    }\n    let value: DisplayValue = {\n      numeric: 0,\n      title: 'Uptime',\n      text: 'loading...',\n    };\n    if (resp.data.data.result.length < 1) {\n      value.text = 'N/A';\n      this.setState({ value, lastUpdate });\n      return;\n    }\n    const uptime = parseFloat(resp.data.data.result[0].value[1]) * 100;\n    let color = 'green';\n    if (uptime < 99) {\n      color = 'red';\n    }\n    value.color = color;\n    value.numeric = uptime;\n    value.text = uptime.toFixed(2) + '%';\n\n    this.setState({ value, lastUpdate }, () => {\n      if (sparkline) {\n        this.queryHistory();\n      }\n    });\n  }\n\n  async queryHistory() {\n    const { ds } = this.props;\n    const { filter } = this.state;\n    if (!filter) {\n      return;\n    }\n    const backendSrv = getBackendSrv();\n    const lastUpdate = this.state.lastUpdate + 1;\n    const resp = await backendSrv.datasourceRequest({\n      method: 'POST',\n      url: `${ds.url}/api/v1/query_range`,\n      params: {\n        query: `100 * sum(rate(probe_success_sum{${filter}}[10m])) / sum(rate(probe_success_count{${filter}}[10m]))`,\n        start: lastUpdate - 60 * 60 * 3,\n        end: lastUpdate,\n        step: 600,\n      },\n    });\n    if (!resp.ok) {\n      console.log(resp);\n      return;\n    }\n    let points: GraphSeriesValue[][] = [];\n    if (resp.data.data.result.length < 1) {\n      console.log(resp.data);\n      return;\n    }\n    let i = 0;\n    for (const p of resp.data.data.result[0].values) {\n      points.push([i, parseFloat(p[1])]);\n      i++;\n    }\n    this.setState({ points: points, lastUpdate: lastUpdate + 1 });\n  }\n\n  render() {\n    const { value, points } = this.state;\n    const { height, width, sparkline, onClick } = this.props;\n    let sparklineData = undefined;\n    if (sparkline && points.length > 0) {\n      sparklineData = {\n        yMin: 0,\n        yMax: 150,\n        data: points,\n      };\n    }\n    return (\n      <Container>\n        <BigValue\n          theme={config.theme}\n          colorMode={BigValueColorMode.Value}\n          height={height}\n          width={width}\n          graphMode={BigValueGraphMode.Area}\n          value={value}\n          sparkline={sparklineData}\n          onClick={onClick}\n        />\n      </Container>\n    );\n  }\n}\n\ninterface CheckHealthProps {\n  ds: DataSourceInstanceSettings;\n  check: Check;\n}\n\ninterface CheckHealthState {\n  iconName: IconName;\n  className: string;\n}\n\nexport class CheckHealth extends PureComponent<CheckHealthProps, CheckHealthState> {\n  state: CheckHealthState = {\n    iconName: 'heart',\n    className: 'paused',\n  };\n\n  async componentDidMount() {\n    const { check } = this.props;\n    if (!check.enabled) {\n      this.setState({ iconName: 'pause' });\n      return;\n    }\n    await this.queryUptime();\n  }\n\n  async queryUptime() {\n    const { ds, check } = this.props;\n    const filter = `instance=\"${check.target}\", job=\"${check.job}\"`;\n\n    const backendSrv = getBackendSrv();\n    const lastUpdate = Math.floor(Date.now() / 1000);\n    const resp = await backendSrv.datasourceRequest({\n      method: 'GET',\n      url: `${ds.url}/api/v1/query`,\n      params: {\n        query: `sum(probe_success{${filter}}) / count(probe_success{${filter}})`,\n        time: lastUpdate,\n      },\n    });\n    if (!resp.ok) {\n      console.log(resp);\n      return;\n    }\n    let iconName: IconName = 'heart';\n    let className = 'ok';\n    if (resp.data.data.result.length < 1) {\n      iconName = 'question-circle';\n      className = 'paused';\n      this.setState({ iconName, className });\n      return;\n    }\n    const uptime = parseFloat(resp.data.data.result[0].value[1]) * 100;\n    if (uptime < 99) {\n      className = 'warning';\n    }\n    if (uptime < 50) {\n      className = 'critical';\n      iconName = 'heart-break';\n    }\n    this.setState({ iconName, className });\n  }\n\n  render() {\n    const { iconName, className } = this.state;\n    return <Icon name={iconName} size=\"xxl\" className={`alert-rule-item__icon alert-state-${className}`} />;\n  }\n}\n","// Libraries\nimport React, { PureComponent } from 'react';\n\n// Types\nimport { Check, GrafanaInstances, Label, IpVersion, OrgRole, CheckType } from 'types';\nimport { getLocationSrv } from '@grafana/runtime';\nimport { Button, HorizontalGroup, Icon, VerticalGroup, Container, Select, Input, Pagination } from '@grafana/ui';\nimport { SelectableValue, unEscapeStringFromRegex, escapeStringForRegex } from '@grafana/data';\nimport { CheckEditor } from 'components/CheckEditor';\nimport { UptimeGauge, CheckHealth } from 'components/UptimeGauge';\nimport { hasRole, dashboardUID } from 'utils';\n\ninterface Props {\n  instance: GrafanaInstances;\n  id?: string;\n  checksPerPage?: number;\n}\n\ninterface State {\n  checks: Check[];\n  filteredChecks: Check[];\n  check?: Check; // selected check\n  addNew: boolean;\n  typeFilter: string;\n  searchFilter: string;\n  totalPages: number;\n  currentPage: number;\n  checksPerPage: number;\n}\n\nexport class ChecksPage extends PureComponent<Props, State> {\n  state: State = {\n    checks: [],\n    filteredChecks: [],\n    addNew: false,\n    typeFilter: 'all',\n    searchFilter: '',\n    totalPages: 1,\n    currentPage: 1,\n    checksPerPage: this.props.checksPerPage || 15,\n  };\n\n  async componentDidMount() {\n    const { instance, id } = this.props;\n    const { checksPerPage } = this.state;\n    const checks = await instance.worldping.listChecks();\n    const sortedChecks = checks.sort((a, b) => b.job.localeCompare(a.job));\n    const totalPages = Math.ceil(sortedChecks.length / checksPerPage);\n    const num = id ? parseInt(id, 10) : -1;\n    const check = checks.find(c => c.id === num);\n    this.setState({\n      checks: sortedChecks,\n      check: check,\n      totalPages: totalPages,\n      filteredChecks: sortedChecks.slice(0, checksPerPage),\n    });\n  }\n\n  componentDidUpdate(oldProps: Props) {\n    if (this.props.id !== oldProps.id) {\n      const { id } = this.props;\n      const num = id ? parseInt(id, 10) : -1;\n      const check = this.state.checks.find(c => c.id === num);\n      this.setState({ check });\n    }\n  }\n\n  //-----------------------------------------------------------------\n  // CHECK List\n  //-----------------------------------------------------------------\n\n  onSelectCheck = (id: number) => {\n    getLocationSrv().update({\n      partial: true,\n      query: {\n        id,\n      },\n    });\n  };\n\n  formatLabels(labels: Label[]) {\n    return labels.map(label => {\n      return (\n        <div>\n          {label.name}={label.value}\n        </div>\n      );\n    });\n  }\n\n  filterChecks() {\n    const { typeFilter, searchFilter, currentPage, checks, checksPerPage } = this.state;\n    let filtered = checks\n      .filter(a => {\n        if (typeFilter === 'all') {\n          return true;\n        }\n        const checkType = Object.keys(a.settings)[0];\n        if (checkType === typeFilter) {\n          return true;\n        }\n        return false;\n      })\n      .filter(a => {\n        if (!searchFilter) {\n          return true;\n        }\n\n        // allow users to search using <term>=<somevalue>.\n        // <term> can be one of target, job or a label name\n        if (searchFilter.split('=').length > 1) {\n          let parts = searchFilter.split('=', 2);\n          let term = parts[0];\n          let value = parts[1];\n          switch (term) {\n            case 'target': {\n              return a.target.match(value);\n            }\n            case 'job': {\n              return a.job.match(value);\n            }\n            default: {\n              for (let label of a.labels) {\n                if (label.name === term && label.value.match(value)) {\n                  return true;\n                }\n              }\n            }\n          }\n          return false;\n        }\n        if (a.job.match(searchFilter) || a.target.match(searchFilter)) {\n          return true;\n        }\n        for (let label of a.labels) {\n          if (label.name.match(searchFilter) || label.value.match(searchFilter)) {\n            return true;\n          }\n        }\n        return false;\n      });\n\n    let totalPages = Math.ceil(filtered.length / checksPerPage);\n    this.setState({\n      totalPages: totalPages,\n      filteredChecks: filtered.slice(checksPerPage * (currentPage - 1), currentPage * checksPerPage),\n    });\n  }\n\n  showDashboard = (check: Check) => (event: React.MouseEvent<HTMLElement, MouseEvent>) => {\n    event.stopPropagation();\n    const { instance } = this.props;\n    const checkType = Object.keys(check.settings)[0];\n    const target = dashboardUID(checkType, instance.worldping);\n\n    if (!target) {\n      console.log('dashboard not found.', checkType);\n      return;\n    }\n\n    const d = `d/${target.uid}`;\n    let q = {\n      'var-instance': check.target,\n      'var-job': check.job,\n    };\n\n    getLocationSrv().update({\n      partial: false,\n      path: d,\n      query: q,\n    });\n  };\n\n  onTypeFilterChanged = (type: SelectableValue<string>) => {\n    if (!type.value) {\n      return;\n    }\n    this.setState({ typeFilter: type.value, currentPage: 1 }, this.filterChecks);\n  };\n\n  onSearchFilterChange = (filter: string) => {\n    this.setState({ searchFilter: filter }, this.filterChecks);\n  };\n\n  changePage = (toPage: number) => {\n    console.log('setting current page to', toPage);\n    this.setState({ currentPage: toPage }, this.filterChecks);\n  };\n\n  renderCheckList() {\n    const { checks, typeFilter, searchFilter, filteredChecks, totalPages, currentPage } = this.state;\n    const { instance } = this.props;\n    if (!checks) {\n      return null;\n    }\n\n    const checkTypes = [\n      {\n        label: 'All',\n        value: 'all',\n      },\n      {\n        label: 'HTTP',\n        value: CheckType.HTTP,\n      },\n      {\n        label: 'PING',\n        value: CheckType.PING,\n      },\n      {\n        label: 'DNS',\n        value: CheckType.DNS,\n      },\n      {\n        label: 'TCP',\n        value: CheckType.TCP,\n      },\n    ];\n    return (\n      <div>\n        <div className=\"page-action-bar\">\n          <div className=\"gf-form gf-form--grow\">\n            <Input\n              // Replaces the usage of ref\n              autoFocus\n              prefix={<Icon name=\"search\" />}\n              width={40}\n              type=\"text\"\n              value={searchFilter ? unEscapeStringFromRegex(searchFilter) : ''}\n              onChange={event => this.onSearchFilterChange(escapeStringForRegex(event.currentTarget.value))}\n              placeholder=\"search checks\"\n            />\n          </div>\n          <div className=\"gf-form\">\n            <label className=\"gf-form-label\">Types</label>\n\n            <div className=\"width-13\">\n              <Select options={checkTypes} onChange={this.onTypeFilterChanged} value={typeFilter} />\n            </div>\n          </div>\n          <div className=\"page-action-bar__spacer\" />\n          {hasRole(OrgRole.EDITOR) && (\n            <Button variant=\"secondary\" onClick={this.onAddNew}>\n              New Check\n            </Button>\n          )}\n        </div>\n        <section className=\"card-section card-list-layout-list\">\n          <ol className=\"card-list\">\n            {filteredChecks.map(check => {\n              const checkId: number = check.id || 0;\n              if (!check.id) {\n                return;\n              }\n              const checkType = Object.keys(check.settings)[0];\n              return (\n                <li className=\"card-item-wrapper\">\n                  <a className=\"card-item\" onClick={() => this.onSelectCheck(checkId)}>\n                    <HorizontalGroup justify=\"space-between\">\n                      <div className=\"card-item-body\">\n                        <figure className=\"card-item-figure\">\n                          <CheckHealth check={check} ds={instance.worldping.getMetricsDS()} />\n                        </figure>\n                        <VerticalGroup>\n                          <div className=\"card-item-name\">{check.target}</div>\n                          <div className=\"card-item-sub-name\">{check.job}</div>\n                        </VerticalGroup>\n                      </div>\n                      <HorizontalGroup justify=\"flex-end\">\n                        <div className=\"card-item-header\">\n                          <div className=\"card-item-type\">{checkType}</div>\n                          {this.formatLabels(check.labels)}\n                        </div>\n                        <Container margin=\"lg\">\n                          <a onClick={this.showDashboard(check)}>\n                            <Icon name=\"apps\" size=\"xl\" />\n                          </a>\n                        </Container>\n                        <UptimeGauge\n                          labelNames={['instance', 'job']}\n                          labelValues={[check.target, check.job]}\n                          ds={instance.worldping.getMetricsDS()}\n                          height={70}\n                          width={150}\n                          sparkline={false}\n                        />\n                      </HorizontalGroup>\n                    </HorizontalGroup>\n                  </a>\n                </li>\n              );\n            })}\n          </ol>\n        </section>\n        {totalPages > 1 && (\n          <Pagination numberOfPages={totalPages} currentPage={currentPage} onNavigate={this.changePage} />\n        )}\n      </div>\n    );\n  }\n\n  onAddNew = () => {\n    this.setState({\n      addNew: true,\n    });\n  };\n\n  onRefresh = async () => {\n    const { instance } = this.props;\n    const checks = await instance.worldping.listChecks();\n    this.setState({\n      checks,\n    });\n  };\n\n  onGoBack = (refresh: boolean) => {\n    console.log('go back');\n    this.setState({\n      addNew: false,\n    });\n    if (refresh) {\n      this.onRefresh();\n    }\n    getLocationSrv().update({\n      partial: true,\n      query: {\n        id: '',\n      },\n    });\n  };\n\n  render() {\n    const { instance } = this.props;\n    const { check, addNew } = this.state;\n    if (!instance) {\n      return <div>Loading...</div>;\n    }\n    if (check) {\n      return <CheckEditor check={check} instance={instance.worldping} onReturn={this.onGoBack} />;\n    }\n    if (addNew) {\n      const template = {\n        job: 'worldping',\n        target: '',\n        frequency: 60000,\n        timeout: 2500,\n        enabled: true,\n        labels: [],\n        probes: [],\n        settings: {\n          ping: {\n            ipVersion: IpVersion.V4,\n            dontFragment: false,\n          },\n        },\n      } as Check;\n      return <CheckEditor check={template} instance={instance.worldping} onReturn={this.onGoBack} />;\n    }\n    return <div>{this.renderCheckList()}</div>;\n  }\n}\n","import React, { PureComponent } from 'react';\nimport {\n  Badge,\n  BadgeColor,\n  Modal,\n  Button,\n  Container,\n  ConfirmModal,\n  Field,\n  Input,\n  HorizontalGroup,\n  Switch,\n  Legend,\n  IconName,\n} from '@grafana/ui';\nimport { Label as WorldpingLabel, Probe, OrgRole } from 'types';\nimport { WorldPingDataSource } from 'datasource/DataSource';\nimport { hasRole } from 'utils';\nimport { FormLabel, WorldpingLabelsForm } from './utils';\nimport { UptimeGauge } from './UptimeGauge';\n\ninterface Props {\n  probe: Probe;\n  instance: WorldPingDataSource;\n  onReturn: (reload: boolean) => void;\n}\n\ninterface State {\n  probe?: Probe;\n  showDeleteModal: boolean;\n  showTokenModal: boolean;\n  probeToken: string;\n  showResetModal: boolean;\n}\n\nexport class ProbeEditor extends PureComponent<Props, State> {\n  state: State = {\n    showDeleteModal: false,\n    showTokenModal: false,\n    showResetModal: false,\n    probeToken: '',\n  };\n\n  async componentDidMount() {\n    const probe = { ...this.props.probe } as Probe;\n    this.setState({\n      probe: probe,\n    });\n  }\n\n  showDeleteProbeModal = (show: boolean) => () => {\n    this.setState({ showDeleteModal: show });\n  };\n\n  showTokenModal = (show: boolean) => () => {\n    this.setState({ showTokenModal: show });\n  };\n\n  showResetModal = (show: boolean) => () => {\n    this.setState({ showResetModal: show });\n  };\n\n  onRemoveProbe = async () => {\n    const id = this.props.probe.id || 0;\n    if (!this.props.probe.id) {\n      return;\n    }\n    const info = this.props.instance.deleteProbe(id);\n    console.log('Remove Probe', id, info);\n    this.props.onReturn(true);\n  };\n\n  onLabelsUpdate = (labels: WorldpingLabel[]) => {\n    let probe = { ...this.state.probe } as Probe;\n    probe.labels = labels;\n    this.setState({ probe });\n  };\n\n  onLatUpdate = (event: React.ChangeEvent<HTMLInputElement>) => {\n    let probe = { ...this.state.probe } as Probe;\n    probe.latitude = event.target.valueAsNumber;\n    this.setState({ probe });\n  };\n\n  onLongUpdate = (event: React.ChangeEvent<HTMLInputElement>) => {\n    let probe = { ...this.state.probe } as Probe;\n    probe.longitude = event.target.valueAsNumber;\n    this.setState({ probe });\n  };\n\n  onNameUpdate = (event: React.ChangeEvent<HTMLInputElement>) => {\n    let probe = { ...this.state.probe } as Probe;\n    probe.name = event.target.value;\n    this.setState({ probe });\n  };\n\n  onSave = async () => {\n    const { instance } = this.props;\n    const { probe } = this.state;\n    if (!probe) {\n      return;\n    }\n    if (probe.id) {\n      console.log('UPDATE', probe, instance);\n      const info = await instance.updateProbe(probe);\n      console.log('got', info);\n      this.props.onReturn(true);\n    } else {\n      console.log('ADD', probe);\n      const info = await instance.addProbe(probe);\n      this.setState({ showTokenModal: true, probeToken: info.token });\n    }\n  };\n\n  onResetToken = async () => {\n    const { instance } = this.props;\n    const probe = { ...this.props.probe };\n    const info = await instance.resetProbeToken(probe);\n    this.setState({ showTokenModal: true, showResetModal: false, probeToken: info.token });\n  };\n\n  onBack = () => {\n    this.props.onReturn(false);\n  };\n\n  isValid(): boolean {\n    const { probe } = this.state;\n    if (!probe) {\n      return false;\n    }\n    if (probe.name === '') {\n      console.log('probe name must be set');\n      return false;\n    }\n    if (probe.name.length > 32) {\n      console.log('probe name must be less than 32 characters');\n      return false;\n    }\n    if (probe.latitude < -90 || probe.latitude > 90) {\n      console.log('probe latitude must be between -90 and 90');\n      return false;\n    }\n    if (probe.longitude < -180 || probe.longitude > 180) {\n      console.log('probe longitude must be between -180 and 180');\n      return false;\n    }\n    for (const l of probe.labels) {\n      if (l.name === '' || l.value === '') {\n        console.log('label name and value must be set');\n        return false;\n      }\n      if (!l.name.match(/^[a-zA-Z0-9_]*$/)) {\n        console.log('label name can only contain a-zA-Z0-9_');\n        return false;\n      }\n      if (l.name.length > 32) {\n        console.log('label name must be less than 32 chars');\n        return false;\n      }\n      if (l.value.length > 64) {\n        console.log('label name must be less than 64 chars');\n        return false;\n      }\n    }\n    return true;\n  }\n\n  renderStatus() {\n    const { probe, showResetModal } = this.state;\n    const { instance } = this.props;\n\n    if (!probe) {\n      return;\n    }\n    let isEditor = !probe.public && hasRole(OrgRole.EDITOR);\n    let onlineTxt = 'Offline';\n    let onlineIcon = 'heart-break' as IconName;\n    let color = 'red' as BadgeColor;\n    if (probe.online) {\n      onlineTxt = 'Online';\n      onlineIcon = 'heart';\n      color = 'green';\n    }\n\n    return (\n      <Container margin=\"md\">\n        <Legend>\n          Status: &nbsp;\n          <Badge color={color} icon={onlineIcon} text={onlineTxt} />\n        </Legend>\n        {!probe.public && (\n          <Container>\n            <Button variant=\"destructive\" onClick={this.showResetModal(true)} disabled={!isEditor}>\n              Reset Access Token\n            </Button>\n            <ConfirmModal\n              isOpen={showResetModal}\n              title=\"Reset Probe Access Token\"\n              body=\"Are you sure you want to reset the access token for this Probe?\"\n              confirmText=\"Reset Token\"\n              onConfirm={this.onResetToken}\n              onDismiss={this.showResetModal(false)}\n            />\n          </Container>\n        )}\n        <br />\n        <UptimeGauge\n          labelNames={['probe']}\n          labelValues={[probe.name]}\n          ds={instance.getMetricsDS()}\n          height={200}\n          width={300}\n          sparkline={true}\n        />\n      </Container>\n    );\n  }\n\n  render() {\n    const { probe, showDeleteModal, showTokenModal, probeToken } = this.state;\n    if (!probe) {\n      return <div>Loading...</div>;\n    }\n    let legend = 'Configuration';\n    if (!probe.id) {\n      legend = 'Add Probe';\n    }\n    let isEditor = !probe.public && hasRole(OrgRole.EDITOR);\n\n    return (\n      <HorizontalGroup align=\"flex-start\">\n        <Container>\n          <Legend>{legend}</Legend>\n          <Container margin=\"md\">\n            <HorizontalGroup>\n              <Field label={<FormLabel name=\"Probe Name\" help=\"Unique name of probe\" />} disabled={!isEditor}>\n                <Input type=\"string\" value={probe.name} onChange={this.onNameUpdate} />\n              </Field>\n              <Field\n                label={\n                  <FormLabel name=\"Public\" help=\"Public probes are run by Grafana Labs and can be used by all users\" />\n                }\n                disabled={!isEditor}\n              >\n                <Container padding=\"sm\">\n                  <Switch value={probe.public} disabled={false} />\n                </Container>\n              </Field>\n            </HorizontalGroup>\n          </Container>\n          <Container margin=\"md\">\n            <h3 className=\"page-heading\">Location information</h3>\n            <HorizontalGroup>\n              <Field\n                label={<FormLabel name=\"Latitude\" help=\"Latitude coordinates of this probe\" />}\n                disabled={!isEditor}\n              >\n                <Input\n                  label=\"Latitude\"\n                  type=\"number\"\n                  placeholder=\"0.0\"\n                  value={probe?.latitude || 0.0}\n                  onChange={this.onLatUpdate}\n                />\n              </Field>\n              <Field\n                label={<FormLabel name=\"Longitude\" help=\"Longitude coordinates of this probe\" />}\n                disabled={!isEditor}\n              >\n                <Input\n                  label=\"Longitude\"\n                  type=\"number\"\n                  placeholder=\"0.0\"\n                  value={probe?.longitude || 0.0}\n                  onChange={this.onLongUpdate}\n                />\n              </Field>\n            </HorizontalGroup>\n          </Container>\n          <Container margin=\"md\">\n            <h3 className=\"page-heading\">Labels</h3>\n            <WorldpingLabelsForm\n              labels={probe.labels}\n              onUpdate={this.onLabelsUpdate}\n              isEditor={isEditor}\n              type=\"Label\"\n            />\n          </Container>\n          <Container margin=\"md\">\n            <HorizontalGroup>\n              <Button onClick={this.onSave} disabled={!isEditor || !this.isValid()}>\n                Save\n              </Button>\n              {probe.id && (\n                <Button variant=\"destructive\" onClick={this.showDeleteProbeModal(true)} disabled={!isEditor}>\n                  Delete Probe\n                </Button>\n              )}\n              <ConfirmModal\n                isOpen={showDeleteModal}\n                title=\"Delete Probe\"\n                body=\"Are you sure you want to delete this Probe?\"\n                confirmText=\"Delete Probe\"\n                onConfirm={this.onRemoveProbe}\n                onDismiss={this.showDeleteProbeModal(false)}\n              />\n              <a onClick={this.onBack}>Back</a>\n            </HorizontalGroup>\n          </Container>\n          <Modal\n            isOpen={showTokenModal}\n            title=\"Probe Authentication Token\"\n            icon={'lock'}\n            onDismiss={probe.id ? this.showTokenModal(false) : this.onBack}\n          >\n            {probeToken}\n          </Modal>\n        </Container>\n        {probe.id && this.renderStatus()}\n      </HorizontalGroup>\n    );\n  }\n}\n","// Libraries\nimport React, { PureComponent } from 'react';\n\n// Types\nimport { GrafanaInstances, Label, Probe, OrgRole } from 'types';\nimport { Button, HorizontalGroup, IconName, Badge, BadgeColor } from '@grafana/ui';\nimport { getLocationSrv } from '@grafana/runtime';\nimport { ProbeEditor } from 'components/ProbeEditor';\nimport { UptimeGauge } from 'components/UptimeGauge';\nimport { hasRole } from 'utils';\n//import ProbesMap from 'components/ProbesMap';\n\ninterface Props {\n  instance: GrafanaInstances;\n  id?: string;\n}\n\ninterface State {\n  probes: Probe[];\n  probe?: Probe; // selected Probe\n  addNew: boolean;\n}\n\nexport class ProbesPage extends PureComponent<Props, State> {\n  state: State = {\n    probes: [],\n    addNew: false,\n  };\n\n  async componentDidMount() {\n    const { instance, id } = this.props;\n    const probes = await instance.worldping.listProbes();\n    const num = id ? parseInt(id, 10) : -1;\n    const probe = probes.find(p => p.id === num);\n    this.setState({ probes, probe });\n  }\n\n  componentDidUpdate(oldProps: Props) {\n    if (this.props.id !== oldProps.id) {\n      const { id } = this.props;\n      const num = id ? parseInt(id, 10) : -1;\n      const probe = this.state.probes.find(p => p.id === num);\n      this.setState({ probe });\n    }\n  }\n\n  labelsToString(labels: Label[]) {\n    return labels\n      .map(label => {\n        return label.name + '=' + label.value;\n      })\n      .join(' ');\n  }\n\n  onSelectProbe = (id: number) => {\n    getLocationSrv().update({\n      partial: true,\n      query: {\n        id,\n      },\n    });\n  };\n\n  onAddNew = () => {\n    this.setState({\n      addNew: true,\n    });\n  };\n\n  onRefresh = async () => {\n    const { instance } = this.props;\n    const probes = await instance.worldping.listProbes();\n    this.setState({\n      probes,\n    });\n  };\n\n  onGoBack = (refresh: boolean) => {\n    console.log('go back');\n    this.setState({\n      addNew: false,\n    });\n    if (refresh) {\n      this.onRefresh();\n    }\n    getLocationSrv().update({\n      partial: true,\n      query: {\n        id: '',\n      },\n    });\n  };\n\n  render() {\n    const { instance } = this.props;\n    const { probe, addNew } = this.state;\n    if (!instance) {\n      return <div>Loading...</div>;\n    }\n\n    if (probe) {\n      return <ProbeEditor probe={probe} instance={instance.worldping} onReturn={this.onGoBack} />;\n    }\n    if (addNew) {\n      const template = {\n        name: '',\n        public: false,\n        latitude: 0.0,\n        longitude: 0.0,\n        labels: [],\n        online: false,\n        onlineChange: 0,\n      } as Probe;\n      return <ProbeEditor probe={template} instance={instance.worldping} onReturn={this.onGoBack} />;\n    }\n    return <div>{this.renderProbeList()}</div>;\n  }\n\n  renderProbeList() {\n    const { probes } = this.state;\n    const { instance } = this.props;\n    if (!probes) {\n      return null;\n    }\n    return (\n      <div>\n        {hasRole(OrgRole.EDITOR) && (\n          <HorizontalGroup justify=\"flex-end\">\n            <Button onClick={this.onAddNew}>New</Button>\n          </HorizontalGroup>\n        )}\n        {probes.map(probe => {\n          const probeId: number = probe.id || 0;\n          if (!probe.id) {\n            return;\n          }\n          let onlineTxt = 'Offline';\n          let onlineIcon = 'heart-break' as IconName;\n          let color = 'red' as BadgeColor;\n          if (probe.online) {\n            onlineTxt = 'Online';\n            onlineIcon = 'heart';\n            color = 'green';\n          }\n          return (\n            <div key={probeId} className=\"add-data-source-item\" onClick={() => this.onSelectProbe(probeId)}>\n              <div className=\"add-data-source-item-text-wrapper\">\n                <span className=\"add-data-source-item-text\">{probe.name}</span>\n                <span className=\"add-data-source-item-desc\">\n                  <Badge color={color} icon={onlineIcon} text={onlineTxt} />\n                  <div>{this.labelsToString(probe.labels)}</div>\n                </span>\n              </div>\n              <UptimeGauge\n                labelNames={['probe']}\n                labelValues={[probe.name]}\n                ds={instance.worldping.getMetricsDS()}\n                height={60}\n                width={150}\n                sparkline={false}\n              />\n              <div className=\"add-data-source-item-actions\">\n                <Button>Select</Button>\n              </div>\n            </div>\n          );\n        })}\n        <br />\n      </div>\n    );\n  }\n}\n","// Libraries\nimport React, { PureComponent } from 'react';\n\n// Types\nimport { NavModelItem, AppRootProps, DataSourceInstanceSettings } from '@grafana/data';\nimport { GlobalSettings, RegistrationInfo, GrafanaInstances, OrgRole } from './types';\nimport { WorldPingDataSource } from 'datasource/DataSource';\nimport { findWorldPingDataSources, createNewWorldpingInstance, hasRole, dashboardUID } from 'utils';\nimport { WorldpingOptions } from 'datasource/types';\nimport { getDataSourceSrv, getLocationSrv } from '@grafana/runtime';\nimport { TenantSetup } from './components/TenantSetup';\nimport { TenantView } from 'components/TenantView';\nimport { DashboardList } from 'components/DashboardList';\nimport { ChecksPage } from 'page/ChecksPage';\nimport { ProbesPage } from 'page/ProbesPage';\n\ninterface Props extends AppRootProps<GlobalSettings> {}\ninterface State {\n  settings: Array<DataSourceInstanceSettings<WorldpingOptions>>;\n  instance?: GrafanaInstances;\n  info?: RegistrationInfo;\n  valid?: boolean;\n}\n\nexport class RootPage extends PureComponent<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      settings: findWorldPingDataSources(),\n    };\n  }\n\n  async loadInstances() {\n    const settings = this.state.settings[0];\n    if (settings && settings.name) {\n      const worldping = (await getDataSourceSrv().get(settings.name)) as WorldPingDataSource;\n      if (worldping) {\n        let global = worldping.instanceSettings.jsonData;\n        const instance: GrafanaInstances = {\n          worldping,\n          metrics: await loadDataSourceIfExists(global?.metrics?.grafanaName),\n          logs: await loadDataSourceIfExists(global?.logs?.grafanaName),\n        };\n\n        this.setState({\n          instance,\n          valid: isValid(instance),\n        });\n        this.updateNav();\n        return;\n      }\n    }\n\n    // Create a new instance\n    if (true) {\n      console.log('Creating a new datasource TODO, check user auth');\n      await createNewWorldpingInstance();\n      console.log('Reload the windows (will redirect)');\n      window.location.reload(); // force reload\n    }\n  }\n\n  async componentDidMount() {\n    this.updateNav();\n    this.loadInstances();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (this.props.query !== prevProps.query) {\n      if (this.props.query.page !== prevProps.query.page) {\n        this.updateNav();\n      }\n    }\n  }\n\n  updateNav() {\n    const { path, onNavChanged, query, meta } = this.props;\n    const selected = query.page || 'status';\n    const tabs: NavModelItem[] = [];\n    if (this.state.valid && selected !== 'setup' && selected !== 'redirect') {\n      tabs.push({\n        text: 'Status',\n        // icon: 'fa fa-fw fa-file-text-o',\n        url: path,\n        id: 'status',\n      });\n      tabs.push({\n        text: 'Checks',\n        url: path + '?page=checks',\n        id: 'checks',\n      });\n      tabs.push({\n        text: 'Probes',\n        url: path + '?page=probes',\n        id: 'probes',\n      });\n    } else if (this.state.valid && selected === 'redirect') {\n      tabs.push({\n        text: 'Dashboard Redirect',\n        url: path + '?page=redirect',\n        id: 'redirect',\n      });\n      tabs.push({\n        text: 'Status',\n        // icon: 'fa fa-fw fa-file-text-o',\n        url: path,\n        id: 'status',\n      });\n    } else {\n      tabs.push({\n        text: 'Setup',\n        // icon: 'fa fa-fw fa-file-text-o',\n        url: path,\n        id: 'setup',\n      });\n    }\n\n    // Set the active tab\n    let found = false;\n\n    for (const tab of tabs) {\n      tab.active = !found && selected === tab.id;\n      if (tab.active) {\n        found = true;\n      }\n    }\n    if (!found) {\n      tabs[0].active = true;\n    }\n\n    const node = {\n      text: 'worldPing',\n      img: meta.info.logos.large,\n      subTitle: 'Global Blackbox Monitoring',\n      url: path,\n      children: tabs,\n    };\n\n    // Update the page header\n    onNavChanged({\n      node: node,\n      main: node,\n    });\n  }\n\n  //-----------------------------------------------------------------------------------------\n  // Multiple Config\n  //-----------------------------------------------------------------------------------------\n  renderMultipleConfigs() {\n    return <div>TODO... multiple instances... delete one!!!!</div>;\n  }\n\n  //-----------------------------------------------------------------------------------------\n  // Setup\n  //-----------------------------------------------------------------------------------------\n  renderStatus() {\n    const { instance } = this.state;\n    const options = instance!.worldping.instanceSettings.jsonData;\n    return (\n      <div>\n        <DashboardList options={options} checkUpdates={false} />\n        <br />\n        {hasRole(OrgRole.EDITOR) && <TenantView settings={options} />}\n      </div>\n    );\n  }\n\n  dashboardRedirect() {\n    const { instance } = this.state;\n    const { query } = this.props;\n    if (!instance) {\n      return <div>Loading.... (or maybe a user permissions error?)</div>;\n    }\n    if (!query.dashboard) {\n      return <div>Dashboard not found</div>;\n    }\n    const target = dashboardUID(query.dashboard, instance!.worldping);\n\n    if (!target) {\n      console.log('dashboard not found.', query);\n      return <div>Dashboard not found</div>;\n    }\n\n    const d = `d/${target.uid}`;\n    let q = { ...query };\n    delete q.dashboard;\n    delete q.page;\n    getLocationSrv().update({\n      partial: false,\n      path: d,\n      query: q,\n    });\n    return null;\n  }\n\n  //-----------------------------------------------------------------------------------------\n  // Setup\n  //-----------------------------------------------------------------------------------------\n  renderSetup() {\n    const { instance } = this.state;\n    if (!instance) {\n      return <div>Loading.... (or maybe a user permissions error?)</div>;\n    }\n\n    return <TenantSetup instance={instance.worldping} />;\n  }\n\n  render() {\n    const { settings, valid, instance } = this.state;\n    if (settings.length > 1) {\n      return this.renderMultipleConfigs();\n    }\n    const { query } = this.props;\n    if (!valid || query.page === 'setup') {\n      return this.renderSetup();\n    }\n\n    if ('dashboard' in query) {\n      return this.dashboardRedirect();\n    }\n\n    if (query.page === 'checks') {\n      return <ChecksPage instance={instance!} id={query.id} />;\n    }\n    if (query.page === 'probes') {\n      return <ProbesPage instance={instance!} id={query.id} />;\n    }\n\n    return this.renderStatus();\n  }\n}\n\nasync function loadDataSourceIfExists(name?: string) {\n  if (name) {\n    try {\n      return await getDataSourceSrv().get();\n    } catch {}\n  }\n  return undefined;\n}\n\nfunction isValid(instance: GrafanaInstances): boolean {\n  if (!instance || !instance.logs || !instance.metrics || !instance.worldping) {\n    return false;\n  }\n  return true;\n}\n","// Angular pages\nimport { ExampleConfigCtrl } from './legacy/config';\nimport { AppPlugin } from '@grafana/data';\nimport { GlobalSettings } from './types';\nimport { RootPage } from 'RootPage';\n\n// Legacy exports just for testing\nexport { ExampleConfigCtrl as ConfigCtrl };\n\nexport const plugin = new AppPlugin<GlobalSettings>().setRootPage(RootPage);\n"],"sourceRoot":""}