{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"react\"","webpack:///external \"@grafana/ui\"","webpack:///../node_modules/tslib/tslib.es6.js","webpack:///external \"@grafana/runtime\"","webpack:///external \"@grafana/data\"","webpack:///./components/TenantView.tsx","webpack:///./datasource/ConfigEditor.tsx","webpack:///external \"emotion\"","webpack:///./types.ts","webpack:///./legacy/config.ts","webpack:///./utils.ts","webpack:///./components/InstanceList.tsx","webpack:///./dashboards/loader.ts","webpack:///./components/DashboardList.tsx","webpack:///./components/TenantSetup.tsx","webpack:///./validation.ts","webpack:///./components/utils.tsx","webpack:///./components/PingSettings.tsx","webpack:///./components/http/AuthSettings.tsx","webpack:///./components/http/HttpSettings.tsx","webpack:///./components/DnsSettings.tsx","webpack:///./components/TcpSettings.tsx","webpack:///./components/CheckEditor.tsx","webpack:///./components/UptimeGauge.tsx","webpack:///./page/ChecksPage.tsx","webpack:///./components/ProbeEditor.tsx","webpack:///./page/ProbesPage.tsx","webpack:///./RootPage.tsx","webpack:///./module.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","__WEBPACK_EXTERNAL_MODULE__0__","__WEBPACK_EXTERNAL_MODULE__1__","extendStatics","b","setPrototypeOf","__proto__","Array","__extends","__","this","constructor","__assign","assign","arguments","length","apply","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","iterator","v","op","TypeError","pop","push","__values","__read","ar","error","__spread","concat","__makeTemplateObject","cooked","raw","__WEBPACK_EXTERNAL_MODULE__3__","__WEBPACK_EXTERNAL_MODULE__4__","render","settings","margin","LinkedDatasourceView","info","metrics","logs","state","onClick","ds","type","update","partial","path","id","componentDidMount","setState","datasources","grafanaName","className","src","meta","logos","small","onAccessTokenChange","event","onOptionsChange","options","secureJsonData","accessToken","target","onResetAccessToken","secureJsonFields","isConfigured","isValid","jsonData","SecretFormField","placeholder","labelWidth","inputWidth","onReset","onChange","apiHost","hostedId","__WEBPACK_EXTERNAL_MODULE__7__","IpVersion","HttpMethod","HttpVersion","DnsRecordType","DnsProtocol","CheckType","OrgRole","$scope","$injector","$q","appEditCtrl","setPostUpdateHook","postUpdate","appModel","configured","enabled","values","filter","templateUrl","findHostedInstance","known","basicAuthUser","instanceUrl","url","console","log","getHostedLokiAndPrometheusInfo","indexOf","createNewApiInstance","post","access","isDefault","createHostedInstance","data","basicAuth","basicAuthPassword","datasource","hasRole","requiredRole","user","bootData","ADMIN","orgRole","EDITOR","VIEWER","types","keys","HTTP","defaultSettings","http","method","GET","ipVersion","V4","noFollowRedirects","PING","ping","dontFragment","DNS","dns","recordType","A","server","protocol","UDP","port","TCP","tcp","tls","dashboardUID","checkType","dashboards","instanceSettings","undefined","item","json","toLocaleLowerCase","selected","props","instances","map","instance","isSelected","logo","hostedType","onSelected","variant","href","orgSlug","rel","icon","dashboardPaths","findSyntheticMonitoringFolder","backendSrv","folders","folder","title","importDashboard","dashboard","overwrite","inputs","pluginId","folderId","uid","version","latestVersion","listAppDashboards","dInfo","removeDashboard","onImport","updated","findIndex","onRemove","splice","checkUpdates","latestDashboards","withImports","style","textAlign","buttonText","defaultApiHost","showResetModal","resetConfig","showAdvanced","onInit","adminApiToken","registerInit","err","msg","userError","backendError","statusText","status","alert","logsInstance","tenantInfo","logInstance","metricsInstance","metricInstance","onApiHostChange","onApiTokenChange","onSelectLogs","onSelectMetrics","createDataSource","hosted","getViewerToken","token","onSave","hostedMetrics","find","hostedLogs","registerSave","window","location","reload","onToggleAdvanced","isOpen","show","renderSetup","wrap","invalid","width","collapsible","onToggle","severity","TenantView","confirmText","onConfirm","onDismiss","CheckValidation","job","validateJob","validateTarget","frequency","validateFrequency","timeout","validateTimeout","labels","validateLabels","checkT","probes","validateProbes","validateCheck","check","typeOfCheck","URL","validateHttpTarget","freq","validateLabelName","validateLabelValue","labelRegex","test","numLabels","addLabel","onUpdate","onDelete","index","isEditor","limit","justify","items","renderItem","disabled","size","onNameChange","onValueChange","componentDidUpdate","oldProps","IpOptions","Any","V6","onIpVersionChange","onDontFragmentChange","onToggleOptions","description","padding","hasBasicAuth","hasBearerToken","showAuthentication","onToggleAuthentication","onBearerTokenChange","onBasicAuthChange","onHasBearerAuth","bearerToken","username","password","spacing","horizontal","auth","onUsernameChange","onPasswordChange","onHasBasicAuth","headers","failIfSSL","failIfNotSSL","validStatusCodes","validHTTPVersions","failIfBodyMatchesRegexp","failIfBodyNotMatchesRegexp","failIfHeaderMatchesRegexp","failIfHeaderNotMatchesRegexp","cacheBustingQueryParamName","showValidation","showTLS","onMethodChange","onBodyChange","onNoFollowRedirectsChange","onFailIfNotSSLChange","onFailIfSSLChange","onCacheBustingQueryParamNameChange","onToggleValidation","onAuthUpdate","onToggleTLS","onTLSChange","tlsConfig","onValidHttpVersionsChange","onValidStatusCodeChange","onHeadersUpdate","onFailIfBodyMatchesRegexpChange","forEach","onFailIfBodyMatchesRegexpDelete","addFailIfBodyMatchesRegexp","onFailIfBodyNotMatchesRegexpChange","onFailIfBodyNotMatchesRegexpDelete","addFailIfBodyNotMatchesRegexp","onFailIfHeaderMatchesUpdate","headerMatches","matches","onFailIfHeaderNotMatchesUpdate","headersToLabels","parts","split","generateValidStatusCodes","validCodes","httpVersionOptions","HTTP1_0","HTTP1_1","HTTP2_0","methodOptions","HEAD","PUT","POST","DELETE","OPTIONS","rows","insecureSkipVerify","caCert","clientCert","clientKey","serverName","cfg","onInsecureSkipVerifyChange","onServerNameChange","onCACertChange","onClientCertChange","onClientKeyChange","onHeaderChange","header","regexp","allowMissing","onRegexpChange","onAllowMissingChange","onHeaderMatchesDelete","onHeaderMatchesAdd","validRCodes","validateAnswerRRS","validateAuthorityRRS","validateAdditionalRRS","onProtocolChange","onPortChange","valueAsNumber","onServerChange","onRecordTypeChange","onShowAdvanced","onShowValidation","onValidRCodesChange","onValidateAnswerChange","validations","failIfMatchesRegexp","failIfNotMatchesRegexp","onValidateAuthorityChange","onValidateAdditionalChange","recordTypes","AAAA","CNAME","MX","NS","SOA","TXT","PTR","SRV","protocols","onFailIfMatchesRegexpChange","onFailIfNotMatchesRegexpChange","onFailIfMatchesRegexpDelete","onFailIfNotMatchesRegexpDelete","onFailIfMatchesRegexpAdd","onFailIfNotMatchesRegexpAdd","queryResponse","showQueryResponse","onTLSCOnfigChange","onShowQueryResponse","onQueryResponsesUpdate","config","queryResponses","expect","atob","send","startTLS","btoa","onSendChange","onExpectChange","onStartTLSChange","onQueryResponseDelete","onQueryResponseAdd","showDeleteModal","showOptions","targetHelp","example","showDeleteCheckModal","onRemoveCheck","deleteCheck","onReturn","onLabelsUpdate","onProbesUpdate","onSettingsUpdate","onSetType","targetHelpText","onJobUpdate","onTargetUpdate","onFrequencyUpdate","onTimeoutUpdate","updateCheck","addCheck","onEnableChange","onBack","listProbes","text","resp","legend","checkTypes","required","availableProbes","suffix","max","min","toLocaleUpperCase","onJsonChange","JSON","parse","onSettingsChange","probeStr","join","str","onAllLocations","onClearLocations","online","selectedProbes","existing","closeMenuOnSelect","lastUpdate","numeric","points","filterString","labelNames","labelValues","filters","k","queryUptime","sparkline","Math","floor","Date","now","datasourceRequest","params","query","time","ok","uptime","parseFloat","color","toFixed","queryHistory","start","end","height","sparklineData","yMin","yMax","theme","colorMode","Value","graphMode","Area","iconName","checks","filteredChecks","addNew","typeFilter","searchFilter","totalPages","currentPage","checksPerPage","loading","onSelectCheck","showDashboard","stopPropagation","api","q","onTypeFilterChanged","filterChecks","onFilterByLabel","labelName","labelValue","onSearchFilterChange","changePage","toPage","onAddNew","onRefresh","listChecks","sortedChecks","sort","a","localeCompare","onGoBack","refresh","ceil","num","parseInt","slice","formatLabels","filtered","term","match","renderNoChecks","renderCheckList","getMetricsDS","autoFocus","prefix","currentTarget","checkId","numberOfPages","onNavigate","template","showTokenModal","probeToken","showDeleteProbeModal","onRemoveProbe","probe","deleteProbe","onLatUpdate","latitude","onLongUpdate","longitude","onRegionUpdate","region","onNameUpdate","updateProbe","addProbe","onResetToken","resetProbeToken","renderStatus","onlineTxt","onlineIcon","align","onSelectProbe","labelsToString","public","onlineChange","renderProbeList","probeId","loadInstances","global","loadDataSourceIfExists","valid","updateNav","prevProps","page","onNavChanged","tabs","found","tab","active","node","img","large","subTitle","children","main","renderMultipleConfigs","dashboardRedirect","renderConfig","setRootPage"],"mappings":"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","file":"module.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 9);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__3__;","module.exports = __WEBPACK_EXTERNAL_MODULE__4__;","import React, { PureComponent } from 'react';\nimport { SMOptions, LinkedDatsourceInfo } from 'datasource/types';\nimport { config, getLocationSrv } from '@grafana/runtime';\nimport { DataSourceInstanceSettings } from '@grafana/data';\nimport { Button, Container } from '@grafana/ui';\n\ninterface Props {\n  settings: SMOptions;\n}\n\nexport class TenantView extends PureComponent<Props> {\n  render() {\n    const { settings } = this.props;\n    if (!settings) {\n      return <div>Loading...</div>;\n    }\n\n    return (\n      <div>\n        <h2>Linked Data Sources</h2>\n        <Container margin=\"sm\">\n          <LinkedDatasourceView info={settings.metrics} />\n          <LinkedDatasourceView info={settings.logs} />\n        </Container>\n      </div>\n    );\n  }\n}\n\ninterface Props2 {\n  info: LinkedDatsourceInfo;\n}\ninterface State2 {\n  ds?: DataSourceInstanceSettings;\n}\n\nclass LinkedDatasourceView extends PureComponent<Props2, State2> {\n  state: State2 = {};\n\n  componentDidMount() {\n    const { info } = this.props;\n    this.setState({\n      ds: config.datasources[info.grafanaName],\n    });\n  }\n\n  onClick = () => {\n    const { ds } = this.state;\n    if (ds?.type === 'synthetic-monitoring-datasource') {\n      getLocationSrv().update({\n        partial: false,\n        path: `a/grafana-synthetic-monitoring-app/`,\n      });\n    } else {\n      getLocationSrv().update({\n        partial: false,\n        path: `datasources/edit/${ds?.id}/`,\n      });\n    }\n  };\n\n  render() {\n    const { ds } = this.state;\n    if (!ds) {\n      return <div>Loading...</div>;\n    }\n\n    return (\n      <div className=\"add-data-source-item\" onClick={this.onClick}>\n        <img className=\"add-data-source-item-logo\" src={ds.meta.info.logos.small} />\n        <div className=\"add-data-source-item-text-wrapper\">\n          <span className=\"add-data-source-item-text\">{ds.name}</span>\n          <span className=\"add-data-source-item-desc\">{ds.type}</span>\n        </div>\n        <div className=\"add-data-source-item-actions\">\n          <Button>Edit</Button>\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { PureComponent, ChangeEvent } from 'react';\nimport { DataSourcePluginOptionsEditorProps } from '@grafana/data';\nimport { SMOptions, SecureJsonData } from './types';\nimport { LegacyForms } from '@grafana/ui';\nimport { TenantView } from 'components/TenantView';\n\ninterface Props extends DataSourcePluginOptionsEditorProps<SMOptions, SecureJsonData> {}\n\nexport class ConfigEditor extends PureComponent<Props> {\n  onAccessTokenChange = (event: ChangeEvent<HTMLInputElement>) => {\n    const { onOptionsChange, options } = this.props;\n    onOptionsChange({\n      ...options,\n      secureJsonData: {\n        accessToken: event.target.value,\n      },\n    });\n  };\n\n  onResetAccessToken = () => {\n    const { onOptionsChange, options } = this.props;\n    onOptionsChange({\n      ...options,\n      secureJsonFields: {\n        ...options.secureJsonFields,\n        accessToken: false,\n      },\n      secureJsonData: {\n        ...options.secureJsonData,\n        accessToken: '',\n      },\n    });\n  };\n\n  render() {\n    const { options } = this.props;\n    const { secureJsonFields } = options;\n    const secureJsonData = (options.secureJsonData || {}) as SecureJsonData;\n    function isConfigured(): boolean {\n      return (secureJsonFields && secureJsonFields.accessToken) as boolean;\n    }\n    return (\n      <div>\n        {isValid(options.jsonData) && isConfigured() && <TenantView settings={options.jsonData} />}\n        <br />\n        <div className=\"gf-form-group\">\n          <div className=\"gf-form-inline\">\n            <div className=\"gf-form\">\n              <LegacyForms.SecretFormField\n                isConfigured={isConfigured()}\n                value={secureJsonData.accessToken || ''}\n                label=\"Access Token\"\n                placeholder=\"access token saved on the server\"\n                labelWidth={10}\n                inputWidth={20}\n                onReset={this.onResetAccessToken}\n                onChange={this.onAccessTokenChange}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport function isValid(settings: SMOptions): boolean {\n  if (!settings) {\n    return false;\n  }\n\n  const { apiHost, metrics, logs } = settings;\n  if (!apiHost || !metrics || !metrics.grafanaName || !metrics.hostedId) {\n    return false;\n  }\n\n  if (!logs || !logs.grafanaName || !logs.hostedId) {\n    return false;\n  }\n\n  return true;\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__7__;","import { DataSourceApi } from '@grafana/data';\nimport { SMDataSource } from 'datasource/DataSource';\n\n// App Settings\nexport interface GlobalSettings {\n  // anything?\n}\n\nexport enum IpVersion {\n  Any = 'Any',\n  V4 = 'V4',\n  V6 = 'V6',\n}\n\nexport interface PingSettings {\n  ipVersion: IpVersion;\n  dontFragment: boolean;\n}\n\nexport enum HttpMethod {\n  GET = 'GET',\n  HEAD = 'HEAD',\n  POST = 'POST',\n  PUT = 'PUT',\n  OPTIONS = 'OPTIONS',\n  DELETE = 'DELETE',\n}\n\nexport enum HttpVersion {\n  HTTP1_0 = 'HTTP/1.0',\n  HTTP1_1 = 'HTTP/1.1',\n  HTTP2_0 = 'HTTP/2',\n}\n\nexport enum DnsRecordType {\n  A = 'A',\n  AAAA = 'AAAA',\n  CNAME = 'CNAME',\n  MX = 'MX',\n  NS = 'NS',\n  PTR = 'PTR',\n  SOA = 'SOA',\n  SRV = 'SRV',\n  TXT = 'TXT',\n}\n\nexport enum DnsProtocol {\n  TCP = 'TCP',\n  UDP = 'UDP',\n}\n\nexport interface HeaderMatch {\n  header: string;\n  regexp: string;\n  allowMissing: boolean;\n}\n\n// HttpSettings provides the settings for a HTTP check.\nexport interface HttpSettings {\n  method: HttpMethod;\n  headers?: string[];\n  body?: string;\n  ipVersion: IpVersion;\n  noFollowRedirects: boolean;\n  tlsConfig?: TLSConfig;\n\n  // Authentication\n  bearerToken?: string;\n  basicAuth?: BasicAuth;\n\n  // validations\n  failIfSSL?: boolean;\n  failIfNotSSL?: boolean;\n  validStatusCodes?: number[];\n  validHTTPVersions?: HttpVersion[];\n  failIfBodyMatchesRegexp?: string[];\n  failIfBodyNotMatchesRegexp?: string[];\n  failIfHeaderMatchesRegexp?: HeaderMatch[];\n  failIfHeaderNotMatchesRegexp?: HeaderMatch[];\n\n  cacheBustingQueryParamName?: string;\n}\n\nexport interface TLSConfig {\n  insecureSkipVerify: boolean;\n  caCert: string;\n  clientCert: string;\n  clientKey: string;\n  serverName: string;\n}\n\nexport interface BasicAuth {\n  username: string;\n  password: string;\n}\n\nexport interface DNSRRValidator {\n  failIfMatchesRegexp: string[];\n  failIfNotMatchesRegexp: string[];\n}\n\n// DnsSettings provides the settings for a DNS check.\nexport interface DnsSettings {\n  recordType: DnsRecordType;\n  server: string;\n  ipVersion: IpVersion;\n  protocol: DnsProtocol;\n  port: number;\n\n  // validation\n  validRCodes?: string[];\n  validateAnswerRRS?: DNSRRValidator;\n  validateAuthorityRRS?: DNSRRValidator;\n  validateAdditionalRRS?: DNSRRValidator;\n}\n\nexport interface TcpSettings {\n  ipVersion: IpVersion;\n  tls: boolean;\n  tlsConfig?: TLSConfig;\n  queryResponse?: TCPQueryResponse[];\n}\n\nexport interface TCPQueryResponse {\n  send: string;\n  expect: string;\n  startTLS: boolean;\n}\n\nexport interface BaseObject {\n  id?: number;\n  tenantId?: number;\n  created?: number; // seconds\n  updated?: number; // seconds\n}\n\nexport interface Label {\n  name: string;\n  value: string;\n}\n\nexport interface Probe extends BaseObject {\n  name: string;\n  public: boolean;\n  latitude: number;\n  longitude: number;\n  region: string;\n  online: boolean;\n  onlineChange: number;\n  labels: Label[];\n}\n\nexport interface Check extends BaseObject {\n  job: string;\n  target: string;\n  frequency: number;\n  offset?: number;\n  timeout: number;\n  enabled: boolean;\n\n  labels: Label[]; // Currently list of [name:value]... can it be Labels?\n  settings: Settings; //\n\n  // Link to probes\n  probes: number[];\n}\n\nexport interface Settings {\n  http?: HttpSettings;\n  ping?: PingSettings;\n  dns?: DnsSettings;\n  tcp?: TcpSettings;\n}\n\nexport enum CheckType {\n  HTTP = 'http',\n  PING = 'ping',\n  DNS = 'dns',\n  TCP = 'tcp',\n}\n\nexport interface HostedInstance {\n  id: number;\n  orgSlug: string;\n  orgName: string;\n  clusterSlug: string;\n  clusterName: string;\n  type: string; // \"prometheus\" \"logs\",\n  name: string;\n  url: string;\n  description: string;\n  status: string;\n  currentActiveSeries: number;\n  currentDpm: number;\n  currentUsage: number;\n}\n\nexport interface RegistrationInfo {\n  accessToken: string;\n  tenantInfo: {\n    id: number;\n    metricInstance: HostedInstance;\n    logInstance: HostedInstance;\n  };\n  instances: HostedInstance[];\n}\n\nexport interface GrafanaInstances {\n  api: SMDataSource;\n  metrics?: DataSourceApi;\n  logs?: DataSourceApi;\n}\n\nexport interface User {\n  email: string;\n  id: number;\n  isGrafanaAdmin: boolean;\n  isSignedIn: boolean;\n  orgId: number;\n  orgName: string;\n  orgRole: OrgRole;\n}\n\nexport enum OrgRole {\n  ADMIN = 'Admin',\n  EDITOR = 'Editor',\n  VIEWER = 'Viewer',\n}\n","import { PluginMeta } from '@grafana/data';\nimport { getLocationSrv, config } from '@grafana/runtime';\n\nexport class ExampleConfigCtrl {\n  static templateUrl = 'legacy/config.html';\n\n  appEditCtrl: any;\n  appModel?: PluginMeta;\n  $q: any;\n  configured: boolean;\n\n  /** @ngInject */\n  constructor($scope: any, $injector: any, $q: any) {\n    this.appEditCtrl.setPostUpdateHook(this.postUpdate.bind(this));\n    this.$q = $q;\n    // Make sure it has a JSON Data spot\n    if (!this.appModel) {\n      this.appModel = {} as PluginMeta;\n    }\n\n    // Required until we get the types sorted on appModel :(\n    const appModel = this.appModel as any;\n    if (!appModel.jsonData) {\n      appModel.jsonData = {};\n    }\n    this.configured = false;\n    if (this.appModel?.enabled) {\n      const datasources = Object.values(config.datasources).filter(ds => {\n        return ds.type === 'synthetic-monitoring-datasource';\n      });\n      if (datasources.length > 0) {\n        this.configured = true;\n      }\n    }\n  }\n\n  postUpdate() {\n    if (!this.appModel?.enabled) {\n      return;\n    }\n    getLocationSrv().update({\n      path: 'a/grafana-synthetic-monitoring-app/?page=config',\n      partial: false,\n    });\n    return this.$q.resolve(true);\n  }\n}\n","import { DataSourceInstanceSettings, DataSourceSettings } from '@grafana/data';\n\nimport { SMOptions, DashboardInfo } from './datasource/types';\n\nimport { config, getBackendSrv } from '@grafana/runtime';\nimport {\n  HostedInstance,\n  User,\n  OrgRole,\n  CheckType,\n  Settings,\n  IpVersion,\n  HttpMethod,\n  DnsRecordType,\n  DnsProtocol,\n} from 'types';\nimport { SMDataSource } from 'datasource/DataSource';\n\n/**\n * Find all synthetic-monitoring datasources\n */\nexport function findSMDataSources(): Array<DataSourceInstanceSettings<SMOptions>> {\n  return Object.values(config.datasources).filter(ds => {\n    return ds.type === 'synthetic-monitoring-datasource';\n  }) as Array<DataSourceInstanceSettings<SMOptions>>;\n}\n\n/** Given hosted info, link to an existing instance */\nexport function findHostedInstance(\n  known: DataSourceInstanceSettings[],\n  info?: HostedInstance\n): DataSourceInstanceSettings | undefined {\n  if (info) {\n    const basicAuthUser = `${info.id}`;\n    const instanceUrl = info.url + (info.type === 'logs' ? '' : '/api/prom');\n    for (const ds of known) {\n      if (ds.url === instanceUrl) {\n        console.log('MAYBE:', basicAuthUser, (ds as any).basicAuthUser, ds);\n        if (basicAuthUser === (ds as any).basicAuthUser) {\n          return ds;\n        }\n      }\n    }\n  }\n  return undefined;\n}\n\n/** Given hosted info, link to an existing instance */\nexport async function getHostedLokiAndPrometheusInfo(): Promise<DataSourceInstanceSettings[]> {\n  const settings: DataSourceInstanceSettings[] = [];\n  for (const ds of Object.values(config.datasources)) {\n    if (ds.type === 'prometheus' || ds.type === 'loki') {\n      const s = await getBackendSrv().get(`api/datasources/${ds.id}`);\n      if (s.url && s.url.indexOf('grafana.net') > 0) {\n        settings.push(s as DataSourceInstanceSettings);\n      }\n    }\n  }\n  return settings;\n}\n\nexport async function createNewApiInstance(): Promise<DataSourceSettings> {\n  return getBackendSrv().post('api/datasources', {\n    name: 'Synthetic Monitoring',\n    type: 'synthetic-monitoring-datasource',\n    access: 'proxy',\n    isDefault: false,\n  });\n}\n\nexport async function createHostedInstance(\n  name: string,\n  info: HostedInstance,\n  key: string\n): Promise<DataSourceInstanceSettings> {\n  const data = {\n    name,\n    url: info.url + (info.type === 'logs' ? '' : '/api/prom'),\n    access: 'proxy',\n    basicAuth: true,\n    basicAuthUser: `${info.id}`,\n    secureJsonData: {\n      basicAuthPassword: key,\n    },\n    type: info.type === 'logs' ? 'loki' : 'prometheus',\n  };\n  return getBackendSrv()\n    .post('api/datasources', data)\n    .then(d => {\n      return d.datasource;\n    });\n}\n\nexport function hasRole(requiredRole: OrgRole): boolean {\n  const user: User = config.bootData.user;\n  switch (requiredRole) {\n    case OrgRole.ADMIN: {\n      return user.orgRole === OrgRole.ADMIN;\n    }\n    case OrgRole.EDITOR: {\n      return user.orgRole === OrgRole.ADMIN || user.orgRole === OrgRole.EDITOR;\n    }\n    case OrgRole.VIEWER: {\n      return user.orgRole === OrgRole.ADMIN || user.orgRole === OrgRole.EDITOR || user.orgRole === OrgRole.VIEWER;\n    }\n    default: {\n      return false;\n    }\n  }\n}\n\nexport function checkType(settings: Settings): CheckType {\n  let types = Object.keys(settings);\n  if (types.length < 1) {\n    return CheckType.HTTP;\n  }\n  return types[0] as CheckType;\n}\n\nexport function defaultSettings(t: CheckType): Settings | undefined {\n  switch (t) {\n    case CheckType.HTTP: {\n      return {\n        http: {\n          method: HttpMethod.GET,\n          ipVersion: IpVersion.V4,\n          noFollowRedirects: false,\n        },\n      };\n    }\n    case CheckType.PING: {\n      return {\n        ping: {\n          ipVersion: IpVersion.V4,\n          dontFragment: false,\n        },\n      };\n    }\n    case CheckType.DNS: {\n      return {\n        dns: {\n          recordType: DnsRecordType.A,\n          server: '8.8.8.8',\n          ipVersion: IpVersion.V4,\n          protocol: DnsProtocol.UDP,\n          port: 53,\n        },\n      };\n    }\n    case CheckType.TCP: {\n      return {\n        tcp: {\n          ipVersion: IpVersion.V4,\n          tls: false,\n        },\n      };\n    }\n  }\n}\n\n/** Given hosted info, link to an existing instance */\nexport function dashboardUID(checkType: string, ds: SMDataSource): DashboardInfo | undefined {\n  const dashboards = ds.instanceSettings.jsonData.dashboards;\n  let target: DashboardInfo | undefined = undefined;\n  for (const item of dashboards) {\n    if (item.json.toLocaleLowerCase() === `sm-${checkType}.json`) {\n      target = item;\n    }\n  }\n  return target;\n}\n","import React, { PureComponent } from 'react';\nimport { Button, LinkButton } from '@grafana/ui';\nimport { HostedInstance } from 'types';\nimport { css } from 'emotion';\n\ninterface Props {\n  selected: number;\n  instances: HostedInstance[];\n  onSelected: (id: number) => void;\n}\n\nexport class InstanceList extends PureComponent<Props> {\n  render() {\n    const { selected } = this.props;\n    return (\n      <div>\n        {this.props.instances.map(instance => {\n          const isSelected = selected === instance.id;\n          let logo = 'public/app/plugins/datasource/prometheus/img/prometheus_logo.svg';\n          let hostedType = 'metrics';\n          if (instance.type === 'logs') {\n            logo = 'public/app/plugins/datasource/loki/img/loki_icon.svg';\n            hostedType = 'logs';\n          }\n\n          let className = 'add-data-source-item';\n          if (isSelected) {\n            // 1px solid $blue-light;\n            className += ' ' + css(`border:1px solid #5794f2`);\n          }\n\n          return (\n            <div key={instance.id} className={className} onClick={() => this.props.onSelected(instance.id)}>\n              <img className=\"add-data-source-item-logo\" src={logo} />\n              <div className=\"add-data-source-item-text-wrapper\">\n                <span className=\"add-data-source-item-text\">{instance.name}</span>\n                <span className=\"add-data-source-item-desc\">{instance.url}</span>\n              </div>\n              <div className=\"add-data-source-item-actions\">\n                <LinkButton\n                  variant=\"secondary\"\n                  href={`https://grafana.com/orgs/${instance.orgSlug}/hosted-${hostedType}/${instance.id}?utm_source=synthetic_monitoring_app`}\n                  target=\"_blank\"\n                  rel=\"noopener\"\n                  icon=\"external-link-alt\"\n                >\n                  grafana.com\n                </LinkButton>\n                {!isSelected && <Button>Select</Button>}\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    );\n  }\n}\n","import { getBackendSrv } from '@grafana/runtime';\nimport { DashboardInfo, FolderInfo, SMOptions } from 'datasource/types';\n\nexport const dashboardPaths = [\n  'sm-http.json', // The path\n  'sm-ping.json',\n  'sm-dns.json',\n  'sm-tcp.json',\n  'sm-summary.json',\n];\n\nasync function findSyntheticMonitoringFolder(): Promise<FolderInfo> {\n  const backendSrv = getBackendSrv();\n  const folders = (await backendSrv.get(`api/folders`)) as FolderInfo[];\n  for (const folder of folders) {\n    if (folder.title === 'SyntheticMonitoring') {\n      return folder;\n    }\n  }\n\n  return await backendSrv.post('api/folders', {\n    title: 'SyntheticMonitoring',\n  });\n}\n\nexport async function importDashboard(path: string, options: SMOptions): Promise<DashboardInfo> {\n  const backendSrv = getBackendSrv();\n\n  const json = await backendSrv.get(`public/plugins/grafana-synthetic-monitoring-app/dashboards/${path}`);\n\n  const folder = await findSyntheticMonitoringFolder();\n\n  const info = await backendSrv.post('api/dashboards/import', {\n    dashboard: json,\n    overwrite: true, // UID?\n    inputs: [\n      { name: 'DS_SM_METRICS', type: 'datasource', pluginId: 'prometheus', value: options.metrics.grafanaName },\n      { name: 'DS_SM_LOGS', type: 'datasource', pluginId: 'loki', value: options.logs.grafanaName },\n    ],\n    folderId: folder.id,\n  });\n\n  return {\n    title: info.title,\n    uid: json.uid,\n    json: path,\n    version: json.version,\n    latestVersion: json.version,\n  };\n}\n\nexport async function listAppDashboards(): Promise<DashboardInfo[]> {\n  const backendSrv = getBackendSrv();\n  let dashboards: DashboardInfo[] = [];\n  for (const p of dashboardPaths) {\n    const json = await backendSrv.get(`public/plugins/grafana-synthetic-monitoring-app/dashboards/${p}`);\n\n    const dInfo = {\n      title: json.title,\n      uid: json.uid,\n      json: p,\n      version: 0,\n      latestVersion: json.version,\n    };\n    dashboards.push(dInfo);\n  }\n  return dashboards;\n}\n\nexport async function removeDashboard(dashboard: DashboardInfo): Promise<any> {\n  const backendSrv = getBackendSrv();\n  return backendSrv.delete(`/api/dashboards/uid/${dashboard.uid}`);\n}\n","import React, { PureComponent } from 'react';\nimport { Icon } from '@grafana/ui';\nimport { DashboardInfo, SMOptions } from 'datasource/types';\nimport { listAppDashboards, importDashboard, removeDashboard } from 'dashboards/loader';\n\ninterface Props {\n  checkUpdates: boolean;\n  options: SMOptions;\n  onChange?: (options: SMOptions) => void;\n}\n\ninterface State {\n  dashboards: DashboardInfo[];\n}\n\nexport class DashboardList extends PureComponent<Props, State> {\n  state: State = {\n    dashboards: this.props.options.dashboards,\n  };\n\n  async componentDidMount() {\n    const { checkUpdates, onChange } = this.props;\n    if (!checkUpdates || !onChange) {\n      return;\n    }\n\n    // merge dashboards known to grafana with latest in the app.\n    let dashboards = [...this.state.dashboards];\n    const latestDashboards = await listAppDashboards();\n    for (const dashboard of latestDashboards) {\n      let i = dashboards.findIndex(item => {\n        return item.uid === dashboard.uid;\n      });\n      if (i < 0) {\n        dashboards.push(dashboard);\n      } else {\n        dashboards[i].latestVersion = dashboard.latestVersion;\n        if (!dashboards[i].version) {\n          dashboards[i].version = -1;\n        }\n      }\n    }\n    console.log(dashboards);\n    this.setState({ dashboards });\n  }\n\n  onImport = (dashboard: DashboardInfo) => async () => {\n    const { onChange } = this.props;\n    if (!onChange) {\n      return;\n    }\n    let options = { ...this.props.options };\n    const updated = await importDashboard(dashboard.json, options);\n    console.log('dashboard updated');\n    let i = options.dashboards.findIndex(item => {\n      return item.uid === updated.uid;\n    });\n    if (i < 0) {\n      options.dashboards.push(updated);\n    } else {\n      options.dashboards[i] = updated;\n    }\n\n    let dashboards = [...this.state.dashboards];\n    i = dashboards.findIndex(item => {\n      return item.uid === updated.uid;\n    });\n    if (i < 0) {\n      dashboards.push(updated);\n    } else {\n      dashboards[i] = updated;\n    }\n\n    this.setState({ dashboards });\n    return onChange(options);\n  };\n\n  onRemove = (dashboard: DashboardInfo) => async () => {\n    const { onChange } = this.props;\n    if (!onChange) {\n      return;\n    }\n    let options = { ...this.props.options };\n    await removeDashboard(dashboard);\n\n    let i = options.dashboards.findIndex(item => {\n      return item.uid === dashboard.uid;\n    });\n\n    if (i >= 0) {\n      options.dashboards.splice(i, 1);\n    }\n\n    let dashboards = [...this.state.dashboards];\n    i = dashboards.findIndex(item => {\n      return item.uid === dashboard.uid;\n    });\n    if (i >= 0) {\n      dashboards[i].version = 0;\n    }\n\n    this.setState({ dashboards });\n    return onChange(options);\n  };\n\n  withImports(dashboard: DashboardInfo) {\n    const { checkUpdates } = this.props;\n    if (!checkUpdates) {\n      return;\n    }\n    function buttonText(dashboard: DashboardInfo) {\n      return (dashboard.latestVersion || 0) > (dashboard.version || 0) ? 'Update' : 'Re-import';\n    }\n    return (\n      <td style={{ textAlign: 'right' }}>\n        {dashboard.version === 0 ? (\n          <button className=\"btn btn-secondary btn-small\" onClick={this.onImport(dashboard)}>\n            Import\n          </button>\n        ) : (\n          <button className=\"btn btn-secondary btn-small\" onClick={this.onImport(dashboard)}>\n            {buttonText(dashboard)}\n          </button>\n        )}\n        {dashboard.version !== 0 && (\n          <button className=\"btn btn-danger btn-small\" onClick={this.onRemove(dashboard)}>\n            <Icon name=\"trash-alt\" />\n          </button>\n        )}\n      </td>\n    );\n  }\n\n  render() {\n    const { dashboards } = this.state;\n\n    return (\n      <div>\n        <h3>Dashboards:</h3>\n        <table className=\"filter-table\">\n          <tbody>\n            {dashboards.map(d => {\n              return (\n                <tr key={d.uid}>\n                  <td className=\"width-1\">\n                    <Icon name=\"apps\" />\n                  </td>\n                  <td>\n                    <a href={`d/${d.uid}/`}>{d.title}</a>\n                  </td>\n                  {this.withImports(d)}\n                </tr>\n              );\n            })}\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n}\n","import React, { PureComponent, ChangeEvent } from 'react';\nimport { Field, Button, Input, ConfirmModal, HorizontalGroup, Collapse, InfoBox, Alert, Container } from '@grafana/ui';\nimport { RegistrationInfo, HostedInstance } from 'types';\nimport { SMDataSource } from 'datasource/DataSource';\nimport { isValid } from 'datasource/ConfigEditor';\nimport { InstanceList } from './InstanceList';\nimport { createHostedInstance, findHostedInstance, getHostedLokiAndPrometheusInfo } from 'utils';\nimport { SMOptions } from 'datasource/types';\nimport { TenantView } from './TenantView';\nimport { dashboardPaths, importDashboard } from 'dashboards/loader';\nimport { DashboardList } from './DashboardList';\n\ninterface Props {\n  instance: SMDataSource;\n}\n\ninterface State {\n  showAdvanced: boolean;\n  apiHost?: string;\n  adminApiToken?: string;\n  userError?: string;\n  backendError?: string;\n  info?: RegistrationInfo;\n  logsInstance?: number;\n  metricsInstance?: number;\n  showResetModal: boolean;\n  resetConfig: boolean;\n}\n\nexport class TenantSetup extends PureComponent<Props, State> {\n  defaultApiHost = 'https://synthetic-monitoring-api.grafana.net';\n\n  state: State = {\n    showResetModal: false,\n    resetConfig: false,\n    apiHost: this.defaultApiHost,\n    showAdvanced: false,\n  };\n\n  onInit = async () => {\n    const { instance } = this.props;\n    const { adminApiToken, apiHost } = this.state;\n    if (!adminApiToken) {\n      alert('Missing admin key');\n      return;\n    }\n    if (!apiHost) {\n      alert('Missing apiHost');\n      return;\n    }\n\n    const info = await instance.registerInit(apiHost, adminApiToken).catch(err => {\n      console.error('failed to init. ', err);\n      if (err.data.msg) {\n        this.setState({ userError: err.data.msg, backendError: undefined });\n        return;\n      }\n      let msg = 'failed to initialize with provided Admin API Key';\n      if (err.statusText) {\n        msg = `${err.status}: ${err.statusText}`;\n      }\n      this.setState({ backendError: msg, userError: undefined });\n    });\n    if (!info) {\n      console.log('info not returned from registerInit');\n      return;\n    }\n    this.setState({\n      info,\n      logsInstance: info.tenantInfo?.logInstance?.id,\n      metricsInstance: info.tenantInfo?.metricInstance?.id,\n      userError: undefined,\n      backendError: undefined,\n    });\n  };\n\n  onApiHostChange = (event: ChangeEvent<any>) => {\n    this.setState({ apiHost: event.target.value });\n  };\n\n  onApiTokenChange = (event: ChangeEvent<any>) => {\n    this.setState({ adminApiToken: event.target.value });\n  };\n\n  onSelectLogs = (id: number) => {\n    this.setState({ logsInstance: id });\n  };\n  onSelectMetrics = (id: number) => {\n    this.setState({ metricsInstance: id });\n  };\n\n  createDataSource = async (name: string, hosted: HostedInstance) => {\n    const { instance } = this.props;\n    const { adminApiToken } = this.state;\n    try {\n      const token = await instance.getViewerToken(adminApiToken!, hosted!);\n      if (token) {\n        return await createHostedInstance(name, hosted!, token);\n      }\n      console.error('error getting token');\n      return undefined;\n    } catch (ex) {\n      console.log('Error creating', name, hosted, ex);\n    }\n    return undefined;\n  };\n\n  onSave = async () => {\n    const { instance } = this.props;\n    const { info, adminApiToken, apiHost } = this.state;\n    const name = instance?.instanceSettings.name;\n\n    const hostedMetrics = info?.instances.find(i => i.id === this.state.metricsInstance);\n    const hostedLogs = info?.instances.find(i => i.id === this.state.logsInstance);\n\n    if (!hostedMetrics) {\n      alert('Missing metrics instance');\n      return;\n    }\n\n    if (!hostedLogs) {\n      alert('Missing logs instance');\n      return;\n    }\n\n    if (!apiHost) {\n      alert('Missing apiHost');\n      return;\n    }\n\n    const known = await getHostedLokiAndPrometheusInfo();\n\n    let metrics = findHostedInstance(known, hostedMetrics);\n    if (!metrics) {\n      metrics = await this.createDataSource(`${name} Metrics`, hostedMetrics!);\n    }\n\n    let logs = findHostedInstance(known, hostedLogs);\n    if (!logs) {\n      logs = await this.createDataSource(`${name} Logs`, hostedLogs!);\n    }\n\n    const options: SMOptions = {\n      apiHost: apiHost,\n      logs: {\n        grafanaName: logs!.name,\n        hostedId: hostedLogs.id,\n      },\n      metrics: {\n        grafanaName: metrics!.name,\n        hostedId: hostedMetrics.id,\n      },\n      dashboards: [],\n    };\n\n    // Save the dashboard names\n    for (const json of dashboardPaths) {\n      const d = await importDashboard(json, options);\n      options.dashboards.push(d);\n    }\n    await instance!.registerSave(adminApiToken!, options, info?.accessToken!);\n\n    // force reload so that GrafanaBootConfig is updated.\n    window.location.reload();\n  };\n\n  onToggleAdvanced = (isOpen: boolean) => {\n    this.setState({ showAdvanced: !this.state.showAdvanced });\n  };\n\n  renderSetup() {\n    const {\n      info,\n      adminApiToken,\n      apiHost,\n      logsInstance,\n      metricsInstance,\n      showAdvanced,\n      userError,\n      backendError,\n    } = this.state;\n\n    if (!info) {\n      return (\n        <div>\n          <HorizontalGroup wrap={true}>\n            <InfoBox\n              title=\"Initialize Synthetic Monitoring App\"\n              url={'https://grafana.com/grafana/plugins/grafana-synthetic-monitoring-app/'}\n            >\n              <p>\n                To initialize the App and connect it to your Grafana Cloud service you will need a Admin API key for you\n                Grafana.com account. The <b>API key</b> is only needed for the initialization process and will not be\n                stored. Once the initialization is complete you can safely delete the key.\n                <br />\n                <br />\n                <a className=\"highlight-word\" href=\"//grafana.com/profile/api-keys\" target=\"_blank\">\n                  Generate a new API key\n                </a>\n              </p>\n            </InfoBox>\n            <Field label=\"Admin API Key\" error={userError} invalid={userError !== undefined}>\n              <Input\n                type=\"text\"\n                width={100}\n                placeholder=\"Grafana.com Admin Api Key\"\n                value={adminApiToken || ''}\n                onChange={this.onApiTokenChange}\n              />\n            </Field>\n          </HorizontalGroup>\n          <br />\n          <Collapse label=\"Advanced\" collapsible={true} onToggle={this.onToggleAdvanced} isOpen={showAdvanced}>\n            <HorizontalGroup>\n              <Field label=\"Backend Address\">\n                <Input\n                  type=\"text\"\n                  width={40}\n                  placeholder=\"Synthetic Monitoring Backend Address\"\n                  value={apiHost || this.defaultApiHost}\n                  onChange={this.onApiHostChange}\n                />\n              </Field>\n            </HorizontalGroup>\n          </Collapse>\n          <Button variant=\"primary\" onClick={this.onInit}>\n            Initalize\n          </Button>\n          {backendError !== undefined && (\n            <Container margin=\"md\">\n              <Alert title=\"Backend Error\" severity=\"error\">\n                {backendError}\n              </Alert>\n            </Container>\n          )}\n        </div>\n      );\n    }\n    return (\n      <div>\n        <div>Select the Grafana Cloud instances Synthetic Monitoring will send data to</div>\n\n        <h4>Metrics</h4>\n        <InstanceList\n          instances={info.instances.filter(f => f.type === 'prometheus')}\n          onSelected={this.onSelectMetrics}\n          selected={metricsInstance!}\n        />\n\n        <h4>Logs</h4>\n        <InstanceList\n          instances={info.instances.filter(f => f.type === 'logs')}\n          onSelected={this.onSelectLogs}\n          selected={logsInstance!}\n        />\n        <br />\n        <br />\n        <Button variant=\"primary\" onClick={this.onSave}>\n          Setup\n        </Button>\n      </div>\n    );\n  }\n\n  showResetModal = (show: boolean) => () => {\n    this.setState({ showResetModal: show });\n  };\n\n  onReset = () => {\n    this.setState({ resetConfig: true });\n  };\n\n  onOptionsChange = (options: SMOptions) => {\n    const { instance } = this.props;\n    return instance.onOptionsChange(options);\n  };\n\n  render() {\n    const { instance } = this.props;\n    if (!instance) {\n      return <div>Loading...</div>;\n    }\n    const { showResetModal, resetConfig } = this.state;\n\n    if (!isValid(instance.instanceSettings?.jsonData) || resetConfig) {\n      return this.renderSetup();\n    }\n\n    return (\n      <div>\n        <DashboardList\n          options={instance.instanceSettings.jsonData}\n          checkUpdates={true}\n          onChange={this.onOptionsChange}\n        />\n        <br />\n        <TenantView settings={instance.instanceSettings.jsonData} />\n        <Button variant=\"destructive\" onClick={this.showResetModal(true)}>\n          Reset\n        </Button>\n        <ConfirmModal\n          isOpen={showResetModal}\n          title=\"Reset Configuration\"\n          body=\"Are you sure you want to reset the configuration?\"\n          confirmText=\"Reset Configuration\"\n          onConfirm={this.onReset}\n          onDismiss={this.showResetModal(false)}\n        />\n      </div>\n    );\n  }\n}\n","import { Check, CheckType, Settings, HttpSettings, PingSettings, DnsSettings, TcpSettings, Label } from 'types';\nimport { checkType } from 'utils';\n\nexport const CheckValidation = {\n  job: validateJob,\n  target: validateTarget,\n  frequency: validateFrequency,\n  timeout: validateTimeout,\n  labels: validateLabels,\n  settings: validateSettings,\n  probes: validateProbes,\n};\n\nexport function validateCheck(check: Check): boolean {\n  return (\n    CheckValidation.job(check.job) &&\n    CheckValidation.target(checkType(check.settings), check.target) &&\n    CheckValidation.frequency(check.frequency) &&\n    CheckValidation.timeout(check.timeout) &&\n    CheckValidation.labels(check.labels) &&\n    CheckValidation.settings(check.settings) &&\n    CheckValidation.probes(check.probes)\n  );\n}\n\nexport function validateJob(job: string): boolean {\n  return job.length > 0 && job.length <= 32;\n}\n\nexport function validateTarget(typeOfCheck: CheckType, target: string): boolean {\n  if (!(target.length > 0 && target.length <= 64)) {\n    return false;\n  }\n\n  switch (typeOfCheck) {\n    case CheckType.HTTP: {\n      return validateHttpTarget(target);\n    }\n    default: {\n      return true;\n    }\n  }\n}\n\nexport function validateFrequency(freq: number): boolean {\n  return freq >= 10000 && freq <= 120000;\n}\n\nexport function validateTimeout(t: number): boolean {\n  return t >= 1000 && t <= 10000;\n}\n\nexport function validateLabels(labels: Label[]): boolean {\n  if (labels.length < 0 || labels.length > 5) {\n    return false;\n  }\n  // validate each label\n  for (const l of labels) {\n    if (!validateLabel(l)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nconst labelRegex = /^[a-zA-Z_][a-zA-Z0-9_]*$/;\n\nexport function validateLabel(label: Label): boolean {\n  return validateLabelName(label.name) && validateLabelValue(label.value);\n}\n\nexport function validateLabelName(name: string): boolean {\n  if (name.length < 1 || name.length > 32) {\n    return false;\n  }\n\n  return labelRegex.test(name);\n}\n\nexport function validateLabelValue(value: string): boolean {\n  return value.length > 0 && value.length <= 32;\n}\n\nexport function validateSettings(settings: Settings): boolean {\n  let checkT = checkType(settings);\n  if (!settings[checkT]) {\n    return false;\n  }\n\n  switch (checkT) {\n    case CheckType.HTTP: {\n      return validateSettingsHTTP(settings.http!);\n    }\n    case CheckType.PING: {\n      return validateSettingsPING(settings.ping!);\n    }\n    case CheckType.DNS: {\n      return validateSettingsDNS(settings.dns!);\n    }\n    case CheckType.TCP: {\n      return validateSettingsTCP(settings.tcp!);\n    }\n  }\n}\n\nexport function validateProbes(probes: number[]): boolean {\n  return probes.length > 0 && probes.length <= 64;\n}\n\nexport function validateSettingsHTTP(settings: HttpSettings): boolean {\n  return true;\n}\n\nexport function validateSettingsPING(settings: PingSettings): boolean {\n  return true;\n}\n\nexport function validateSettingsDNS(settings: DnsSettings): boolean {\n  return true;\n}\n\nexport function validateSettingsTCP(settings: TcpSettings): boolean {\n  return true;\n}\n\nfunction validateHttpTarget(target: string): boolean {\n  try {\n    let url = new URL(target);\n    return url.protocol === 'https:' || url.protocol === 'http:';\n  } catch (_) {\n    return false;\n  }\n}\n","import React, { PureComponent } from 'react';\nimport { Icon, IconButton, HorizontalGroup, List, Input, VerticalGroup, Button } from '@grafana/ui';\nimport { Label as SMLabel, IpVersion } from 'types';\nimport * as Validation from 'validation';\n\ninterface LabelsProps {\n  labels: SMLabel[];\n  isEditor: boolean;\n  type: string;\n  limit: number;\n  onUpdate: (labels: SMLabel[]) => void;\n}\n\ninterface LabelsState {\n  labels: SMLabel[];\n  numLabels: number;\n}\n\nexport class SMLabelsForm extends PureComponent<LabelsProps, LabelsState> {\n  state = {\n    labels: this.props.labels || [],\n    numLabels: this.props.labels.length,\n  };\n\n  addLabel = () => {\n    let labels = this.state.labels;\n    console.log('adding new label', labels);\n    const n = labels.push({ name: '', value: '' });\n\n    this.setState({ labels: labels, numLabels: n }, this.onUpdate);\n  };\n\n  onDelete = (index: number) => {\n    let labels = this.state.labels;\n    labels.splice(index, 1);\n    this.setState({ labels: labels, numLabels: labels.length }, this.onUpdate);\n  };\n\n  onUpdate = () => {\n    this.props.onUpdate(this.state.labels);\n  };\n\n  onChange = (index: number, label: SMLabel) => {\n    let labels = this.state.labels;\n    labels[index] = label;\n    this.setState({ labels: labels }, this.onUpdate);\n  };\n\n  render() {\n    const { labels } = this.state;\n    const { isEditor, limit } = this.props;\n    return (\n      <VerticalGroup justify=\"space-between\">\n        <List\n          items={labels}\n          renderItem={(item, index) => (\n            <SMLabelForm\n              onDelete={this.onDelete}\n              onChange={this.onChange}\n              label={item}\n              index={index}\n              isEditor={isEditor}\n            />\n          )}\n        />\n        {labels.length < limit && (\n          <Button onClick={this.addLabel} disabled={!isEditor} variant=\"secondary\" size=\"sm\">\n            <Icon name=\"plus\" />\n            &nbsp; Add {this.props.type}\n          </Button>\n        )}\n      </VerticalGroup>\n    );\n  }\n}\n\ninterface LabelProps {\n  label: SMLabel;\n  index: number;\n  isEditor: boolean;\n  onDelete: (index: number) => void;\n  onChange: (index: number, label: SMLabel) => void;\n}\n\ninterface LabelState {\n  name: string;\n  value: string;\n}\n\nexport class SMLabelForm extends PureComponent<LabelProps, LabelState> {\n  state = {\n    name: this.props.label.name,\n    value: this.props.label.value,\n  };\n\n  componentDidUpdate(oldProps: LabelProps) {\n    const { label, index } = this.props;\n    if (label !== oldProps.label || index !== oldProps.index) {\n      this.setState({ name: this.props.label.name, value: this.props.label.value });\n    }\n  }\n\n  onNameChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ name: event.target.value }, this.onChange);\n  };\n\n  onValueChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ value: event.target.value }, this.onChange);\n  };\n\n  onDelete = () => {\n    this.props.onDelete(this.props.index);\n  };\n\n  onChange = () => {\n    this.props.onChange(this.props.index, { name: this.state.name, value: this.state.value });\n  };\n\n  render() {\n    const { name, value } = this.state;\n    const { isEditor } = this.props;\n    console.log('rendering label with name:', name);\n    return (\n      <HorizontalGroup justify=\"space-between\">\n        <Input\n          type=\"text\"\n          placeholder=\"name\"\n          value={name}\n          onChange={this.onNameChange}\n          disabled={!isEditor}\n          invalid={!Validation.validateLabelName(name)}\n        />\n        <Input\n          type=\"text\"\n          placeholder=\"value\"\n          value={value}\n          onChange={this.onValueChange}\n          disabled={!isEditor}\n          invalid={!Validation.validateLabelValue(value)}\n        />\n        <IconButton name=\"minus-circle\" onClick={this.onDelete} disabled={!isEditor} />\n      </HorizontalGroup>\n    );\n  }\n}\n\nexport const IpOptions = [\n  {\n    label: 'Any',\n    value: IpVersion.Any,\n  },\n  {\n    label: 'V4',\n    value: IpVersion.V4,\n  },\n  {\n    label: 'V6',\n    value: IpVersion.V6,\n  },\n];\n","import React, { PureComponent } from 'react';\nimport { Collapse, Container, HorizontalGroup, Field, Select, Switch } from '@grafana/ui';\nimport { SelectableValue } from '@grafana/data';\nimport { IpVersion, Settings, PingSettings } from 'types';\nimport { IpOptions } from './utils';\n\ninterface Props {\n  settings: Settings;\n  isEditor: boolean;\n  onUpdate: (settings: Settings) => void;\n}\n\ninterface State extends PingSettings {\n  showAdvanced: boolean;\n}\n\nexport class PingSettingsForm extends PureComponent<Props, State> {\n  state: State = {\n    ipVersion: this.props.settings!.ping?.ipVersion || IpVersion.V4,\n    dontFragment: this.props.settings!.ping?.dontFragment || false,\n    showAdvanced: false,\n  };\n\n  onUpdate = () => {\n    const settings = this.state as PingSettings;\n    this.props.onUpdate({\n      ping: settings,\n    });\n  };\n\n  onIpVersionChange = (value: SelectableValue<IpVersion>) => {\n    this.setState({ ipVersion: value.value || IpVersion.Any }, this.onUpdate);\n  };\n\n  onDontFragmentChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ dontFragment: !this.state.dontFragment }, this.onUpdate);\n  };\n\n  onToggleOptions = (isOpen: boolean) => {\n    this.setState({ showAdvanced: !this.state.showAdvanced });\n  };\n\n  render() {\n    const { ipVersion, dontFragment, showAdvanced } = this.state;\n    const { isEditor } = this.props;\n\n    return (\n      <Container>\n        <Collapse label=\"Advanced Options\" collapsible={true} onToggle={this.onToggleOptions} isOpen={showAdvanced}>\n          <HorizontalGroup>\n            <div>\n              <Field label=\"IP Version\" description=\"The IP protocol of the ICMP request\" disabled={!isEditor}>\n                <Select value={ipVersion} options={IpOptions} onChange={this.onIpVersionChange} />\n              </Field>\n            </div>\n            <div>\n              <Field\n                label=\"Don't Fragment\"\n                description=\"Set the DF-bit in the IP-header. Only works with ipV4\"\n                disabled={!isEditor}\n              >\n                <Container padding=\"sm\">\n                  <Switch value={dontFragment} onChange={this.onDontFragmentChange} disabled={!isEditor} />\n                </Container>\n              </Field>\n            </div>\n          </HorizontalGroup>\n        </Collapse>\n      </Container>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport { css } from 'emotion';\nimport { Collapse, Container, HorizontalGroup, Field, Switch, Input, VerticalGroup } from '@grafana/ui';\nimport { BasicAuth } from 'types';\n\ninterface Props {\n  bearerToken?: string;\n  basicAuth?: BasicAuth;\n  isEditor: boolean;\n  onUpdate: (bearerToken: string | undefined, basicAuth: BasicAuth | undefined) => void;\n}\n\ninterface State {\n  hasBasicAuth: boolean;\n  hasBearerToken: boolean;\n  basicAuth?: BasicAuth;\n  token?: string;\n  showAuthentication: boolean;\n}\n\nexport class AuthSettings extends PureComponent<Props, State> {\n  state: State = {\n    hasBasicAuth: false,\n    hasBearerToken: false,\n    showAuthentication: false,\n  };\n\n  componentDidMount() {\n    const { bearerToken, basicAuth } = this.props;\n    let hasBearerToken = false;\n    let hasBasicAuth = false;\n    if (bearerToken && bearerToken.length > 0) {\n      hasBearerToken = true;\n    } else if (basicAuth && (basicAuth.username.length > 0 || basicAuth.password.length > 0)) {\n      hasBasicAuth = true;\n    }\n\n    this.setState({\n      hasBasicAuth: hasBasicAuth,\n      hasBearerToken: hasBearerToken,\n      token: bearerToken,\n      basicAuth: basicAuth,\n    });\n  }\n\n  onUpdate = () => {\n    this.props.onUpdate(this.state.token, this.state.basicAuth);\n  };\n\n  onToggleAuthentication = (isOpen: boolean) => {\n    this.setState({ showAuthentication: !this.state.showAuthentication });\n  };\n\n  onBearerTokenChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ token: event.target.value }, this.onUpdate);\n  };\n\n  onBasicAuthChange = (basicAuth: BasicAuth | undefined) => {\n    let { hasBasicAuth, hasBearerToken, token } = this.state;\n    if (basicAuth) {\n      hasBasicAuth = true;\n      hasBearerToken = false;\n      token = undefined;\n    } else {\n      hasBasicAuth = false;\n    }\n    this.setState({ basicAuth, hasBasicAuth, hasBearerToken, token }, this.onUpdate);\n  };\n\n  onHasBearerAuth = (event: React.ChangeEvent<HTMLInputElement>) => {\n    let { hasBasicAuth, basicAuth, hasBearerToken, token } = this.state;\n\n    if (hasBearerToken) {\n      // if hasBearerToken is set, then we are now removing BearerToken\n      token = undefined;\n    } else if (hasBasicAuth) {\n      // if we are turning on hasBearerToken, then we must turn off basicAuth\n      hasBasicAuth = false;\n      basicAuth = undefined;\n    }\n    hasBearerToken = !hasBearerToken;\n    this.setState({ hasBasicAuth, basicAuth, hasBearerToken, token }, this.onUpdate);\n  };\n\n  render() {\n    const { showAuthentication, hasBearerToken, token, basicAuth } = this.state;\n    const { isEditor } = this.props;\n\n    return (\n      <Collapse\n        label=\"Authentication\"\n        collapsible={true}\n        onToggle={this.onToggleAuthentication}\n        isOpen={showAuthentication}\n      >\n        <VerticalGroup spacing=\"xs\">\n          <Field\n            label=\"Bearer Token\"\n            description=\"Include bearer Authorization header in request\"\n            disabled={!isEditor}\n            horizontal={true}\n            className={\n              !hasBearerToken\n                ? undefined\n                : css`\n                    margin-bottom: 1px;\n                  `\n            }\n          >\n            <Container margin=\"sm\">\n              <Switch value={hasBearerToken} onChange={this.onHasBearerAuth} disabled={!isEditor} />\n            </Container>\n          </Field>\n          {hasBearerToken && (\n            <VerticalGroup>\n              <Input\n                type=\"password\"\n                placeholder=\"Bearer Token\"\n                value={token}\n                onChange={this.onBearerTokenChange}\n                disabled={!isEditor}\n              />\n              <br />\n            </VerticalGroup>\n          )}\n        </VerticalGroup>\n        <BasicAuthForm onChange={this.onBasicAuthChange} basicAuth={basicAuth} isEditor={isEditor} />\n      </Collapse>\n    );\n  }\n}\n\ninterface BasicAuthProps {\n  basicAuth?: BasicAuth;\n  isEditor: boolean;\n  onChange: (basicAuth: BasicAuth | undefined) => void;\n}\n\ninterface BasicAuthState {\n  username: string;\n  password: string;\n  hasBasicAuth: boolean;\n}\n\nexport class BasicAuthForm extends PureComponent<BasicAuthProps, BasicAuthState> {\n  state = {\n    username: this.props.basicAuth?.username || '',\n    password: this.props.basicAuth?.password || '',\n    hasBasicAuth: this.props.basicAuth ? true : false,\n  };\n\n  componentDidUpdate(oldProps: BasicAuthProps) {\n    this.setState({\n      username: this.props.basicAuth?.username || '',\n      password: this.props.basicAuth?.password || '',\n      hasBasicAuth: this.props.basicAuth ? true : false,\n    });\n  }\n\n  onUpdate = () => {\n    if (!this.state.hasBasicAuth) {\n      this.props.onChange(undefined);\n      return;\n    }\n    const auth = {\n      username: this.state.username,\n      password: this.state.password,\n    };\n    this.props.onChange(auth);\n  };\n\n  onUsernameChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ username: event.target.value }, this.onUpdate);\n  };\n\n  onPasswordChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ password: event.target.value }, this.onUpdate);\n  };\n\n  onHasBasicAuth = (event: React.ChangeEvent<HTMLInputElement>) => {\n    let { hasBasicAuth, username, password } = this.state;\n\n    if (hasBasicAuth) {\n      // if hasBasicAuth is set, then we are now removing basicAuth\n      username = '';\n      password = '';\n    }\n    hasBasicAuth = !hasBasicAuth;\n    this.setState({ hasBasicAuth, username, password }, this.onUpdate);\n  };\n\n  render() {\n    const { username, password, hasBasicAuth } = this.state;\n    const { isEditor } = this.props;\n\n    return (\n      <VerticalGroup spacing=\"xs\">\n        <Field\n          label=\"Basic Auth\"\n          description=\"Include Basic Authorization header in request\"\n          disabled={!isEditor}\n          horizontal={true}\n          className={\n            !hasBasicAuth\n              ? undefined\n              : css`\n                  margin-bottom: 1px;\n                `\n          }\n        >\n          <Container margin=\"sm\">\n            <Switch value={hasBasicAuth} onChange={this.onHasBasicAuth} disabled={!isEditor} />\n          </Container>\n        </Field>\n        {hasBasicAuth && (\n          <HorizontalGroup>\n            <Input\n              type=\"text\"\n              placeholder=\"username\"\n              value={username}\n              onChange={this.onUsernameChange}\n              disabled={!isEditor}\n            />\n            <Input\n              type=\"password\"\n              placeholder=\"password\"\n              value={password}\n              onChange={this.onPasswordChange}\n              disabled={!isEditor}\n            />\n          </HorizontalGroup>\n        )}\n      </VerticalGroup>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport {\n  Collapse,\n  Container,\n  HorizontalGroup,\n  Field,\n  Select,\n  Switch,\n  MultiSelect,\n  TextArea,\n  List,\n  IconButton,\n  Input,\n  Button,\n  Icon,\n  VerticalGroup,\n} from '@grafana/ui';\nimport { SelectableValue } from '@grafana/data';\nimport { IpVersion, Settings, HttpSettings, HttpMethod, HttpVersion, BasicAuth, TLSConfig, HeaderMatch } from 'types';\nimport { SMLabelsForm, IpOptions } from '../utils';\nimport { Label as SMLabel } from 'types';\nimport { AuthSettings } from './AuthSettings';\n\ninterface Props {\n  settings: Settings;\n  isEditor: boolean;\n  onUpdate: (settings: Settings) => void;\n}\n\ninterface State extends HttpSettings {\n  showAdvanced: boolean;\n  showValidation: boolean;\n  showAuthentication: boolean;\n  showTLS: boolean;\n}\n\nexport class HttpSettingsForm extends PureComponent<Props, State> {\n  state: State = {\n    method: this.props.settings.http?.method || HttpMethod.GET,\n    body: this.props.settings.http?.body,\n    headers: this.props.settings.http?.headers,\n    ipVersion: this.props.settings.http?.ipVersion || IpVersion.V4,\n    noFollowRedirects: this.props.settings.http?.noFollowRedirects || false,\n\n    // Authentication\n    bearerToken: this.props.settings.http?.bearerToken,\n    basicAuth: this.props.settings.http?.basicAuth,\n\n    // validations\n    failIfSSL: this.props.settings.http?.failIfSSL || false,\n    failIfNotSSL: this.props.settings.http?.failIfNotSSL || false,\n    validStatusCodes: this.props.settings.http?.validStatusCodes || [],\n    validHTTPVersions: this.props.settings.http?.validHTTPVersions || [],\n    failIfBodyMatchesRegexp: this.props.settings.http?.failIfBodyMatchesRegexp || [],\n    failIfBodyNotMatchesRegexp: this.props.settings.http?.failIfBodyNotMatchesRegexp || [],\n    failIfHeaderMatchesRegexp: this.props.settings.http?.failIfHeaderMatchesRegexp || [],\n    failIfHeaderNotMatchesRegexp: this.props.settings.http?.failIfHeaderNotMatchesRegexp || [],\n    cacheBustingQueryParamName: this.props.settings.http?.cacheBustingQueryParamName,\n\n    showAdvanced: false,\n    showValidation: false,\n    showAuthentication: false,\n    showTLS: false,\n  };\n\n  onUpdate = () => {\n    const settings = this.state as HttpSettings;\n    this.props.onUpdate({\n      http: settings,\n    });\n  };\n\n  onMethodChange = (value: SelectableValue<HttpMethod>) => {\n    this.setState({ method: value.value || HttpMethod.GET }, this.onUpdate);\n  };\n\n  onBodyChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    this.setState({ body: event.target.value }, this.onUpdate);\n  };\n\n  onIpVersionChange = (value: SelectableValue<IpVersion>) => {\n    this.setState({ ipVersion: value.value || IpVersion.Any }, this.onUpdate);\n  };\n\n  onNoFollowRedirectsChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ noFollowRedirects: !this.state.noFollowRedirects }, this.onUpdate);\n  };\n\n  onFailIfNotSSLChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ failIfNotSSL: !this.state.failIfNotSSL }, this.onUpdate);\n  };\n\n  onFailIfSSLChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ failIfSSL: !this.state.failIfSSL }, this.onUpdate);\n  };\n\n  onCacheBustingQueryParamNameChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ cacheBustingQueryParamName: event.target.value }, this.onUpdate);\n  };\n\n  onToggleAdvanced = (isOpen: boolean) => {\n    this.setState({ showAdvanced: !this.state.showAdvanced });\n  };\n\n  onToggleValidation = (isOpen: boolean) => {\n    this.setState({ showValidation: !this.state.showValidation });\n  };\n\n  onAuthUpdate = (bearerToken: string | undefined, basicAuth: BasicAuth | undefined) => {\n    this.setState({ bearerToken, basicAuth }, this.onUpdate);\n  };\n\n  onToggleTLS = (isOpen: boolean) => {\n    this.setState({ showTLS: !this.state.showTLS });\n  };\n\n  onTLSChange = (tlsConfig: TLSConfig) => {\n    this.setState({ tlsConfig: tlsConfig }, this.onUpdate);\n  };\n\n  onValidHttpVersionsChange = (item: Array<SelectableValue<HttpVersion>>) => {\n    let validHTTPVersions: HttpVersion[] = [];\n    for (const p of item.values()) {\n      if (p.value) {\n        validHTTPVersions.push(p.value);\n      }\n    }\n    this.setState({ validHTTPVersions }, this.onUpdate);\n  };\n\n  onValidStatusCodeChange = (item: Array<SelectableValue<number>>) => {\n    let validStatusCodes: number[] = [];\n    for (const p of item.values()) {\n      if (p.value) {\n        validStatusCodes.push(p.value);\n      }\n    }\n    this.setState({ validStatusCodes }, this.onUpdate);\n  };\n\n  headersToLabels(): SMLabel[] {\n    let labels: SMLabel[] = [];\n    for (const h of this.state.headers || []) {\n      const parts = h.split(':', 2);\n      labels.push({\n        name: parts[0],\n        value: parts[1],\n      });\n    }\n    return labels;\n  }\n\n  onHeadersUpdate = (labels: SMLabel[]) => {\n    let headers: string[] = [];\n    for (const l of labels) {\n      headers.push(`${l.name}: ${l.value}`);\n    }\n    this.setState({ headers }, this.onUpdate);\n  };\n\n  onFailIfBodyMatchesRegexpChange = (index: number) => (event: React.ChangeEvent<HTMLInputElement>) => {\n    let failIfBodyMatchesRegexp: string[] = [];\n    this.state.failIfBodyMatchesRegexp?.forEach((v, i) => {\n      if (i === index) {\n        failIfBodyMatchesRegexp.push(event.target.value);\n      } else {\n        failIfBodyMatchesRegexp.push(v);\n      }\n    });\n    this.setState({ failIfBodyMatchesRegexp }, this.onUpdate);\n  };\n\n  onFailIfBodyMatchesRegexpDelete = (index: number) => () => {\n    let failIfBodyMatchesRegexp: string[] = [];\n    this.state.failIfBodyMatchesRegexp?.forEach((v, i) => {\n      if (i !== index) {\n        failIfBodyMatchesRegexp.push(v);\n      }\n    });\n    this.setState({ failIfBodyMatchesRegexp }, this.onUpdate);\n  };\n\n  addFailIfBodyMatchesRegexp = () => {\n    let failIfBodyMatchesRegexp: string[] = [];\n    for (const v of this.state.failIfBodyMatchesRegexp || []) {\n      failIfBodyMatchesRegexp.push(v);\n    }\n    failIfBodyMatchesRegexp.push('');\n    this.setState({ failIfBodyMatchesRegexp }, this.onUpdate);\n  };\n\n  onFailIfBodyNotMatchesRegexpChange = (index: number) => (event: React.ChangeEvent<HTMLInputElement>) => {\n    let failIfBodyNotMatchesRegexp: string[] = [];\n    this.state.failIfBodyNotMatchesRegexp?.forEach((v, i) => {\n      if (i === index) {\n        failIfBodyNotMatchesRegexp.push(event.target.value);\n      } else {\n        failIfBodyNotMatchesRegexp.push(v);\n      }\n    });\n    this.setState({ failIfBodyNotMatchesRegexp }, this.onUpdate);\n  };\n\n  onFailIfBodyNotMatchesRegexpDelete = (index: number) => () => {\n    let failIfBodyNotMatchesRegexp: string[] = [];\n    this.state.failIfBodyNotMatchesRegexp?.forEach((v, i) => {\n      if (i !== index) {\n        failIfBodyNotMatchesRegexp.push(v);\n      }\n    });\n    this.setState({ failIfBodyNotMatchesRegexp }, this.onUpdate);\n  };\n\n  addFailIfBodyNotMatchesRegexp = () => {\n    let failIfBodyNotMatchesRegexp: string[] = [];\n    for (const v of this.state.failIfBodyNotMatchesRegexp || []) {\n      failIfBodyNotMatchesRegexp.push(v);\n    }\n    failIfBodyNotMatchesRegexp.push('');\n    this.setState({ failIfBodyNotMatchesRegexp }, this.onUpdate);\n  };\n\n  onFailIfHeaderMatchesUpdate = (headerMatches: HeaderMatch[]) => {\n    let matches: HeaderMatch[] = [];\n    if (!this.state.failIfHeaderMatchesRegexp) {\n      matches = headerMatches;\n    } else {\n      headerMatches.forEach(v => {\n        matches.push(v);\n      });\n    }\n    console.log('setting failIfHeaderMatchesRegexp', matches);\n    this.setState({ failIfHeaderMatchesRegexp: matches }, this.onUpdate);\n  };\n\n  onFailIfHeaderNotMatchesUpdate = (headerMatches: HeaderMatch[]) => {\n    let matches: HeaderMatch[] = [];\n    if (!this.state.failIfHeaderNotMatchesRegexp) {\n      matches = headerMatches;\n    } else {\n      headerMatches.forEach(v => {\n        matches.push(v);\n      });\n    }\n    this.setState({ failIfHeaderNotMatchesRegexp: matches }, this.onUpdate);\n  };\n\n  generateValidStatusCodes() {\n    let validCodes = [];\n    for (let i = 100; i <= 102; i++) {\n      validCodes.push({\n        label: `${i}`,\n        value: i,\n      });\n    }\n    for (let i = 200; i <= 208; i++) {\n      validCodes.push({\n        label: `${i}`,\n        value: i,\n      });\n    }\n    for (let i = 300; i <= 308; i++) {\n      validCodes.push({\n        label: `${i}`,\n        value: i,\n      });\n    }\n    for (let i = 400; i <= 418; i++) {\n      validCodes.push({\n        label: `${i}`,\n        value: i,\n      });\n    }\n    validCodes.push({\n      label: '422',\n      value: 422,\n    });\n    validCodes.push({\n      label: '426',\n      value: 426,\n    });\n    validCodes.push({\n      label: '428',\n      value: 428,\n    });\n    validCodes.push({\n      label: '429',\n      value: 429,\n    });\n    validCodes.push({\n      label: '431',\n      value: 431,\n    });\n    for (let i = 500; i <= 511; i++) {\n      validCodes.push({\n        label: `${i}`,\n        value: i,\n      });\n    }\n    validCodes.push({\n      label: '598',\n      value: 598,\n    });\n    validCodes.push({\n      label: '599',\n      value: 599,\n    });\n    return validCodes;\n  }\n\n  render() {\n    const { state } = this;\n    const { isEditor } = this.props;\n\n    const httpVersionOptions = [\n      {\n        label: 'HTTP/1.0',\n        value: HttpVersion.HTTP1_0,\n      },\n      {\n        label: 'HTTP/1.1',\n        value: HttpVersion.HTTP1_1,\n      },\n      {\n        label: 'HTTP/2',\n        value: HttpVersion.HTTP2_0,\n      },\n    ];\n    const methodOptions = [\n      {\n        label: 'GET',\n        value: HttpMethod.GET,\n      },\n      {\n        label: 'HEAD',\n        value: HttpMethod.HEAD,\n      },\n      {\n        label: 'PUT',\n        value: HttpMethod.PUT,\n      },\n      {\n        label: 'POST',\n        value: HttpMethod.POST,\n      },\n      {\n        label: 'DELETE',\n        value: HttpMethod.DELETE,\n      },\n      {\n        label: 'OPTIONS',\n        value: HttpMethod.OPTIONS,\n      },\n    ];\n    const validStatusCodes = this.generateValidStatusCodes();\n\n    return (\n      <Container>\n        <HorizontalGroup>\n          <Field label=\"Request Method\" description=\"The HTTP method the probe will use\" disabled={!isEditor}>\n            <Select value={state.method} options={methodOptions} onChange={this.onMethodChange} />\n          </Field>\n        </HorizontalGroup>\n        <Container>\n          <Field label=\"Request Body\" description=\"The body of the HTTP request used in probe.\" disabled={!isEditor}>\n            <div>\n              <TextArea value={state.body} onChange={this.onBodyChange} rows={2} disabled={!isEditor} />\n            </div>\n          </Field>\n        </Container>\n        <Container>\n          <Field label=\"Request Headers\" description=\"The HTTP headers set for the probe..\" disabled={!isEditor}>\n            <div>\n              <SMLabelsForm\n                labels={this.headersToLabels()}\n                isEditor={isEditor}\n                onUpdate={this.onHeadersUpdate}\n                type=\"Header\"\n                limit={10}\n              />\n            </div>\n          </Field>\n        </Container>\n        <br />\n        <Collapse label=\"TLS Config\" collapsible={true} onToggle={this.onToggleTLS} isOpen={state.showTLS}>\n          <TLSForm onChange={this.onTLSChange} isEditor={isEditor} tlsConfig={state.tlsConfig} />\n        </Collapse>\n        <AuthSettings\n          isEditor={isEditor}\n          basicAuth={state.basicAuth}\n          bearerToken={state.bearerToken}\n          onUpdate={this.onAuthUpdate}\n        />\n        <Collapse\n          label=\"Validation\"\n          collapsible={true}\n          onToggle={this.onToggleValidation}\n          isOpen={state.showValidation}\n        >\n          <HorizontalGroup>\n            <Field\n              label=\"Valid Status Codes\"\n              description=\"Accepted status codes for this probe. Defaults to 2xx.\"\n              disabled={!isEditor}\n            >\n              <MultiSelect\n                options={validStatusCodes}\n                value={state.validStatusCodes}\n                onChange={this.onValidStatusCodeChange}\n                disabled={!isEditor}\n              />\n            </Field>\n            <Field label=\"Valid HTTP Versions\" description=\"Accepted HTTP versions for this probe\" disabled={!isEditor}>\n              <MultiSelect\n                options={httpVersionOptions}\n                value={state.validHTTPVersions}\n                onChange={this.onValidHttpVersionsChange}\n                disabled={!isEditor}\n              />\n            </Field>\n\n            <Field label=\"Fail if SSL\" description=\"Probe fails if SSL is present\" disabled={!isEditor}>\n              <Container padding=\"sm\">\n                <Switch value={state.failIfSSL} onChange={this.onFailIfSSLChange} disabled={!isEditor} />\n              </Container>\n            </Field>\n            <Field label=\"Fail if not SSL\" description=\"Probe fails if SSL is not present\" disabled={!isEditor}>\n              <Container padding=\"sm\">\n                <Switch value={state.failIfNotSSL} onChange={this.onFailIfNotSSLChange} disabled={!isEditor} />\n              </Container>\n            </Field>\n          </HorizontalGroup>\n\n          <Field\n            label=\"Fail if body matches regexp\"\n            description=\"Probe fails if response body matches regex\"\n            disabled={!isEditor}\n          >\n            <VerticalGroup justify=\"space-between\">\n              <List\n                items={state.failIfBodyMatchesRegexp || []}\n                renderItem={(item, index) => (\n                  <HorizontalGroup>\n                    <Input\n                      type=\"text\"\n                      placeholder=\"regexp\"\n                      value={item}\n                      onChange={this.onFailIfBodyMatchesRegexpChange(index)}\n                      disabled={!isEditor}\n                    />\n                    <IconButton\n                      name=\"minus-circle\"\n                      onClick={this.onFailIfBodyMatchesRegexpDelete(index)}\n                      disabled={!isEditor}\n                    />\n                  </HorizontalGroup>\n                )}\n              />\n              <Button onClick={this.addFailIfBodyMatchesRegexp} disabled={!isEditor} variant=\"secondary\" size=\"sm\">\n                <Icon name=\"plus\" />\n                &nbsp; Add Body Regexp\n              </Button>\n            </VerticalGroup>\n          </Field>\n          <Field\n            label=\"Fail if body doesn't match regexp\"\n            description=\"Probe fails if response body does not match regex\"\n            disabled={!isEditor}\n          >\n            <VerticalGroup justify=\"space-between\">\n              <List\n                items={state.failIfBodyNotMatchesRegexp || []}\n                renderItem={(item, index) => (\n                  <HorizontalGroup>\n                    <Input\n                      type=\"text\"\n                      placeholder=\"regexp\"\n                      value={item}\n                      onChange={this.onFailIfBodyNotMatchesRegexpChange(index)}\n                      disabled={!isEditor}\n                    />\n                    <IconButton\n                      name=\"minus-circle\"\n                      onClick={this.onFailIfBodyNotMatchesRegexpDelete(index)}\n                      disabled={!isEditor}\n                    />\n                  </HorizontalGroup>\n                )}\n              />\n              <Button onClick={this.addFailIfBodyNotMatchesRegexp} disabled={!isEditor} variant=\"secondary\" size=\"sm\">\n                <Icon name=\"plus\" />\n                &nbsp; Add Body Regexp\n              </Button>\n            </VerticalGroup>\n          </Field>\n          <HeaderMatchForm\n            headerMatches={state.failIfHeaderMatchesRegexp || []}\n            name=\"Fail if header matches regexp\"\n            description=\"Probe fails if response header matches regex. For headers with multiple values, fails if *at least one* matches\"\n            onChange={this.onFailIfHeaderMatchesUpdate}\n            isEditor={isEditor}\n          />\n          <HeaderMatchForm\n            headerMatches={state.failIfHeaderNotMatchesRegexp || []}\n            name=\"Fail if header doesn't match regexp\"\n            description=\"Probe fails if response header does not match regex. For headers with multiple values, fails if *none* match.\"\n            onChange={this.onFailIfHeaderNotMatchesUpdate}\n            isEditor={isEditor}\n          />\n        </Collapse>\n        <Collapse\n          label=\"Advanced Options\"\n          collapsible={true}\n          onToggle={this.onToggleAdvanced}\n          isOpen={state.showAdvanced}\n        >\n          <HorizontalGroup>\n            <div>\n              <Field label=\"IP Version\" description=\"The IP protocol of the HTTP request\" disabled={!isEditor}>\n                <Select value={state.ipVersion} options={IpOptions} onChange={this.onIpVersionChange} />\n              </Field>\n            </div>\n            <div>\n              <Field\n                label=\"Follow Redirects\"\n                description=\"Whether or not the probe will follow any redirects.\"\n                disabled={!isEditor}\n              >\n                <Container padding=\"sm\">\n                  <Switch\n                    value={!state.noFollowRedirects}\n                    onChange={this.onNoFollowRedirectsChange}\n                    disabled={!isEditor}\n                  />\n                </Container>\n              </Field>\n            </div>\n          </HorizontalGroup>\n          <HorizontalGroup>\n            <div>\n              <Field\n                label=\"Cache busting query parameter name\"\n                description=\"The name of the query parameter used to prevent the server from using a cached response. Each probe will assign a random value to this parameter each time a request is made.\"\n              >\n                <Input\n                  type=\"string\"\n                  placeholder=\"cache-bust\"\n                  value={state.cacheBustingQueryParamName}\n                  onChange={this.onCacheBustingQueryParamNameChange}\n                  disabled={!isEditor}\n                />\n              </Field>\n            </div>\n          </HorizontalGroup>\n        </Collapse>\n      </Container>\n    );\n  }\n}\n\ninterface TLSProps {\n  tlsConfig?: TLSConfig;\n  isEditor: boolean;\n  onChange: (tlsConfig: TLSConfig) => void;\n}\n\ninterface TLSState {\n  insecureSkipVerify: boolean;\n  caCert: string;\n  clientCert: string;\n  clientKey: string;\n  serverName: string;\n}\n\nexport class TLSForm extends PureComponent<TLSProps, TLSState> {\n  state = {\n    insecureSkipVerify: this.props.tlsConfig?.insecureSkipVerify || false,\n    caCert: this.props.tlsConfig?.caCert || '',\n    clientCert: this.props.tlsConfig?.clientCert || '',\n    clientKey: this.props.tlsConfig?.clientKey || '',\n    serverName: this.props.tlsConfig?.serverName || '',\n  };\n\n  onUpdate = () => {\n    const cfg = {\n      insecureSkipVerify: this.state.insecureSkipVerify,\n      caCert: this.state.caCert,\n      clientCert: this.state.clientCert,\n      clientKey: this.state.clientKey,\n      serverName: this.state.serverName,\n    };\n    this.props.onChange(cfg);\n  };\n\n  onInsecureSkipVerifyChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ insecureSkipVerify: !this.state.insecureSkipVerify }, this.onUpdate);\n  };\n\n  onServerNameChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ serverName: event.target.value }, this.onUpdate);\n  };\n\n  onCACertChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    this.setState({ caCert: event.target.value }, this.onUpdate);\n  };\n  onClientCertChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    this.setState({ clientCert: event.target.value }, this.onUpdate);\n  };\n  onClientKeyChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    this.setState({ clientKey: event.target.value }, this.onUpdate);\n  };\n\n  render() {\n    const { insecureSkipVerify, caCert, clientCert, clientKey, serverName } = this.state;\n    const { isEditor } = this.props;\n\n    return (\n      <div>\n        <HorizontalGroup>\n          <Field label=\"Skip Validation\" description=\"Disable target certificate validation\" disabled={!isEditor}>\n            <Container padding=\"sm\">\n              <Switch value={insecureSkipVerify} onChange={this.onInsecureSkipVerifyChange} disabled={!isEditor} />\n            </Container>\n          </Field>\n          <Field label=\"Server Name\" description=\"Used to verify the hostname for the targets\" disabled={!isEditor}>\n            <Input\n              type=\"text\"\n              placeholder=\"ServerName\"\n              value={serverName}\n              onChange={this.onServerNameChange}\n              disabled={!isEditor}\n            />\n          </Field>\n        </HorizontalGroup>\n        <Container>\n          <Field label=\"CA Certificate\" description=\"The CA cert to use for the targets\" disabled={!isEditor}>\n            <div>\n              <TextArea\n                value={caCert}\n                onChange={this.onCACertChange}\n                rows={2}\n                disabled={!isEditor}\n                placeholder=\"CA Certificate\"\n              />\n            </div>\n          </Field>\n        </Container>\n        <Container>\n          <Field label=\"Client Certificate\" description=\"The client cert file for the targets\" disabled={!isEditor}>\n            <div>\n              <TextArea\n                value={clientCert}\n                onChange={this.onClientCertChange}\n                rows={2}\n                disabled={!isEditor}\n                placeholder=\"Client Certificate\"\n              />\n            </div>\n          </Field>\n        </Container>\n        <Container>\n          <Field label=\"Client Key\" description=\"The client key file for the targets\" disabled={!isEditor}>\n            <div>\n              <TextArea\n                type=\"password\"\n                value={clientKey}\n                onChange={this.onClientKeyChange}\n                rows={2}\n                disabled={!isEditor}\n                placeholder=\"Client Key\"\n              />\n            </div>\n          </Field>\n        </Container>\n      </div>\n    );\n  }\n}\n\ninterface HeaderMatchProps {\n  headerMatches: HeaderMatch[];\n  name: string;\n  description: string;\n  isEditor: boolean;\n  onChange: (headerMatches: HeaderMatch[]) => void;\n}\n\ninterface HeaderMatchState {\n  headerMatches: HeaderMatch[];\n}\n\nexport class HeaderMatchForm extends PureComponent<HeaderMatchProps, HeaderMatchState> {\n  state = {\n    headerMatches: this.props.headerMatches,\n  };\n\n  onUpdate = () => {\n    this.props.onChange(this.state.headerMatches);\n  };\n\n  onHeaderChange = (index: number) => (event: React.ChangeEvent<HTMLInputElement>) => {\n    let matches: HeaderMatch[] = [];\n    this.state.headerMatches.forEach((v, i) => {\n      if (i === index) {\n        matches.push({\n          header: event.target.value,\n          regexp: v.regexp,\n          allowMissing: v.allowMissing,\n        });\n      } else {\n        matches.push(v);\n      }\n    });\n    this.setState({ headerMatches: matches }, this.onUpdate);\n  };\n\n  onRegexpChange = (index: number) => (event: React.ChangeEvent<HTMLInputElement>) => {\n    let matches: HeaderMatch[] = [];\n    this.state.headerMatches.forEach((v, i) => {\n      if (i === index) {\n        matches.push({\n          header: v.header,\n          regexp: event.target.value,\n          allowMissing: v.allowMissing,\n        });\n      } else {\n        matches.push(v);\n      }\n    });\n    this.setState({ headerMatches: matches }, this.onUpdate);\n  };\n\n  onAllowMissingChange = (index: number) => (event: React.ChangeEvent<HTMLInputElement>) => {\n    let matches: HeaderMatch[] = [];\n    this.state.headerMatches.forEach((v, i) => {\n      if (i === index) {\n        matches.push({\n          header: v.header,\n          regexp: v.regexp,\n          allowMissing: !v.allowMissing,\n        });\n      } else {\n        matches.push(v);\n      }\n    });\n    this.setState({ headerMatches: matches }, this.onUpdate);\n  };\n\n  onHeaderMatchesDelete = (index: number) => () => {\n    let matches: HeaderMatch[] = [];\n    this.state.headerMatches?.forEach((v, i) => {\n      if (i !== index) {\n        matches.push(v);\n      }\n    });\n    this.setState({ headerMatches: matches }, this.onUpdate);\n  };\n\n  onHeaderMatchesAdd = () => {\n    let matches: HeaderMatch[] = [];\n    this.state.headerMatches.forEach(v => {\n      matches.push(v);\n    });\n    matches.push({\n      header: '',\n      regexp: '',\n      allowMissing: false,\n    });\n    this.setState({ headerMatches: matches }, this.onUpdate);\n  };\n\n  render() {\n    const { headerMatches } = this.state;\n    const { isEditor, name, description } = this.props;\n\n    return (\n      <Field label={name} description={description} disabled={!isEditor}>\n        <VerticalGroup justify=\"space-between\">\n          <List\n            items={headerMatches}\n            renderItem={(item, index) => (\n              <HorizontalGroup>\n                <Input\n                  type=\"text\"\n                  placeholder=\"header\"\n                  value={item.header}\n                  onChange={this.onHeaderChange(index)}\n                  disabled={!isEditor}\n                />\n                <Input\n                  type=\"text\"\n                  placeholder=\"regexp\"\n                  value={item.regexp}\n                  onChange={this.onRegexpChange(index)}\n                  disabled={!isEditor}\n                />\n                <HorizontalGroup>\n                  <span>Allow Missing</span>\n                  <Container padding=\"sm\">\n                    <Switch\n                      title=\"Allow Missing\"\n                      value={item.allowMissing}\n                      onChange={this.onAllowMissingChange(index)}\n                      disabled={!isEditor}\n                    />\n                  </Container>\n                </HorizontalGroup>\n                <IconButton name=\"minus-circle\" onClick={this.onHeaderMatchesDelete(index)} disabled={!isEditor} />\n              </HorizontalGroup>\n            )}\n          />\n          <Button onClick={this.onHeaderMatchesAdd} disabled={!isEditor} variant=\"secondary\" size=\"sm\">\n            <Icon name=\"plus\" />\n            &nbsp; Add Header Regexp\n          </Button>\n        </VerticalGroup>\n      </Field>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport { Collapse, Container, HorizontalGroup, Field, Select, MultiSelect, Input, List, IconButton } from '@grafana/ui';\nimport { SelectableValue } from '@grafana/data';\nimport { IpVersion, Settings, DnsSettings, DnsProtocol, DnsRecordType, DNSRRValidator } from 'types';\nimport { IpOptions } from './utils';\n\ninterface Props {\n  settings: Settings;\n  isEditor: boolean;\n  onUpdate: (settings: Settings) => void;\n}\n\ninterface State extends DnsSettings {\n  showAdvanced: boolean;\n  showValidation: boolean;\n}\n\nexport class DnsSettingsForm extends PureComponent<Props, State> {\n  state: State = {\n    showValidation: false,\n    showAdvanced: false,\n    recordType: this.props.settings!.dns?.recordType || DnsRecordType.A,\n    server: this.props.settings!.dns?.server || '8.8.8.8',\n    ipVersion: this.props.settings!.dns?.ipVersion || IpVersion.V4,\n    protocol: this.props.settings!.dns?.protocol || DnsProtocol.UDP,\n    port: this.props.settings!.dns?.port || 53,\n\n    // validation\n    validRCodes: this.props.settings!.dns?.validRCodes || [],\n    validateAnswerRRS: this.props.settings!.dns?.validateAnswerRRS,\n    validateAuthorityRRS: this.props.settings!.dns?.validateAuthorityRRS,\n    validateAdditionalRRS: this.props.settings!.dns?.validateAdditionalRRS,\n  };\n\n  onUpdate = () => {\n    const settings = this.state as DnsSettings;\n    this.props.onUpdate({\n      dns: settings,\n    });\n  };\n\n  onIpVersionChange = (value: SelectableValue<IpVersion>) => {\n    this.setState({ ipVersion: value.value || IpVersion.Any }, this.onUpdate);\n  };\n\n  onProtocolChange = (value: SelectableValue<DnsProtocol>) => {\n    this.setState({ protocol: value.value || DnsProtocol.UDP }, this.onUpdate);\n  };\n\n  onPortChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ port: event.target.valueAsNumber || 53 }, this.onUpdate);\n  };\n\n  onServerChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ server: event.target.value }, this.onUpdate);\n  };\n\n  onRecordTypeChange = (value: SelectableValue<DnsRecordType>) => {\n    this.setState({ recordType: value.value || DnsRecordType.A }, this.onUpdate);\n  };\n\n  onShowAdvanced = (isOpen: boolean) => {\n    this.setState({ showAdvanced: !this.state.showAdvanced });\n  };\n\n  onShowValidation = (isOpen: boolean) => {\n    this.setState({ showValidation: !this.state.showValidation });\n  };\n\n  onValidRCodesChange = (item: Array<SelectableValue<string>>) => {\n    let validRCodes: string[] = [];\n    for (const p of item.values()) {\n      if (p.value) {\n        validRCodes.push(p.value);\n      }\n    }\n    this.setState({ validRCodes }, this.onUpdate);\n  };\n\n  onValidateAnswerChange = (validations: DNSRRValidator | undefined) => {\n    console.log('validateAnswer update.', validations);\n    if (!validations) {\n      this.setState({ validateAnswerRRS: undefined }, this.onUpdate);\n      return;\n    }\n    const validateAnswerRRS = {\n      failIfMatchesRegexp: validations.failIfMatchesRegexp,\n      failIfNotMatchesRegexp: validations.failIfNotMatchesRegexp,\n    };\n    this.setState({ validateAnswerRRS }, this.onUpdate);\n  };\n\n  onValidateAuthorityChange = (validations: DNSRRValidator | undefined) => {\n    if (!validations) {\n      this.setState({ validateAuthorityRRS: undefined }, this.onUpdate);\n      return;\n    }\n    const validateAuthorityRRS = {\n      failIfMatchesRegexp: validations.failIfMatchesRegexp,\n      failIfNotMatchesRegexp: validations.failIfNotMatchesRegexp,\n    };\n    this.setState({ validateAuthorityRRS }, this.onUpdate);\n  };\n\n  onValidateAdditionalChange = (validations: DNSRRValidator | undefined) => {\n    if (!validations) {\n      this.setState({ validateAdditionalRRS: undefined }, this.onUpdate);\n      return;\n    }\n    const validateAdditionalRRS = {\n      failIfMatchesRegexp: validations.failIfMatchesRegexp,\n      failIfNotMatchesRegexp: validations.failIfNotMatchesRegexp,\n    };\n    this.setState({ validateAdditionalRRS }, this.onUpdate);\n  };\n\n  render() {\n    const {\n      ipVersion,\n      recordType,\n      server,\n      port,\n      protocol,\n      showAdvanced,\n      showValidation,\n      validRCodes,\n      validateAnswerRRS,\n      validateAuthorityRRS,\n      validateAdditionalRRS,\n    } = this.state;\n    const { isEditor } = this.props;\n\n    const recordTypes = [\n      {\n        label: DnsRecordType.A,\n        value: DnsRecordType.A,\n      },\n      {\n        label: DnsRecordType.AAAA,\n        value: DnsRecordType.AAAA,\n      },\n      {\n        label: DnsRecordType.CNAME,\n        value: DnsRecordType.CNAME,\n      },\n      {\n        label: DnsRecordType.MX,\n        value: DnsRecordType.MX,\n      },\n      {\n        label: DnsRecordType.NS,\n        value: DnsRecordType.NS,\n      },\n      {\n        label: DnsRecordType.SOA,\n        value: DnsRecordType.SOA,\n      },\n      {\n        label: DnsRecordType.TXT,\n        value: DnsRecordType.TXT,\n      },\n      {\n        label: DnsRecordType.PTR,\n        value: DnsRecordType.PTR,\n      },\n      {\n        label: DnsRecordType.SRV,\n        value: DnsRecordType.SRV,\n      },\n    ];\n    const protocols = [\n      {\n        label: DnsProtocol.UDP,\n        value: DnsProtocol.UDP,\n      },\n      {\n        label: DnsProtocol.TCP,\n        value: DnsProtocol.TCP,\n      },\n    ];\n    const rCodes = [\n      {\n        label: 'NOERROR',\n        value: 'NOERROR',\n      },\n    ];\n    return (\n      <Container>\n        <HorizontalGroup>\n          <Field label=\"Record Type\" description=\"DNS record type to query for\" disabled={!isEditor}>\n            <Select value={recordType} options={recordTypes} onChange={this.onRecordTypeChange} />\n          </Field>\n          <Field label=\"Server\" description=\"Address of server to query\" disabled={!isEditor}>\n            <Input value={server} type=\"text\" placeholder=\"server\" onChange={this.onServerChange} />\n          </Field>\n          <Field label=\"Protocol\" description=\"Transport protocol to use\" disabled={!isEditor}>\n            <Select value={protocol} options={protocols} onChange={this.onProtocolChange} />\n          </Field>\n          <Field label=\"Port\" description=\"port on server to query\" disabled={!isEditor}>\n            <Input value={port} type=\"number\" placeholder=\"port\" onChange={this.onPortChange} />\n          </Field>\n        </HorizontalGroup>\n        <Collapse label=\"Validation\" collapsible={true} onToggle={this.onShowValidation} isOpen={showValidation}>\n          <HorizontalGroup>\n            <Field label=\"Valid Response Codes\" description=\"List of valid response codes\" disabled={!isEditor}>\n              <MultiSelect value={validRCodes} options={rCodes} onChange={this.onValidRCodesChange} />\n            </Field>\n          </HorizontalGroup>\n          <DnsValidatorForm\n            name=\"Validate Answer\"\n            description=\"Validate entries in the Answer section of the DNS response\"\n            validations={validateAnswerRRS}\n            onChange={this.onValidateAnswerChange}\n            isEditor={isEditor}\n          />\n          <DnsValidatorForm\n            name=\"Validate Authority\"\n            description=\"Validate entries in the Authority section of the DNS response\"\n            validations={validateAuthorityRRS}\n            onChange={this.onValidateAuthorityChange}\n            isEditor={isEditor}\n          />\n          <DnsValidatorForm\n            name=\"Validate Additional\"\n            description=\"Validate entries in the Additional section of the DNS response\"\n            validations={validateAdditionalRRS}\n            onChange={this.onValidateAdditionalChange}\n            isEditor={isEditor}\n          />\n        </Collapse>\n        <Collapse label=\"Advanced Options\" collapsible={true} onToggle={this.onShowAdvanced} isOpen={showAdvanced}>\n          <HorizontalGroup>\n            <div>\n              <Field label=\"IP Version\" description=\"The IP protocol of the ICMP request\" disabled={!isEditor}>\n                <Select value={ipVersion} options={IpOptions} onChange={this.onIpVersionChange} />\n              </Field>\n            </div>\n          </HorizontalGroup>\n        </Collapse>\n      </Container>\n    );\n  }\n}\n\ninterface DnsValidatorProps {\n  validations: DNSRRValidator | undefined;\n  name: string;\n  description: string;\n  isEditor: boolean;\n  onChange: (validations: DNSRRValidator | undefined) => void;\n}\n\ninterface DnsValidatorState extends DNSRRValidator {}\n\nexport class DnsValidatorForm extends PureComponent<DnsValidatorProps, DnsValidatorState> {\n  state = {\n    failIfMatchesRegexp: this.props.validations?.failIfMatchesRegexp || [],\n    failIfNotMatchesRegexp: this.props.validations?.failIfNotMatchesRegexp || [],\n  };\n\n  onUpdate = () => {\n    const validations: DNSRRValidator = {\n      failIfMatchesRegexp: this.state.failIfMatchesRegexp,\n      failIfNotMatchesRegexp: this.state.failIfNotMatchesRegexp,\n    };\n    this.props.onChange(validations);\n  };\n\n  onFailIfMatchesRegexpChange = (index: number) => (event: React.ChangeEvent<HTMLInputElement>) => {\n    let failIfMatchesRegexp: string[] = [];\n    this.state.failIfMatchesRegexp.forEach((v, i) => {\n      if (i === index) {\n        failIfMatchesRegexp.push(event.target.value);\n      } else {\n        failIfMatchesRegexp.push(v);\n      }\n    });\n    this.setState({ failIfMatchesRegexp }, this.onUpdate);\n  };\n\n  onFailIfNotMatchesRegexpChange = (index: number) => (event: React.ChangeEvent<HTMLInputElement>) => {\n    let failIfNotMatchesRegexp: string[] = [];\n    this.state.failIfNotMatchesRegexp.forEach((v, i) => {\n      if (i === index) {\n        failIfNotMatchesRegexp.push(event.target.value);\n      } else {\n        failIfNotMatchesRegexp.push(v);\n      }\n    });\n    this.setState({ failIfNotMatchesRegexp }, this.onUpdate);\n  };\n\n  onFailIfMatchesRegexpDelete = (index: number) => () => {\n    let failIfMatchesRegexp: string[] = [];\n    this.state.failIfMatchesRegexp?.forEach((v, i) => {\n      if (i !== index) {\n        failIfMatchesRegexp.push(v);\n      }\n    });\n    this.setState({ failIfMatchesRegexp }, this.onUpdate);\n  };\n\n  onFailIfNotMatchesRegexpDelete = (index: number) => () => {\n    let failIfNotMatchesRegexp: string[] = [];\n    this.state.failIfNotMatchesRegexp?.forEach((v, i) => {\n      if (i !== index) {\n        failIfNotMatchesRegexp.push(v);\n      }\n    });\n    this.setState({ failIfNotMatchesRegexp }, this.onUpdate);\n  };\n\n  onFailIfMatchesRegexpAdd = () => {\n    let failIfMatchesRegexp: string[] = [];\n    this.state.failIfMatchesRegexp.forEach(v => {\n      failIfMatchesRegexp.push(v);\n    });\n    failIfMatchesRegexp.push('');\n    this.setState({ failIfMatchesRegexp }, this.onUpdate);\n  };\n\n  onFailIfNotMatchesRegexpAdd = () => {\n    let failIfNotMatchesRegexp: string[] = [];\n    this.state.failIfNotMatchesRegexp.forEach(v => {\n      failIfNotMatchesRegexp.push(v);\n    });\n    failIfNotMatchesRegexp.push('');\n    this.setState({ failIfNotMatchesRegexp }, this.onUpdate);\n  };\n\n  render() {\n    const { failIfMatchesRegexp, failIfNotMatchesRegexp } = this.state;\n    const { isEditor, name, description } = this.props;\n\n    return (\n      <Container>\n        <HorizontalGroup>\n          <Field label={name + ' matches'} description={description + ' match'} disabled={!isEditor}>\n            <Container>\n              <List\n                items={failIfMatchesRegexp}\n                renderItem={(item, index) => (\n                  <HorizontalGroup>\n                    <Input\n                      type=\"text\"\n                      placeholder=\"regexp\"\n                      value={item}\n                      onChange={this.onFailIfMatchesRegexpChange(index)}\n                      disabled={!isEditor}\n                    />\n                    <IconButton\n                      name=\"minus-circle\"\n                      onClick={this.onFailIfMatchesRegexpDelete(index)}\n                      disabled={!isEditor}\n                    />\n                  </HorizontalGroup>\n                )}\n              />\n              <IconButton name=\"plus-circle\" onClick={this.onFailIfMatchesRegexpAdd} disabled={!isEditor} />\n            </Container>\n          </Field>\n          <Field label={name + \" doesn't match\"} description={description + \" don't match\"} disabled={!isEditor}>\n            <Container>\n              <List\n                items={failIfNotMatchesRegexp}\n                renderItem={(item, index) => (\n                  <HorizontalGroup>\n                    <Input\n                      type=\"text\"\n                      placeholder=\"regexp\"\n                      value={item}\n                      onChange={this.onFailIfNotMatchesRegexpChange(index)}\n                      disabled={!isEditor}\n                    />\n                    <IconButton\n                      name=\"minus-circle\"\n                      onClick={this.onFailIfNotMatchesRegexpDelete(index)}\n                      disabled={!isEditor}\n                    />\n                  </HorizontalGroup>\n                )}\n              />\n              <IconButton name=\"plus-circle\" onClick={this.onFailIfNotMatchesRegexpAdd} disabled={!isEditor} />\n            </Container>\n          </Field>\n        </HorizontalGroup>\n      </Container>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport {\n  Collapse,\n  Container,\n  HorizontalGroup,\n  Field,\n  Select,\n  IconButton,\n  List,\n  Input,\n  Switch,\n  TextArea,\n} from '@grafana/ui';\nimport { SelectableValue } from '@grafana/data';\nimport { IpVersion, Settings, TcpSettings, TLSConfig, TCPQueryResponse } from 'types';\nimport { IpOptions } from './utils';\nimport { TLSForm } from './http/HttpSettings';\n\ninterface Props {\n  settings: Settings;\n  isEditor: boolean;\n  onUpdate: (settings: Settings) => void;\n}\n\ninterface State extends TcpSettings {\n  showQueryResponse: boolean;\n  showAdvanced: boolean;\n  showTLS: boolean;\n}\n/*\nipVersion: IpVersion;\ntls: boolean;\ntlsConfig?: TLSConfig;\nqueryResponse?: TCPQueryResponse[];\n*/\nexport class TcpSettingsForm extends PureComponent<Props, State> {\n  state: State = {\n    ipVersion: this.props.settings!.tcp?.ipVersion || IpVersion.V4,\n    tls: this.props.settings!.tcp?.tls || false,\n    tlsConfig: this.props.settings!.tcp?.tlsConfig,\n    queryResponse: this.props.settings!.tcp?.queryResponse,\n    showQueryResponse: false,\n    showAdvanced: false,\n    showTLS: false,\n  };\n\n  onUpdate = () => {\n    const settings = this.state as TcpSettings;\n    this.props.onUpdate({\n      tcp: settings,\n    });\n  };\n\n  onIpVersionChange = (value: SelectableValue<IpVersion>) => {\n    this.setState({ ipVersion: value.value || IpVersion.Any }, this.onUpdate);\n  };\n\n  onToggleTLS = (isOpen: boolean) => {\n    this.setState({ showTLS: !this.state.showTLS }, this.onUpdate);\n  };\n\n  onTLSChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ tls: !this.state.tls }, this.onUpdate);\n  };\n\n  onTLSCOnfigChange = (tlsConfig: TLSConfig) => {\n    this.setState({ tlsConfig: tlsConfig }, this.onUpdate);\n  };\n\n  onShowAdvanced = (isOpen: boolean) => {\n    this.setState({ showAdvanced: !this.state.showAdvanced });\n  };\n\n  onShowQueryResponse = (isOpen: boolean) => {\n    this.setState({ showQueryResponse: !this.state.showQueryResponse });\n  };\n\n  onQueryResponsesUpdate = (queryResponse: TCPQueryResponse[]) => {\n    let config: TCPQueryResponse[] = [];\n    if (!this.state.queryResponse) {\n      config = queryResponse;\n    } else {\n      queryResponse.forEach(v => {\n        config.push(v);\n      });\n    }\n\n    this.setState({ queryResponse: config }, this.onUpdate);\n  };\n\n  render() {\n    const { ipVersion, tls, showTLS, showQueryResponse, showAdvanced, tlsConfig, queryResponse } = this.state;\n    const { isEditor } = this.props;\n\n    return (\n      <Container>\n        <Field\n          label=\"Use TLS\"\n          description=\"Whether or not TLS is used when the connection is initiated.\"\n          disabled={!isEditor}\n        >\n          <Container padding=\"sm\">\n            <Switch title=\"Use TLS\" value={tls} onChange={this.onTLSChange} disabled={!isEditor} />\n          </Container>\n        </Field>\n        <Collapse\n          label=\"Query/Response\"\n          collapsible={true}\n          onToggle={this.onShowQueryResponse}\n          isOpen={showQueryResponse}\n        >\n          <Container>\n            <QueryResponseForm\n              queryResponses={queryResponse}\n              isEditor={isEditor}\n              onChange={this.onQueryResponsesUpdate}\n            />\n          </Container>\n        </Collapse>\n        <Collapse label=\"TLS Config\" collapsible={true} onToggle={this.onToggleTLS} isOpen={showTLS}>\n          <TLSForm onChange={this.onTLSCOnfigChange} isEditor={isEditor} tlsConfig={tlsConfig} />\n        </Collapse>\n        <Collapse label=\"Advanced Options\" collapsible={true} onToggle={this.onShowAdvanced} isOpen={showAdvanced}>\n          <HorizontalGroup>\n            <div>\n              <Field label=\"IP Version\" description=\"The IP protocol of the ICMP request\" disabled={!isEditor}>\n                <Select value={ipVersion} options={IpOptions} onChange={this.onIpVersionChange} />\n              </Field>\n            </div>\n          </HorizontalGroup>\n        </Collapse>\n      </Container>\n    );\n  }\n}\n\ninterface RawQueryResponse {\n  send: string;\n  expect: string;\n  startTLS: boolean;\n}\n\ninterface QueryResponseProps {\n  queryResponses?: TCPQueryResponse[];\n  isEditor: boolean;\n  onChange: (queryResponses: TCPQueryResponse[]) => void;\n}\n\ninterface QueryResponseState {\n  queryResponses: RawQueryResponse[];\n}\n\nexport class QueryResponseForm extends PureComponent<QueryResponseProps, QueryResponseState> {\n  state = {\n    queryResponses: (this.props.queryResponses || []).map(v => {\n      return {\n        expect: atob(v.expect),\n        send: atob(v.send),\n        startTLS: v.startTLS,\n      };\n    }),\n  };\n\n  onUpdate = () => {\n    let queryResponses: TCPQueryResponse[] = [];\n    this.state.queryResponses.forEach(v => {\n      queryResponses.push({\n        expect: btoa(v.expect),\n        send: btoa(v.send),\n        startTLS: v.startTLS,\n      });\n    });\n    this.props.onChange(queryResponses);\n  };\n\n  onSendChange = (index: number) => (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    let queryResponses: TCPQueryResponse[] = [];\n    this.state.queryResponses.forEach((v, i) => {\n      if (i === index) {\n        queryResponses.push({\n          send: event.target.value,\n          expect: v.expect,\n          startTLS: v.startTLS,\n        });\n      } else {\n        queryResponses.push(v);\n      }\n    });\n    this.setState({ queryResponses }, this.onUpdate);\n  };\n\n  onExpectChange = (index: number) => (event: React.ChangeEvent<HTMLInputElement>) => {\n    let queryResponses: TCPQueryResponse[] = [];\n    this.state.queryResponses.forEach((v, i) => {\n      if (i === index) {\n        queryResponses.push({\n          send: v.send,\n          expect: event.target.value,\n          startTLS: v.startTLS,\n        });\n      } else {\n        queryResponses.push(v);\n      }\n    });\n    this.setState({ queryResponses }, this.onUpdate);\n  };\n\n  onStartTLSChange = (index: number) => (event: React.ChangeEvent<HTMLInputElement>) => {\n    let queryResponses: TCPQueryResponse[] = [];\n    this.state.queryResponses.forEach((v, i) => {\n      if (i === index) {\n        queryResponses.push({\n          send: v.send,\n          expect: v.expect,\n          startTLS: !v.startTLS,\n        });\n      } else {\n        queryResponses.push(v);\n      }\n    });\n    this.setState({ queryResponses }, this.onUpdate);\n  };\n\n  onQueryResponseDelete = (index: number) => () => {\n    let queryResponses: TCPQueryResponse[] = [];\n    this.state.queryResponses.forEach((v, i) => {\n      if (i !== index) {\n        queryResponses.push(v);\n      }\n    });\n    this.setState({ queryResponses }, this.onUpdate);\n  };\n\n  onQueryResponseAdd = () => {\n    let queryResponses: TCPQueryResponse[] = [];\n    this.state.queryResponses.forEach(v => {\n      queryResponses.push(v);\n    });\n    queryResponses.push({\n      send: '',\n      expect: '',\n      startTLS: false,\n    });\n    this.setState({ queryResponses }, this.onUpdate);\n  };\n\n  render() {\n    const { queryResponses } = this.state;\n    const { isEditor } = this.props;\n\n    return (\n      <Field\n        label=\"Query/Response\"\n        description=\"The query sent in the TCP probe and the expected associated response. StartTLS upgrades TCP connection to TLS.\"\n        disabled={!isEditor}\n      >\n        <Container>\n          <List\n            items={queryResponses}\n            renderItem={(item, index) => (\n              <HorizontalGroup>\n                <Input\n                  type=\"text\"\n                  placeholder=\"response to expect\"\n                  value={item.expect}\n                  onChange={this.onExpectChange(index)}\n                  disabled={!isEditor}\n                />\n                <TextArea\n                  type=\"text\"\n                  placeholder=\"data to send\"\n                  rows={1}\n                  value={item.send}\n                  onChange={this.onSendChange(index)}\n                  disabled={!isEditor}\n                />\n                <HorizontalGroup>\n                  <span>StartTLS</span>\n                  <Container padding=\"sm\">\n                    <Switch\n                      title=\"StartTLS\"\n                      value={item.startTLS}\n                      onChange={this.onStartTLSChange(index)}\n                      disabled={!isEditor}\n                    />\n                  </Container>\n                </HorizontalGroup>\n                <IconButton name=\"minus-circle\" onClick={this.onQueryResponseDelete(index)} disabled={!isEditor} />\n              </HorizontalGroup>\n            )}\n          />\n          <IconButton name=\"plus-circle\" onClick={this.onQueryResponseAdd} disabled={!isEditor} />\n        </Container>\n      </Field>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport {\n  Button,\n  Container,\n  ConfirmModal,\n  Field,\n  Input,\n  HorizontalGroup,\n  Switch,\n  MultiSelect,\n  Select,\n  Legend,\n  Collapse,\n} from '@grafana/ui';\nimport { SelectableValue } from '@grafana/data';\nimport { Check, Label as SMLabel, Settings, CheckType, Probe, OrgRole } from 'types';\nimport { SMDataSource } from 'datasource/DataSource';\nimport { hasRole, checkType, defaultSettings } from 'utils';\nimport { PingSettingsForm } from './PingSettings';\nimport { HttpSettingsForm } from './http/HttpSettings';\nimport { DnsSettingsForm } from './DnsSettings';\nimport { TcpSettingsForm } from './TcpSettings';\nimport { SMLabelsForm } from './utils';\nimport * as Validation from 'validation';\n\ninterface TargetHelpInfo {\n  text?: string;\n  example: string;\n}\n\ninterface Props {\n  check: Check;\n  instance: SMDataSource;\n  onReturn: (reload: boolean) => void;\n}\n\ninterface State {\n  check?: Check;\n  typeOfCheck?: CheckType;\n  probes: Probe[];\n  showDeleteModal: boolean;\n  targetHelp: TargetHelpInfo;\n  showOptions: boolean;\n}\n\nexport class CheckEditor extends PureComponent<Props, State> {\n  state: State = {\n    showDeleteModal: false,\n    showOptions: false,\n    probes: [],\n    targetHelp: {\n      example: '',\n    },\n  };\n\n  async componentDidMount() {\n    const { instance } = this.props;\n    const check = { ...this.props.check } as Check;\n    const probes = await instance.listProbes();\n    const typeOfCheck = checkType(check.settings);\n    const targetHelp = this.targetHelpText(typeOfCheck);\n    this.setState({\n      check,\n      typeOfCheck,\n      probes,\n      targetHelp,\n    });\n  }\n\n  showDeleteCheckModal = (show: boolean) => () => {\n    this.setState({ showDeleteModal: show });\n  };\n\n  onRemoveCheck = async () => {\n    const id = this.props.check.id || 0;\n    if (!this.props.check.id) {\n      return;\n    }\n    const info = this.props.instance.deleteCheck(id);\n    console.log('Remove Check', id, info);\n    this.props.onReturn(true);\n  };\n\n  onLabelsUpdate = (labels: SMLabel[]) => {\n    let check = { ...this.state.check } as Check;\n    check.labels = labels;\n    this.setState({ check });\n  };\n\n  onProbesUpdate = (probes: number[]) => {\n    let check = { ...this.state.check } as Check;\n    check.probes = probes;\n    this.setState({ check });\n  };\n\n  onSettingsUpdate = (settings: Settings) => {\n    let check = { ...this.state.check } as Check;\n    check.settings = settings;\n    this.setState({ check });\n  };\n\n  onSetType = (type: SelectableValue<CheckType>) => {\n    let check = { ...this.state.check } as Check;\n    if (!type.value) {\n      return;\n    }\n    const typeOfCheck = type.value;\n    const settings = defaultSettings(typeOfCheck);\n    if (!settings) {\n      return;\n    }\n    check.settings = settings;\n\n    const targetHelp = this.targetHelpText(typeOfCheck);\n    this.setState({ check, targetHelp, typeOfCheck });\n  };\n\n  onJobUpdate = (event: React.ChangeEvent<HTMLInputElement>) => {\n    let check = { ...this.state.check } as Check;\n    check.job = event.target.value;\n    this.setState({ check });\n  };\n\n  onTargetUpdate = (event: React.ChangeEvent<HTMLInputElement>) => {\n    let check = { ...this.state.check } as Check;\n    check.target = event.target.value;\n    this.setState({ check });\n  };\n\n  onFrequencyUpdate = (event: React.ChangeEvent<HTMLInputElement>) => {\n    let check = { ...this.state.check } as Check;\n    check.frequency = event.target.valueAsNumber * 1000;\n    this.setState({ check });\n  };\n\n  onTimeoutUpdate = (event: React.ChangeEvent<HTMLInputElement>) => {\n    let check = { ...this.state.check } as Check;\n    check.timeout = event.target.valueAsNumber * 1000;\n    this.setState({ check });\n  };\n\n  onSave = async () => {\n    const { instance } = this.props;\n    const { check } = this.state;\n    if (!check) {\n      return;\n    }\n    if (check.id) {\n      console.log('UPDATE', check, instance);\n      const info = await instance.updateCheck(check);\n      console.log('got', info);\n    } else {\n      console.log('ADD', check);\n      const info = await instance.addCheck(check);\n      console.log('got', info);\n    }\n    this.props.onReturn(true);\n  };\n\n  onEnableChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    let check = { ...this.state.check } as Check;\n    check.enabled = !check.enabled;\n    this.setState({ check });\n  };\n\n  onBack = () => {\n    this.props.onReturn(false);\n  };\n\n  targetHelpText(typeOfCheck: CheckType | undefined): TargetHelpInfo {\n    if (!typeOfCheck) {\n      return { text: '', example: '' };\n    }\n    let resp: TargetHelpInfo;\n    switch (typeOfCheck) {\n      case CheckType.HTTP: {\n        resp = {\n          text: 'Full URL to send requests to',\n          example: 'https://grafana.com/',\n        };\n        break;\n      }\n      case CheckType.PING: {\n        resp = {\n          text: 'Hostname to ping',\n          example: 'grafana.com',\n        };\n        break;\n      }\n      case CheckType.DNS: {\n        resp = {\n          text: 'Name of record to query',\n          example: 'grafana.com',\n        };\n        break;\n      }\n      case CheckType.TCP: {\n        resp = {\n          text: 'Host:port to connect to',\n          example: 'grafana.com:80',\n        };\n        break;\n      }\n    }\n    return resp;\n  }\n\n  onToggleOptions = (isOpen: boolean) => {\n    this.setState({ showOptions: !this.state.showOptions });\n  };\n\n  render() {\n    const { check, showDeleteModal, probes, targetHelp, typeOfCheck, showOptions } = this.state;\n    if (!check || probes.length === 0) {\n      return <div>Loading...</div>;\n    }\n\n    let legend = 'Edit Check';\n    if (!check.id) {\n      legend = 'Add Check';\n    }\n\n    let isEditor = hasRole(OrgRole.EDITOR);\n\n    const checkTypes = [\n      {\n        label: 'HTTP',\n        value: CheckType.HTTP,\n      },\n      {\n        label: 'PING',\n        value: CheckType.PING,\n      },\n      {\n        label: 'DNS',\n        value: CheckType.DNS,\n      },\n      {\n        label: 'TCP',\n        value: CheckType.TCP,\n      },\n    ];\n\n    return (\n      <div>\n        <Legend>{legend}</Legend>\n        <div>\n          <HorizontalGroup justify=\"flex-start\" spacing=\"md\">\n            <Field label=\"Check Type\" disabled={check.id ? true : false}>\n              <Select value={typeOfCheck} options={checkTypes} onChange={this.onSetType} width={30} />\n            </Field>\n            <Field label=\"Enabled\" disabled={!isEditor}>\n              <Container padding=\"sm\">\n                <Switch value={check.enabled} onChange={this.onEnableChange} disabled={!isEditor} />\n              </Container>\n            </Field>\n          </HorizontalGroup>\n          <Field\n            label=\"Job Name\"\n            description=\"Name used for job label\"\n            disabled={!isEditor}\n            invalid={!Validation.validateJob(check.job)}\n          >\n            <Input type=\"string\" placeholder=\"jobName\" value={check.job} onChange={this.onJobUpdate} />\n          </Field>\n          <Field\n            label=\"Target\"\n            description={targetHelp.text}\n            disabled={!isEditor}\n            invalid={!Validation.validateTarget(checkType(check.settings), check.target)}\n          >\n            <Input\n              type=\"string\"\n              placeholder={targetHelp.example}\n              value={check.target}\n              onChange={this.onTargetUpdate}\n              required={true}\n            />\n          </Field>\n          <div>\n            <Field\n              label=\"Probe Locations\"\n              description=\"Select the locations where this target should be monitored from\"\n              disabled={!isEditor}\n              invalid={!Validation.validateProbes(check.probes)}\n            >\n              <CheckProbes\n                probes={check.probes}\n                availableProbes={probes}\n                onUpdate={this.onProbesUpdate}\n                isEditor={isEditor}\n              />\n            </Field>\n          </div>\n          <Collapse label=\"Options\" collapsible={true} onToggle={this.onToggleOptions} isOpen={showOptions}>\n            <Field\n              label=\"Frequency\"\n              description=\"How frequently the check should run.\"\n              disabled={!isEditor}\n              invalid={!Validation.validateFrequency(check.frequency)}\n            >\n              <Input\n                label=\"Frequency\"\n                type=\"number\"\n                step={10}\n                value={check!.frequency / 1000 || 60}\n                onChange={this.onFrequencyUpdate}\n                suffix=\"seconds\"\n                max={120}\n                min={10}\n                width={30}\n              />\n            </Field>\n            <Field\n              label=\"Timeout\"\n              description=\"Maximum execution time for a check\"\n              disabled={!isEditor}\n              invalid={!Validation.validateTimeout(check.timeout)}\n            >\n              <Input\n                label=\"Timeout\"\n                type=\"number\"\n                step={0.1}\n                value={check!.timeout / 1000 || 5}\n                onChange={this.onTimeoutUpdate}\n                suffix=\"seconds\"\n                max={10}\n                min={1}\n                width={30}\n              />\n            </Field>\n\n            <Field\n              label=\"Labels\"\n              description=\"Custom labels to be included with collected metrics and logs.\"\n              disabled={!isEditor}\n              invalid={!Validation.validateLabels(check.labels)}\n            >\n              <SMLabelsForm\n                labels={check.labels}\n                onUpdate={this.onLabelsUpdate}\n                isEditor={isEditor}\n                type=\"Label\"\n                limit={5}\n              />\n            </Field>\n            <br />\n            <h3 className=\"page-heading\">{typeOfCheck!.toLocaleUpperCase()} Settings</h3>\n            <CheckSettings\n              settings={check.settings}\n              typeOfCheck={typeOfCheck || CheckType.HTTP}\n              onUpdate={this.onSettingsUpdate}\n              isEditor={isEditor}\n            />\n          </Collapse>\n        </div>\n        <HorizontalGroup>\n          <Button onClick={this.onSave} disabled={!isEditor || !Validation.validateCheck(check)}>\n            Save {Validation.validateCheck(check)}\n          </Button>\n          {check.id && (\n            <Button variant=\"destructive\" onClick={this.showDeleteCheckModal(true)} disabled={!isEditor}>\n              Delete Check\n            </Button>\n          )}\n          <ConfirmModal\n            isOpen={showDeleteModal}\n            title=\"Delete check\"\n            body=\"Are you sure you want to delete this check?\"\n            confirmText=\"Delete check\"\n            onConfirm={this.onRemoveCheck}\n            onDismiss={this.showDeleteCheckModal(false)}\n          />\n          <a onClick={this.onBack}>Back</a>\n        </HorizontalGroup>\n      </div>\n    );\n  }\n}\n\ninterface CheckSettingsProps {\n  isEditor: boolean;\n  settings: Settings;\n  typeOfCheck: CheckType;\n  onUpdate: (settings: Settings) => void;\n}\n\ninterface CheckSettingsState {\n  settings?: Settings;\n}\n\nexport class CheckSettings extends PureComponent<CheckSettingsProps, CheckSettingsState> {\n  state: CheckSettingsState = {};\n\n  componentDidMount() {\n    const { settings } = this.props;\n    this.setState({ settings });\n  }\n\n  componentDidUpdate(oldProps: CheckSettingsProps) {\n    const { settings, typeOfCheck } = this.props;\n    if (typeOfCheck !== oldProps.typeOfCheck) {\n      this.setState({ settings });\n    }\n  }\n\n  onUpdate = () => {\n    this.props.onUpdate(this.state.settings!);\n  };\n\n  onJsonChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    let settings: Settings = {};\n    settings[this.props.typeOfCheck] = JSON.parse(event.target.value);\n    this.setState({ settings: settings }, this.onUpdate);\n  };\n\n  onSettingsChange = (settings: Settings) => {\n    this.setState({ settings: settings }, this.onUpdate);\n  };\n\n  render() {\n    const { settings } = this.state;\n    if (!settings) {\n      return <div>Loading....</div>;\n    }\n    const { isEditor } = this.props;\n\n    switch (this.props.typeOfCheck) {\n      case CheckType.PING: {\n        return <PingSettingsForm settings={settings} onUpdate={this.onSettingsChange} isEditor={isEditor} />;\n      }\n      case CheckType.HTTP: {\n        return <HttpSettingsForm settings={settings} onUpdate={this.onSettingsChange} isEditor={isEditor} />;\n      }\n      case CheckType.DNS: {\n        return <DnsSettingsForm settings={settings} onUpdate={this.onSettingsChange} isEditor={isEditor} />;\n      }\n      case CheckType.TCP: {\n        return <TcpSettingsForm settings={settings} onUpdate={this.onSettingsChange} isEditor={isEditor} />;\n      }\n    }\n  }\n}\n\ninterface CheckProbesProps {\n  probes: number[];\n  availableProbes: Probe[];\n  isEditor: boolean;\n  onUpdate: (probes: number[]) => void;\n}\n\ninterface CheckProbesState {\n  probes: number[];\n  probeStr: string;\n}\n\nexport class CheckProbes extends PureComponent<CheckProbesProps, CheckProbesState> {\n  state = {\n    probes: this.props.probes || [],\n    probeStr: this.props.probes.join(','),\n  };\n\n  onChange = (item: Array<SelectableValue<number>>) => {\n    let probes: number[] = [];\n    for (const p of item.values()) {\n      if (p.value) {\n        probes.push(p.value);\n      }\n    }\n    const str = probes.join(',');\n    this.setState({ probes: probes, probeStr: str }, this.onUpdate);\n  };\n\n  onUpdate = () => {\n    this.props.onUpdate(this.state.probes);\n  };\n\n  onAllLocations = () => {\n    let probes: number[] = [];\n    for (const p of this.props.availableProbes) {\n      if (p.id) {\n        probes.push(p.id);\n      }\n    }\n    const str = probes.join(',');\n    this.setState({ probes: probes, probeStr: str }, this.onUpdate);\n  };\n  onClearLocations = () => {\n    let probes: number[] = [];\n    this.setState({ probes: probes, probeStr: '' }, this.onUpdate);\n  };\n\n  render() {\n    const { probes } = this.state;\n    const { availableProbes, isEditor } = this.props;\n    let options = [];\n    for (const p of availableProbes) {\n      options.push({\n        label: p.name,\n        value: p.id,\n        description: p.online ? 'Online' : 'Offline',\n      });\n    }\n    let selectedProbes = [];\n    for (const p of probes) {\n      let existing = options.find(item => item.value === p);\n      if (existing) {\n        selectedProbes.push(existing);\n      }\n    }\n\n    return (\n      <div>\n        <MultiSelect\n          options={options}\n          value={selectedProbes}\n          onChange={this.onChange}\n          disabled={!isEditor}\n          invalid={!Validation.validateProbes(probes)}\n          closeMenuOnSelect={false}\n        />\n        <Container margin=\"xs\">\n          <HorizontalGroup spacing=\"md\">\n            <Button onClick={this.onAllLocations} disabled={!isEditor} variant=\"secondary\" size=\"sm\">\n              All&nbsp;&nbsp;\n            </Button>\n            <Button onClick={this.onClearLocations} disabled={!isEditor} variant=\"secondary\" size=\"sm\" type=\"reset\">\n              Clear\n            </Button>\n          </HorizontalGroup>\n        </Container>\n      </div>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport { BigValueColorMode, BigValueGraphMode, BigValue, Container, IconName, Icon } from '@grafana/ui';\nimport { DataSourceInstanceSettings, GraphSeriesValue, DisplayValue } from '@grafana/data';\nimport { config, getBackendSrv } from '@grafana/runtime';\nimport { Check } from 'types';\n\ninterface Props {\n  ds: DataSourceInstanceSettings;\n  labelNames: string[];\n  labelValues: string[];\n  height: number;\n  width: number;\n  sparkline: boolean;\n  onClick?: (event: React.MouseEvent<HTMLElement, MouseEvent>) => void;\n}\n\ninterface State {\n  filter?: string;\n  value: DisplayValue;\n  points: GraphSeriesValue[][];\n  lastUpdate: number;\n}\n\nexport class UptimeGauge extends PureComponent<Props, State> {\n  state: State = {\n    lastUpdate: 0,\n    value: {\n      numeric: 0,\n      title: 'Uptime',\n      text: 'loading...',\n    },\n    points: [],\n  };\n\n  filterString(labelNames: string[], labelValues: string[]): string {\n    let filters: string[] = [];\n    for (let i in labelNames) {\n      const k = labelNames[i];\n      const v = labelValues[i];\n      filters.push(`${k}=\"${v}\"`);\n    }\n    return filters.join(',');\n  }\n\n  async componentDidMount() {\n    const { labelNames, labelValues } = this.props;\n    const filter = this.filterString(labelNames, labelValues);\n    this.setState({ filter }, this.queryUptime);\n  }\n\n  async componentDidUpdate(oldProps: Props) {\n    const { labelNames, labelValues } = this.props;\n    const filter = this.filterString(labelNames, labelValues);\n    if (this.state.filter !== filter) {\n      this.setState({ filter }, this.queryUptime);\n    }\n  }\n\n  async queryUptime() {\n    const { ds, sparkline } = this.props;\n    const { filter } = this.state;\n    if (!filter) {\n      return;\n    }\n    const backendSrv = getBackendSrv();\n    const lastUpdate = Math.floor(Date.now() / 1000);\n    const resp = await backendSrv.datasourceRequest({\n      method: 'GET',\n      url: `${ds.url}/api/v1/query`,\n      params: {\n        query: `sum(rate(probe_success_sum{${filter}}[3h])) / sum(rate(probe_success_count{${filter}}[3h]))`,\n        time: lastUpdate,\n      },\n    });\n    if (!resp.ok) {\n      console.log(resp);\n      return;\n    }\n    let value: DisplayValue = {\n      numeric: 0,\n      title: 'Uptime',\n      text: 'loading...',\n    };\n    if (resp.data.data.result.length < 1) {\n      value.text = 'N/A';\n      this.setState({ value, lastUpdate });\n      return;\n    }\n    const uptime = parseFloat(resp.data.data.result[0].value[1]) * 100;\n    let color = 'green';\n    if (uptime < 99) {\n      color = 'red';\n    }\n    value.color = color;\n    value.numeric = uptime;\n    value.text = uptime.toFixed(2) + '%';\n\n    this.setState({ value, lastUpdate }, () => {\n      if (sparkline) {\n        this.queryHistory();\n      }\n    });\n  }\n\n  async queryHistory() {\n    const { ds } = this.props;\n    const { filter } = this.state;\n    if (!filter) {\n      return;\n    }\n    const backendSrv = getBackendSrv();\n    const lastUpdate = this.state.lastUpdate + 1;\n    const resp = await backendSrv.datasourceRequest({\n      method: 'POST',\n      url: `${ds.url}/api/v1/query_range`,\n      params: {\n        query: `100 * sum(rate(probe_success_sum{${filter}}[10m])) / sum(rate(probe_success_count{${filter}}[10m]))`,\n        start: lastUpdate - 60 * 60 * 3,\n        end: lastUpdate,\n        step: 600,\n      },\n    });\n    if (!resp.ok) {\n      console.log(resp);\n      return;\n    }\n    let points: GraphSeriesValue[][] = [];\n    if (resp.data.data.result.length < 1) {\n      console.log(resp.data);\n      return;\n    }\n    let i = 0;\n    for (const p of resp.data.data.result[0].values) {\n      points.push([i, parseFloat(p[1])]);\n      i++;\n    }\n    this.setState({ points: points, lastUpdate: lastUpdate + 1 });\n  }\n\n  render() {\n    const { value, points } = this.state;\n    const { height, width, sparkline, onClick } = this.props;\n    let sparklineData = undefined;\n    if (sparkline && points.length > 0) {\n      sparklineData = {\n        yMin: 0,\n        yMax: 150,\n        data: points,\n      };\n    }\n    return (\n      <Container>\n        <BigValue\n          theme={config.theme}\n          colorMode={BigValueColorMode.Value}\n          height={height}\n          width={width}\n          graphMode={BigValueGraphMode.Area}\n          value={value}\n          sparkline={sparklineData}\n          onClick={onClick}\n        />\n      </Container>\n    );\n  }\n}\n\ninterface CheckHealthProps {\n  ds: DataSourceInstanceSettings;\n  check: Check;\n}\n\ninterface CheckHealthState {\n  iconName: IconName;\n  className: string;\n}\n\nexport class CheckHealth extends PureComponent<CheckHealthProps, CheckHealthState> {\n  state: CheckHealthState = {\n    iconName: 'heart',\n    className: 'paused',\n  };\n\n  async componentDidMount() {\n    const { check } = this.props;\n    if (!check.enabled) {\n      this.setState({ iconName: 'pause' });\n      return;\n    }\n    await this.queryUptime();\n  }\n\n  async componentDidUpdate(oldProps: CheckHealthProps) {\n    if (this.props.check.id === oldProps.check.id) {\n      return;\n    }\n    const { check } = this.props;\n    if (!check.enabled) {\n      this.setState({ iconName: 'pause' });\n      return;\n    }\n    await this.queryUptime();\n  }\n\n  async queryUptime() {\n    const { ds, check } = this.props;\n    const filter = `instance=\"${check.target}\", job=\"${check.job}\"`;\n\n    const backendSrv = getBackendSrv();\n    const lastUpdate = Math.floor(Date.now() / 1000);\n    const resp = await backendSrv.datasourceRequest({\n      method: 'GET',\n      url: `${ds.url}/api/v1/query`,\n      params: {\n        query: `sum(probe_success{${filter}}) / count(probe_success{${filter}})`,\n        time: lastUpdate,\n      },\n    });\n    if (!resp.ok) {\n      console.log(resp);\n      return;\n    }\n    let iconName: IconName = 'heart';\n    let className = 'ok';\n    if (resp.data.data.result.length < 1) {\n      iconName = 'question-circle';\n      className = 'paused';\n      this.setState({ iconName, className });\n      return;\n    }\n    const uptime = parseFloat(resp.data.data.result[0].value[1]) * 100;\n    if (uptime < 99) {\n      className = 'warning';\n    }\n    if (uptime < 50) {\n      className = 'critical';\n      iconName = 'heart-break';\n    }\n    this.setState({ iconName, className });\n  }\n\n  render() {\n    const { iconName, className } = this.state;\n    return <Icon name={iconName} size=\"xxl\" className={`alert-rule-item__icon alert-state-${className}`} />;\n  }\n}\n","// Libraries\nimport React, { PureComponent } from 'react';\n\n// Types\nimport { Check, GrafanaInstances, Label, IpVersion, OrgRole, CheckType } from 'types';\nimport { getLocationSrv } from '@grafana/runtime';\nimport {\n  Button,\n  HorizontalGroup,\n  Icon,\n  VerticalGroup,\n  Container,\n  Select,\n  Input,\n  Pagination,\n  InfoBox,\n} from '@grafana/ui';\nimport { SelectableValue, unEscapeStringFromRegex, escapeStringForRegex } from '@grafana/data';\nimport { CheckEditor } from 'components/CheckEditor';\nimport { UptimeGauge, CheckHealth } from 'components/UptimeGauge';\nimport { hasRole, dashboardUID } from 'utils';\n\ninterface Props {\n  instance: GrafanaInstances;\n  id?: string;\n  checksPerPage?: number;\n}\n\ninterface State {\n  checks: Check[];\n  filteredChecks: Check[];\n  check?: Check; // selected check\n  addNew: boolean;\n  typeFilter: string;\n  searchFilter: string;\n  totalPages: number;\n  currentPage: number;\n  checksPerPage: number;\n  loading: boolean;\n}\n\nexport class ChecksPage extends PureComponent<Props, State> {\n  state: State = {\n    checks: [],\n    filteredChecks: [],\n    addNew: false,\n    typeFilter: 'all',\n    searchFilter: '',\n    totalPages: 1,\n    currentPage: 1,\n    checksPerPage: this.props.checksPerPage || 15,\n    loading: true,\n  };\n\n  async componentDidMount() {\n    const { instance, id } = this.props;\n    const { checksPerPage } = this.state;\n    const checks = await instance.api.listChecks();\n    const sortedChecks = checks.sort((a, b) => b.job.localeCompare(a.job));\n    const totalPages = Math.ceil(sortedChecks.length / checksPerPage);\n    const num = id ? parseInt(id, 10) : -1;\n    const check = checks.find(c => c.id === num);\n    this.setState({\n      checks: sortedChecks,\n      check: check,\n      totalPages: totalPages,\n      filteredChecks: sortedChecks.slice(0, checksPerPage),\n      loading: false,\n    });\n  }\n\n  componentDidUpdate(oldProps: Props) {\n    if (this.props.id !== oldProps.id) {\n      const { id } = this.props;\n      const num = id ? parseInt(id, 10) : -1;\n      const check = this.state.checks.find(c => c.id === num);\n      this.setState({ check });\n    }\n  }\n\n  //-----------------------------------------------------------------\n  // CHECK List\n  //-----------------------------------------------------------------\n\n  onSelectCheck = (id: number) => {\n    getLocationSrv().update({\n      partial: true,\n      query: {\n        id,\n      },\n    });\n  };\n\n  formatLabels(labels: Label[]) {\n    return labels.map(label => {\n      return (\n        <div>\n          <a onClick={this.onFilterByLabel(label.name, label.value)}>\n            {label.name}={label.value}\n          </a>\n        </div>\n      );\n    });\n  }\n\n  filterChecks() {\n    const { typeFilter, searchFilter, currentPage, checks, checksPerPage } = this.state;\n    let filtered = checks\n      .filter(a => {\n        if (typeFilter === 'all') {\n          return true;\n        }\n        const checkType = Object.keys(a.settings)[0];\n        if (checkType === typeFilter) {\n          return true;\n        }\n        return false;\n      })\n      .filter(a => {\n        if (!searchFilter) {\n          return true;\n        }\n\n        // allow users to search using <term>=<somevalue>.\n        // <term> can be one of target, job or a label name\n        if (searchFilter.split('=').length > 1) {\n          let parts = searchFilter.split('=', 2);\n          let term = parts[0];\n          let value = parts[1];\n          switch (term) {\n            case 'target': {\n              return a.target.match(value);\n            }\n            case 'job': {\n              return a.job.match(value);\n            }\n            default: {\n              for (let label of a.labels) {\n                if (label.name === term && label.value.match(value)) {\n                  return true;\n                }\n              }\n            }\n          }\n          return false;\n        }\n        if (a.job.match(searchFilter) || a.target.match(searchFilter)) {\n          return true;\n        }\n        for (let label of a.labels) {\n          if (label.name.match(searchFilter) || label.value.match(searchFilter)) {\n            return true;\n          }\n        }\n        return false;\n      });\n\n    let totalPages = Math.ceil(filtered.length / checksPerPage);\n    this.setState({\n      totalPages: totalPages,\n      filteredChecks: filtered.slice(checksPerPage * (currentPage - 1), currentPage * checksPerPage),\n    });\n  }\n\n  showDashboard = (check: Check) => (event: React.MouseEvent<HTMLElement, MouseEvent>) => {\n    event.stopPropagation();\n    const { instance } = this.props;\n    const checkType = Object.keys(check.settings)[0];\n    const target = dashboardUID(checkType, instance.api);\n\n    if (!target) {\n      console.log('dashboard not found.', checkType);\n      return;\n    }\n\n    const d = `d/${target.uid}`;\n    let q = {\n      'var-instance': check.target,\n      'var-job': check.job,\n    };\n\n    getLocationSrv().update({\n      partial: false,\n      path: d,\n      query: q,\n    });\n  };\n\n  onTypeFilterChanged = (type: SelectableValue<string>) => {\n    if (!type.value) {\n      return;\n    }\n    this.setState({ typeFilter: type.value, currentPage: 1 }, this.filterChecks);\n  };\n\n  onFilterByLabel = (labelName: string, labelValue: string) => (event: React.MouseEvent<HTMLElement, MouseEvent>) => {\n    event.stopPropagation();\n    this.setState({ searchFilter: `${labelName}=${labelValue}`, currentPage: 1 }, this.filterChecks);\n  };\n\n  onSearchFilterChange = (filter: string) => {\n    this.setState({ searchFilter: filter }, this.filterChecks);\n  };\n\n  changePage = (toPage: number) => {\n    this.setState({ currentPage: toPage }, this.filterChecks);\n  };\n\n  renderNoChecks() {\n    return (\n      <InfoBox\n        title=\"Grafna Cloud Synthetic Monitoring\"\n        url={'https://grafana.com/docs/grafana-cloud/synthetic-monitoring/'}\n      >\n        <p>\n          This account does not currently have any checks configured. Click the button below to start monitoring your\n          services with Grafana Cloud.\n        </p>\n        {hasRole(OrgRole.EDITOR) && (\n          <Button variant=\"primary\" onClick={this.onAddNew}>\n            New Check\n          </Button>\n        )}\n      </InfoBox>\n    );\n  }\n\n  renderCheckList() {\n    const { checks, typeFilter, searchFilter, filteredChecks, totalPages, currentPage } = this.state;\n    const { instance } = this.props;\n    if (!checks) {\n      return null;\n    }\n\n    if (checks.length === 0) {\n      return this.renderNoChecks();\n    }\n\n    const checkTypes = [\n      {\n        label: 'All',\n        value: 'all',\n      },\n      {\n        label: 'HTTP',\n        value: CheckType.HTTP,\n      },\n      {\n        label: 'PING',\n        value: CheckType.PING,\n      },\n      {\n        label: 'DNS',\n        value: CheckType.DNS,\n      },\n      {\n        label: 'TCP',\n        value: CheckType.TCP,\n      },\n    ];\n    const ds = instance.api.getMetricsDS();\n    return (\n      <div>\n        <div className=\"page-action-bar\">\n          <div className=\"gf-form gf-form--grow\">\n            <Input\n              // Replaces the usage of ref\n              autoFocus\n              prefix={<Icon name=\"search\" />}\n              width={40}\n              type=\"text\"\n              value={searchFilter ? unEscapeStringFromRegex(searchFilter) : ''}\n              onChange={event => this.onSearchFilterChange(escapeStringForRegex(event.currentTarget.value))}\n              placeholder=\"search checks\"\n            />\n          </div>\n          <div className=\"gf-form\">\n            <label className=\"gf-form-label\">Types</label>\n\n            <div className=\"width-13\">\n              <Select options={checkTypes} onChange={this.onTypeFilterChanged} value={typeFilter} />\n            </div>\n          </div>\n          <div className=\"page-action-bar__spacer\" />\n          {hasRole(OrgRole.EDITOR) && (\n            <Button variant=\"secondary\" onClick={this.onAddNew}>\n              New Check\n            </Button>\n          )}\n        </div>\n        <section className=\"card-section card-list-layout-list\">\n          <ol className=\"card-list\">\n            {filteredChecks.map(check => {\n              const checkId: number = check.id || 0;\n              if (!check.id) {\n                return;\n              }\n              const checkType = Object.keys(check.settings)[0];\n              return (\n                <li className=\"card-item-wrapper\">\n                  <a className=\"card-item\" onClick={() => this.onSelectCheck(checkId)}>\n                    <HorizontalGroup justify=\"space-between\">\n                      <div className=\"card-item-body\">\n                        <figure className=\"card-item-figure\">\n                          <CheckHealth check={check} ds={ds} />\n                        </figure>\n                        <VerticalGroup>\n                          <div className=\"card-item-name\">{check.target}</div>\n                          <div className=\"card-item-sub-name\">{check.job}</div>\n                        </VerticalGroup>\n                      </div>\n                      <HorizontalGroup justify=\"flex-end\">\n                        <div className=\"card-item-header\">\n                          <div className=\"card-item-type\">{checkType}</div>\n                          {this.formatLabels(check.labels)}\n                        </div>\n                        <Container margin=\"lg\">\n                          <a onClick={this.showDashboard(check)}>\n                            <Icon name=\"apps\" size=\"xl\" />\n                          </a>\n                        </Container>\n                        <UptimeGauge\n                          labelNames={['instance', 'job']}\n                          labelValues={[check.target, check.job]}\n                          ds={ds}\n                          height={70}\n                          width={150}\n                          sparkline={false}\n                        />\n                      </HorizontalGroup>\n                    </HorizontalGroup>\n                  </a>\n                </li>\n              );\n            })}\n          </ol>\n        </section>\n        {totalPages > 1 && (\n          <Pagination numberOfPages={totalPages} currentPage={currentPage} onNavigate={this.changePage} />\n        )}\n      </div>\n    );\n  }\n\n  onAddNew = () => {\n    this.setState({\n      addNew: true,\n    });\n  };\n\n  onRefresh = async () => {\n    const { instance } = this.props;\n    const checks = await instance.api.listChecks();\n    const sortedChecks = checks.sort((a, b) => b.job.localeCompare(a.job));\n    this.setState(\n      {\n        checks: sortedChecks,\n      },\n      this.filterChecks\n    );\n  };\n\n  onGoBack = (refresh: boolean) => {\n    this.setState({\n      addNew: false,\n    });\n    if (refresh) {\n      this.onRefresh();\n    }\n    getLocationSrv().update({\n      partial: true,\n      query: {\n        id: '',\n      },\n    });\n  };\n\n  render() {\n    const { instance } = this.props;\n    const { check, addNew, loading } = this.state;\n    if (loading) {\n      return <div>Loading...</div>;\n    }\n    if (check) {\n      return <CheckEditor check={check} instance={instance.api} onReturn={this.onGoBack} />;\n    }\n    if (addNew) {\n      const template = {\n        job: '',\n        target: '',\n        frequency: 60000,\n        timeout: 2500,\n        enabled: true,\n        labels: [],\n        probes: [],\n        settings: {\n          ping: {\n            ipVersion: IpVersion.V4,\n            dontFragment: false,\n          },\n        },\n      } as Check;\n      return <CheckEditor check={template} instance={instance.api} onReturn={this.onGoBack} />;\n    }\n    return <div>{this.renderCheckList()}</div>;\n  }\n}\n","import React, { PureComponent } from 'react';\nimport {\n  Badge,\n  BadgeColor,\n  Modal,\n  Button,\n  Container,\n  ConfirmModal,\n  Field,\n  Input,\n  HorizontalGroup,\n  Switch,\n  Legend,\n  IconName,\n} from '@grafana/ui';\nimport { Label as SMLabel, Probe, OrgRole } from 'types';\nimport { SMDataSource } from 'datasource/DataSource';\nimport { hasRole } from 'utils';\nimport { SMLabelsForm } from './utils';\nimport { UptimeGauge } from './UptimeGauge';\n\ninterface Props {\n  probe: Probe;\n  instance: SMDataSource;\n  onReturn: (reload: boolean) => void;\n}\n\ninterface State {\n  probe?: Probe;\n  showDeleteModal: boolean;\n  showTokenModal: boolean;\n  probeToken: string;\n  showResetModal: boolean;\n}\n\nexport class ProbeEditor extends PureComponent<Props, State> {\n  state: State = {\n    showDeleteModal: false,\n    showTokenModal: false,\n    showResetModal: false,\n    probeToken: '',\n  };\n\n  async componentDidMount() {\n    const probe = { ...this.props.probe } as Probe;\n    this.setState({\n      probe: probe,\n    });\n  }\n\n  showDeleteProbeModal = (show: boolean) => () => {\n    this.setState({ showDeleteModal: show });\n  };\n\n  showTokenModal = (show: boolean) => () => {\n    this.setState({ showTokenModal: show });\n  };\n\n  showResetModal = (show: boolean) => () => {\n    this.setState({ showResetModal: show });\n  };\n\n  onRemoveProbe = async () => {\n    const id = this.props.probe.id || 0;\n    if (!this.props.probe.id) {\n      return;\n    }\n    const info = this.props.instance.deleteProbe(id);\n    console.log('Remove Probe', id, info);\n    this.props.onReturn(true);\n  };\n\n  onLabelsUpdate = (labels: SMLabel[]) => {\n    let probe = { ...this.state.probe } as Probe;\n    probe.labels = labels;\n    this.setState({ probe });\n  };\n\n  onLatUpdate = (event: React.ChangeEvent<HTMLInputElement>) => {\n    let probe = { ...this.state.probe } as Probe;\n    probe.latitude = event.target.valueAsNumber;\n    this.setState({ probe });\n  };\n\n  onLongUpdate = (event: React.ChangeEvent<HTMLInputElement>) => {\n    let probe = { ...this.state.probe } as Probe;\n    probe.longitude = event.target.valueAsNumber;\n    this.setState({ probe });\n  };\n\n  onRegionUpdate = (event: React.ChangeEvent<HTMLInputElement>) => {\n    let probe = { ...this.state.probe } as Probe;\n    probe.region = event.target.value;\n    this.setState({ probe });\n  };\n\n  onNameUpdate = (event: React.ChangeEvent<HTMLInputElement>) => {\n    let probe = { ...this.state.probe } as Probe;\n    probe.name = event.target.value;\n    this.setState({ probe });\n  };\n\n  onSave = async () => {\n    const { instance } = this.props;\n    const { probe } = this.state;\n    if (!probe) {\n      return;\n    }\n    if (probe.id) {\n      console.log('UPDATE', probe, instance);\n      const info = await instance.updateProbe(probe);\n      console.log('got', info);\n      this.props.onReturn(true);\n    } else {\n      console.log('ADD', probe);\n      const info = await instance.addProbe(probe);\n      this.setState({ showTokenModal: true, probeToken: info.token });\n    }\n  };\n\n  onResetToken = async () => {\n    const { instance } = this.props;\n    const probe = { ...this.props.probe };\n    const info = await instance.resetProbeToken(probe);\n    this.setState({ showTokenModal: true, showResetModal: false, probeToken: info.token });\n  };\n\n  onBack = () => {\n    this.props.onReturn(false);\n  };\n\n  isValid(): boolean {\n    const { probe } = this.state;\n    if (!probe) {\n      return false;\n    }\n    if (probe.name === '') {\n      console.log('probe name must be set');\n      return false;\n    }\n    if (probe.name.length > 32) {\n      console.log('probe name must be less than 32 characters');\n      return false;\n    }\n    if (probe.latitude < -90 || probe.latitude > 90) {\n      console.log('probe latitude must be between -90 and 90');\n      return false;\n    }\n    if (probe.longitude < -180 || probe.longitude > 180) {\n      console.log('probe longitude must be between -180 and 180');\n      return false;\n    }\n    if (probe.region === '') {\n      console.log('probe region must be set');\n      return false;\n    }\n    if (probe.labels.length > 3) {\n      console.log('probes cannot have more than 3 labels');\n      return false;\n    }\n    for (const l of probe.labels) {\n      if (l.name === '' || l.value === '') {\n        console.log('label name and value must be set');\n        return false;\n      }\n      if (!l.name.match(/^[a-zA-Z0-9_]*$/)) {\n        console.log('label name can only contain a-zA-Z0-9_');\n        return false;\n      }\n      if (l.name.length > 32) {\n        console.log('label name must be less than 32 chars');\n        return false;\n      }\n      if (l.value.length > 64) {\n        console.log('label name must be less than 64 chars');\n        return false;\n      }\n    }\n    return true;\n  }\n\n  renderStatus() {\n    const { probe, showResetModal } = this.state;\n    const { instance } = this.props;\n\n    if (!probe) {\n      return;\n    }\n    let isEditor = !probe.public && hasRole(OrgRole.EDITOR);\n    let onlineTxt = 'Offline';\n    let onlineIcon = 'heart-break' as IconName;\n    let color = 'red' as BadgeColor;\n    if (probe.online) {\n      onlineTxt = 'Online';\n      onlineIcon = 'heart';\n      color = 'green';\n    }\n\n    return (\n      <Container margin=\"md\">\n        <Legend>\n          Status: &nbsp;\n          <Badge color={color} icon={onlineIcon} text={onlineTxt} />\n        </Legend>\n        {!probe.public && (\n          <Container>\n            <Button variant=\"destructive\" onClick={this.showResetModal(true)} disabled={!isEditor}>\n              Reset Access Token\n            </Button>\n            <ConfirmModal\n              isOpen={showResetModal}\n              title=\"Reset Probe Access Token\"\n              body=\"Are you sure you want to reset the access token for this Probe?\"\n              confirmText=\"Reset Token\"\n              onConfirm={this.onResetToken}\n              onDismiss={this.showResetModal(false)}\n            />\n          </Container>\n        )}\n        <br />\n        <UptimeGauge\n          labelNames={['probe']}\n          labelValues={[probe.name]}\n          ds={instance.getMetricsDS()}\n          height={200}\n          width={300}\n          sparkline={true}\n        />\n      </Container>\n    );\n  }\n\n  render() {\n    const { probe, showDeleteModal, showTokenModal, probeToken } = this.state;\n    if (!probe) {\n      return <div>Loading...</div>;\n    }\n    let legend = 'Configuration';\n    if (!probe.id) {\n      legend = 'Add Probe';\n    }\n    let isEditor = !probe.public && hasRole(OrgRole.EDITOR);\n\n    return (\n      <HorizontalGroup align=\"flex-start\">\n        <Container>\n          <Legend>{legend}</Legend>\n          <Container margin=\"md\">\n            <HorizontalGroup>\n              <Field label=\"Probe Name\" description=\"Unique name of probe\" disabled={!isEditor}>\n                <Input type=\"string\" value={probe.name} onChange={this.onNameUpdate} />\n              </Field>\n              <Field\n                label=\"Public\"\n                description=\"Public probes are run by Grafana Labs and can be used by all users\"\n                disabled={!isEditor}\n              >\n                <Container padding=\"sm\">\n                  <Switch value={probe.public} disabled={false} />\n                </Container>\n              </Field>\n            </HorizontalGroup>\n          </Container>\n          <Container margin=\"md\">\n            <h3 className=\"page-heading\">Location information</h3>\n            <HorizontalGroup>\n              <Field label=\"Latitude\" description=\"Latitude coordinates of this probe\" disabled={!isEditor}>\n                <Input\n                  label=\"Latitude\"\n                  type=\"number\"\n                  placeholder=\"0.0\"\n                  value={probe?.latitude || 0.0}\n                  onChange={this.onLatUpdate}\n                />\n              </Field>\n              <Field label=\"Longitude\" description=\"Longitude coordinates of this probe\" disabled={!isEditor}>\n                <Input\n                  label=\"Longitude\"\n                  type=\"number\"\n                  placeholder=\"0.0\"\n                  value={probe?.longitude || 0.0}\n                  onChange={this.onLongUpdate}\n                />\n              </Field>\n            </HorizontalGroup>\n            <HorizontalGroup>\n              <Field label=\"Region\" description=\"Latitude coordinates of this probe\" disabled={!isEditor}>\n                <Input\n                  label=\"Region\"\n                  type=\"string\"\n                  placeholder=\"region\"\n                  value={probe.region}\n                  onChange={this.onRegionUpdate}\n                />\n              </Field>\n            </HorizontalGroup>\n          </Container>\n          <Container margin=\"md\">\n            <h3 className=\"page-heading\">Labels</h3>\n            <SMLabelsForm\n              labels={probe.labels}\n              onUpdate={this.onLabelsUpdate}\n              isEditor={isEditor}\n              type=\"Label\"\n              limit={3}\n            />\n          </Container>\n          <Container margin=\"md\">\n            <HorizontalGroup>\n              <Button onClick={this.onSave} disabled={!isEditor || !this.isValid()}>\n                Save\n              </Button>\n              {probe.id && (\n                <Button variant=\"destructive\" onClick={this.showDeleteProbeModal(true)} disabled={!isEditor}>\n                  Delete Probe\n                </Button>\n              )}\n              <ConfirmModal\n                isOpen={showDeleteModal}\n                title=\"Delete Probe\"\n                body=\"Are you sure you want to delete this Probe?\"\n                confirmText=\"Delete Probe\"\n                onConfirm={this.onRemoveProbe}\n                onDismiss={this.showDeleteProbeModal(false)}\n              />\n              <a onClick={this.onBack}>Back</a>\n            </HorizontalGroup>\n          </Container>\n          <Modal\n            isOpen={showTokenModal}\n            title=\"Probe Authentication Token\"\n            icon={'lock'}\n            onDismiss={probe.id ? this.showTokenModal(false) : this.onBack}\n          >\n            {probeToken}\n          </Modal>\n        </Container>\n        {probe.id && this.renderStatus()}\n      </HorizontalGroup>\n    );\n  }\n}\n","// Libraries\nimport React, { PureComponent } from 'react';\n\n// Types\nimport { GrafanaInstances, Label, Probe, OrgRole } from 'types';\nimport { Button, HorizontalGroup, IconName, Badge, BadgeColor } from '@grafana/ui';\nimport { getLocationSrv } from '@grafana/runtime';\nimport { ProbeEditor } from 'components/ProbeEditor';\nimport { UptimeGauge } from 'components/UptimeGauge';\nimport { hasRole } from 'utils';\n//import ProbesMap from 'components/ProbesMap';\n\ninterface Props {\n  instance: GrafanaInstances;\n  id?: string;\n}\n\ninterface State {\n  probes: Probe[];\n  probe?: Probe; // selected Probe\n  addNew: boolean;\n}\n\nexport class ProbesPage extends PureComponent<Props, State> {\n  state: State = {\n    probes: [],\n    addNew: false,\n  };\n\n  async componentDidMount() {\n    const { instance, id } = this.props;\n    const probes = await instance.api.listProbes();\n    const num = id ? parseInt(id, 10) : -1;\n    const probe = probes.find(p => p.id === num);\n    this.setState({ probes, probe });\n  }\n\n  componentDidUpdate(oldProps: Props) {\n    if (this.props.id !== oldProps.id) {\n      const { id } = this.props;\n      const num = id ? parseInt(id, 10) : -1;\n      const probe = this.state.probes.find(p => p.id === num);\n      this.setState({ probe });\n    }\n  }\n\n  labelsToString(labels: Label[]) {\n    return labels\n      .map(label => {\n        return label.name + '=' + label.value;\n      })\n      .join(' ');\n  }\n\n  onSelectProbe = (id: number) => {\n    getLocationSrv().update({\n      partial: true,\n      query: {\n        id,\n      },\n    });\n  };\n\n  onAddNew = () => {\n    this.setState({\n      addNew: true,\n    });\n  };\n\n  onRefresh = async () => {\n    const { instance } = this.props;\n    const probes = await instance.api.listProbes();\n    this.setState({\n      probes,\n    });\n  };\n\n  onGoBack = (refresh: boolean) => {\n    console.log('go back');\n    this.setState({\n      addNew: false,\n    });\n    if (refresh) {\n      this.onRefresh();\n    }\n    getLocationSrv().update({\n      partial: true,\n      query: {\n        id: '',\n      },\n    });\n  };\n\n  render() {\n    const { instance } = this.props;\n    const { probe, addNew } = this.state;\n    if (!instance) {\n      return <div>Loading...</div>;\n    }\n\n    if (probe) {\n      return <ProbeEditor probe={probe} instance={instance.api} onReturn={this.onGoBack} />;\n    }\n    if (addNew) {\n      const template = {\n        name: '',\n        public: false,\n        latitude: 0.0,\n        longitude: 0.0,\n        region: '',\n        labels: [],\n        online: false,\n        onlineChange: 0,\n      } as Probe;\n      return <ProbeEditor probe={template} instance={instance.api} onReturn={this.onGoBack} />;\n    }\n    return <div>{this.renderProbeList()}</div>;\n  }\n\n  renderProbeList() {\n    const { probes } = this.state;\n    const { instance } = this.props;\n    if (!probes) {\n      return null;\n    }\n    return (\n      <div>\n        {hasRole(OrgRole.EDITOR) && (\n          <HorizontalGroup justify=\"flex-end\">\n            <Button onClick={this.onAddNew}>New</Button>\n          </HorizontalGroup>\n        )}\n        {probes.map(probe => {\n          const probeId: number = probe.id || 0;\n          if (!probe.id) {\n            return;\n          }\n          let onlineTxt = 'Offline';\n          let onlineIcon = 'heart-break' as IconName;\n          let color = 'red' as BadgeColor;\n          if (probe.online) {\n            onlineTxt = 'Online';\n            onlineIcon = 'heart';\n            color = 'green';\n          }\n          return (\n            <div key={probeId} className=\"add-data-source-item\" onClick={() => this.onSelectProbe(probeId)}>\n              <div className=\"add-data-source-item-text-wrapper\">\n                <span className=\"add-data-source-item-text\">{probe.name}</span>\n                <span className=\"add-data-source-item-desc\">\n                  <Badge color={color} icon={onlineIcon} text={onlineTxt} />\n                  <div>{this.labelsToString(probe.labels)}</div>\n                </span>\n              </div>\n              <UptimeGauge\n                labelNames={['probe']}\n                labelValues={[probe.name]}\n                ds={instance.api.getMetricsDS()}\n                height={60}\n                width={150}\n                sparkline={false}\n              />\n              <div className=\"add-data-source-item-actions\">\n                <Button>Select</Button>\n              </div>\n            </div>\n          );\n        })}\n        <br />\n      </div>\n    );\n  }\n}\n","// Libraries\nimport React, { PureComponent } from 'react';\n\n// Types\nimport { NavModelItem, AppRootProps, DataSourceInstanceSettings } from '@grafana/data';\nimport { GlobalSettings, RegistrationInfo, GrafanaInstances } from './types';\nimport { SMDataSource } from 'datasource/DataSource';\nimport { findSMDataSources, createNewApiInstance, dashboardUID } from 'utils';\nimport { SMOptions } from 'datasource/types';\nimport { getDataSourceSrv, getLocationSrv } from '@grafana/runtime';\nimport { TenantSetup } from './components/TenantSetup';\nimport { ChecksPage } from 'page/ChecksPage';\nimport { ProbesPage } from 'page/ProbesPage';\n\ninterface Props extends AppRootProps<GlobalSettings> {}\ninterface State {\n  settings: Array<DataSourceInstanceSettings<SMOptions>>;\n  instance?: GrafanaInstances;\n  info?: RegistrationInfo;\n  valid?: boolean;\n}\n\nexport class RootPage extends PureComponent<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      settings: findSMDataSources(),\n    };\n  }\n\n  async loadInstances() {\n    const settings = this.state.settings[0];\n    if (settings && settings.name) {\n      const api = (await getDataSourceSrv().get(settings.name)) as SMDataSource;\n      if (api) {\n        let global = api.instanceSettings.jsonData;\n        const instance: GrafanaInstances = {\n          api,\n          metrics: await loadDataSourceIfExists(global?.metrics?.grafanaName),\n          logs: await loadDataSourceIfExists(global?.logs?.grafanaName),\n        };\n\n        this.setState({\n          instance,\n          valid: isValid(instance),\n        });\n        this.updateNav();\n        return;\n      }\n    }\n\n    // Create a new instance\n    if (true) {\n      console.log('Creating a new datasource TODO, check user auth');\n      await createNewApiInstance();\n      console.log('Reload the windows (will redirect)');\n      window.location.reload(); // force reload\n    }\n  }\n\n  async componentDidMount() {\n    this.updateNav();\n    this.loadInstances();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (this.props.query !== prevProps.query) {\n      if (this.props.query.page !== prevProps.query.page) {\n        this.updateNav();\n      }\n    }\n  }\n\n  updateNav() {\n    const { path, onNavChanged, query, meta } = this.props;\n    const selected = query.page || 'checks';\n    const tabs: NavModelItem[] = [];\n    if (this.state.valid && selected !== 'config' && selected !== 'redirect') {\n      tabs.push({\n        text: 'Checks',\n        url: path + '?page=checks',\n        id: 'checks',\n      });\n      tabs.push({\n        text: 'Probes',\n        url: path + '?page=probes',\n        id: 'probes',\n      });\n    } else if (this.state.valid && selected === 'redirect') {\n      tabs.push({\n        text: 'Dashboard Redirect',\n        url: path + '?page=redirect',\n        id: 'redirect',\n      });\n      tabs.push({\n        text: 'Config',\n        // icon: 'fa fa-fw fa-file-text-o',\n        url: path,\n        id: 'config',\n      });\n    } else {\n      tabs.push({\n        text: 'Config',\n        // icon: 'fa fa-fw fa-file-text-o',\n        url: path,\n        id: 'config',\n      });\n    }\n\n    // Set the active tab\n    let found = false;\n\n    for (const tab of tabs) {\n      tab.active = !found && selected === tab.id;\n      if (tab.active) {\n        found = true;\n      }\n    }\n    if (!found) {\n      tabs[0].active = true;\n    }\n\n    const node = {\n      text: 'Synthetic Monitoring',\n      img: meta.info.logos.large,\n      subTitle: 'Grafana Cloud Synthetic Monitoring',\n      url: path,\n      children: tabs,\n    };\n\n    // Update the page header\n    onNavChanged({\n      node: node,\n      main: node,\n    });\n  }\n\n  //-----------------------------------------------------------------------------------------\n  // Multiple Config\n  //-----------------------------------------------------------------------------------------\n  renderMultipleConfigs() {\n    return <div>TODO... multiple instances... delete one!!!!</div>;\n  }\n\n  dashboardRedirect() {\n    const { instance } = this.state;\n    const { query } = this.props;\n    if (!instance) {\n      return <div>Loading.... (or maybe a user permissions error?)</div>;\n    }\n    if (!query.dashboard) {\n      return <div>Dashboard not found</div>;\n    }\n    const target = dashboardUID(query.dashboard, instance!.api);\n\n    if (!target) {\n      console.log('dashboard not found.', query);\n      return <div>Dashboard not found</div>;\n    }\n\n    const d = `d/${target.uid}`;\n    let q = { ...query };\n    delete q.dashboard;\n    delete q.page;\n    getLocationSrv().update({\n      partial: false,\n      path: d,\n      query: q,\n    });\n    return null;\n  }\n\n  //-----------------------------------------------------------------------------------------\n  // Config\n  //-----------------------------------------------------------------------------------------\n  renderConfig() {\n    const { instance } = this.state;\n    if (!instance) {\n      return <div>Loading.... (or maybe a user permissions error?)</div>;\n    }\n\n    return <TenantSetup instance={instance.api} />;\n  }\n\n  render() {\n    const { settings, valid, instance } = this.state;\n    if (settings.length > 1) {\n      return this.renderMultipleConfigs();\n    }\n    const { query } = this.props;\n    if (!valid || query.page === 'config') {\n      return this.renderConfig();\n    }\n\n    if ('dashboard' in query) {\n      return this.dashboardRedirect();\n    }\n\n    if (query.page === 'checks') {\n      return <ChecksPage instance={instance!} id={query.id} />;\n    }\n    if (query.page === 'probes') {\n      return <ProbesPage instance={instance!} id={query.id} />;\n    }\n\n    return <div>Page not found.</div>;\n  }\n}\n\nasync function loadDataSourceIfExists(name?: string) {\n  if (name) {\n    try {\n      return await getDataSourceSrv().get();\n    } catch {}\n  }\n  return undefined;\n}\n\nfunction isValid(instance: GrafanaInstances): boolean {\n  if (!instance || !instance.logs || !instance.metrics || !instance.api) {\n    return false;\n  }\n  return true;\n}\n","// Angular pages\nimport { ExampleConfigCtrl } from './legacy/config';\nimport { AppPlugin } from '@grafana/data';\nimport { GlobalSettings } from './types';\nimport { RootPage } from 'RootPage';\n\n// Legacy exports just for testing\nexport { ExampleConfigCtrl as ConfigCtrl };\n\nexport const plugin = new AppPlugin<GlobalSettings>().setRootPage(RootPage);\n"],"sourceRoot":""}